function em(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Yc={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),rm=Symbol.for("react.portal"),am=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),om=Symbol.for("react.provider"),lm=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),dm=Symbol.for("react.memo"),hm=Symbol.for("react.lazy"),su=Symbol.iterator;function fm(t){return t===null||typeof t!="object"?null:(t=su&&t[su]||t["@@iterator"],typeof t=="function"?t:null)}var Zc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ed=Object.assign,td={};function Nr(t,e,n){this.props=t,this.context=e,this.refs=td,this.updater=n||Zc}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nd(){}nd.prototype=Nr.prototype;function sl(t,e,n){this.props=t,this.context=e,this.refs=td,this.updater=n||Zc}var ol=sl.prototype=new nd;ol.constructor=sl;ed(ol,Nr.prototype);ol.isPureReactComponent=!0;var ou=Array.isArray,rd=Object.prototype.hasOwnProperty,ll={current:null},ad={key:!0,ref:!0,__self:!0,__source:!0};function id(t,e,n){var r,a={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)rd.call(e,r)&&!ad.hasOwnProperty(r)&&(a[r]=e[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];a.children=u}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Ca,type:t,key:i,ref:s,props:a,_owner:ll.current}}function mm(t,e){return{$$typeof:Ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ul(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ca}function gm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lu=/\/+/g;function ms(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gm(""+t.key):e.toString(36)}function ai(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ca:case rm:s=!0}}if(s)return s=t,a=a(s),t=r===""?"."+ms(s,0):r,ou(a)?(n="",t!=null&&(n=t.replace(lu,"$&/")+"/"),ai(a,e,n,"",function(c){return c})):a!=null&&(ul(a)&&(a=mm(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(lu,"$&/")+"/")+t)),e.push(a)),1;if(s=0,r=r===""?".":r+":",ou(t))for(var o=0;o<t.length;o++){i=t[o];var u=r+ms(i,o);s+=ai(i,e,n,u,a)}else if(u=fm(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=r+ms(i,o++),s+=ai(i,e,n,u,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Da(t,e,n){if(t==null)return t;var r=[],a=0;return ai(t,r,"","",function(i){return e.call(n,i,a++)}),r}function pm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var He={current:null},ii={transition:null},vm={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ii,ReactCurrentOwner:ll};function sd(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!ul(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=Nr;X.Fragment=am;X.Profiler=sm;X.PureComponent=sl;X.StrictMode=im;X.Suspense=cm;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vm;X.act=sd;X.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ed({},t.props),a=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=ll.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)rd.call(e,u)&&!ad.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Ca,type:t.type,key:a,ref:i,props:r,_owner:s}};X.createContext=function(t){return t={$$typeof:lm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:om,_context:t},t.Consumer=t};X.createElement=id;X.createFactory=function(t){var e=id.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:um,render:t}};X.isValidElement=ul;X.lazy=function(t){return{$$typeof:hm,_payload:{_status:-1,_result:t},_init:pm}};X.memo=function(t,e){return{$$typeof:dm,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=ii.transition;ii.transition={};try{t()}finally{ii.transition=e}};X.unstable_act=sd;X.useCallback=function(t,e){return He.current.useCallback(t,e)};X.useContext=function(t){return He.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return He.current.useDeferredValue(t)};X.useEffect=function(t,e){return He.current.useEffect(t,e)};X.useId=function(){return He.current.useId()};X.useImperativeHandle=function(t,e,n){return He.current.useImperativeHandle(t,e,n)};X.useInsertionEffect=function(t,e){return He.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return He.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return He.current.useMemo(t,e)};X.useReducer=function(t,e,n){return He.current.useReducer(t,e,n)};X.useRef=function(t){return He.current.useRef(t)};X.useState=function(t){return He.current.useState(t)};X.useSyncExternalStore=function(t,e,n){return He.current.useSyncExternalStore(t,e,n)};X.useTransition=function(){return He.current.useTransition()};X.version="18.3.1";Yc.exports=X;var y=Yc.exports;const l=tm(y),ym=em({__proto__:null,default:l},[y]);var od={exports:{}},ot={},ld={exports:{}},ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var G=M.length;M.push(B);e:for(;0<G;){var re=G-1>>>1,ne=M[re];if(0<a(ne,B))M[re]=B,M[G]=ne,G=re;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],G=M.pop();if(G!==B){M[0]=G;e:for(var re=0,ne=M.length,nt=ne>>>1;re<nt;){var Te=2*(re+1)-1,St=M[Te],Le=Te+1,Ke=M[Le];if(0>a(St,G))Le<ne&&0>a(Ke,St)?(M[re]=Ke,M[Le]=G,re=Le):(M[re]=St,M[Te]=G,re=Te);else if(Le<ne&&0>a(Ke,G))M[re]=Ke,M[Le]=G,re=Le;else break e}}return B}function a(M,B){var G=M.sortIndex-B.sortIndex;return G!==0?G:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],c=[],d=1,h=null,f=3,v=!1,w=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=M)r(c),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(c)}}function E(M){if(k=!1,g(M),!w)if(n(u)!==null)w=!0,ie(_);else{var B=n(c);B!==null&&Ce(E,B.startTime-M)}}function _(M,B){w=!1,k&&(k=!1,p(A),A=-1),v=!0;var G=f;try{for(g(B),h=n(u);h!==null&&(!(h.expirationTime>B)||M&&!D());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var ne=re(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(u)&&r(u),g(B)}else r(u);h=n(u)}if(h!==null)var nt=!0;else{var Te=n(c);Te!==null&&Ce(E,Te.startTime-B),nt=!1}return nt}finally{h=null,f=G,v=!1}}var C=!1,P=null,A=-1,O=5,j=-1;function D(){return!(t.unstable_now()-j<O)}function F(){if(P!==null){var M=t.unstable_now();j=M;var B=!0;try{B=P(!0,M)}finally{B?Y():(C=!1,P=null)}}else C=!1}var Y;if(typeof m=="function")Y=function(){m(F)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,q=se.port2;se.port1.onmessage=F,Y=function(){q.postMessage(null)}}else Y=function(){x(F,0)};function ie(M){P=M,C||(C=!0,Y())}function Ce(M,B){A=x(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,ie(_))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var G=f;f=B;try{return M()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=f;f=M;try{return B()}finally{f=G}},t.unstable_scheduleCallback=function(M,B,G){var re=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?re+G:re):G=re,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,M={id:d++,callback:B,priorityLevel:M,startTime:G,expirationTime:ne,sortIndex:-1},G>re?(M.sortIndex=G,e(c,M),n(u)===null&&M===n(c)&&(k?(p(A),A=-1):k=!0,Ce(E,G-re))):(M.sortIndex=ne,e(u,M),w||v||(w=!0,ie(_))),M},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(M){var B=f;return function(){var G=f;f=B;try{return M.apply(this,arguments)}finally{f=G}}}})(ud);ld.exports=ud;var wm=ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=y,st=wm;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cd=new Set,oa={};function zn(t,e){pr(t,e),pr(t+"Capture",e)}function pr(t,e){for(oa[t]=e,t=0;t<e.length;t++)cd.add(e[t])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uu={},cu={};function xm(t){return Xs.call(cu,t)?!0:Xs.call(uu,t)?!1:bm.test(t)?cu[t]=!0:(uu[t]=!0,!1)}function Em(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _m(t,e,n,r){if(e===null||typeof e>"u"||Em(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,a,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ie[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ie[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ie[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ie[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ie[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ie[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ie[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var cl=/[\-:]([a-z])/g;function dl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cl,dl);Ie[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cl,dl);Ie[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cl,dl);Ie[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function hl(t,e,n,r){var a=Ie.hasOwnProperty(e)?Ie[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_m(e,n,a,r)&&(n=null),r||a===null?xm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vt=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),fl=Symbol.for("react.strict_mode"),Ys=Symbol.for("react.profiler"),dd=Symbol.for("react.provider"),hd=Symbol.for("react.context"),ml=Symbol.for("react.forward_ref"),Zs=Symbol.for("react.suspense"),eo=Symbol.for("react.suspense_list"),gl=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),fd=Symbol.for("react.offscreen"),du=Symbol.iterator;function Ir(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,gs;function Wr(t){if(gs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gs=e&&e[1]||""}return`
`+gs+t}var ps=!1;function vs(t,e){if(!t||ps)return"";ps=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=r.stack.split(`
`),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var u=`
`+a[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=o);break}}}finally{ps=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wr(t):""}function Sm(t){switch(t.tag){case 5:return Wr(t.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return t=vs(t.type,!1),t;case 11:return t=vs(t.type.render,!1),t;case 1:return t=vs(t.type,!0),t;default:return""}}function to(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yn:return"Fragment";case Xn:return"Portal";case Ys:return"Profiler";case fl:return"StrictMode";case Zs:return"Suspense";case eo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hd:return(t.displayName||"Context")+".Consumer";case dd:return(t._context.displayName||"Context")+".Provider";case ml:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gl:return e=t.displayName||null,e!==null?e:to(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return to(t(e))}catch{}}return null}function Nm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return to(e);case 8:return e===fl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function md(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cm(t){var e=md(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function za(t){t._valueTracker||(t._valueTracker=Cm(t))}function gd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=md(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function no(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pd(t,e){e=e.checked,e!=null&&hl(t,"checked",e,!1)}function ro(t,e){pd(t,e);var n=gn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ao(t,e.type,n):e.hasOwnProperty("defaultValue")&&ao(t,e.type,gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ao(t,e,n){(e!=="number"||pi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hr=Array.isArray;function cr(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function io(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Hr(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gn(n)}}function vd(t,e){var n=gn(e.value),r=gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function so(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,wd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tm=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(t){Tm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jr[e]=Jr[t]})});function kd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jr.hasOwnProperty(t)&&Jr[t]?(""+e).trim():e+"px"}function bd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=kd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var Pm=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(t,e){if(e){if(Pm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function lo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uo=null;function pl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var co=null,dr=null,hr=null;function pu(t){if(t=Oa(t)){if(typeof co!="function")throw Error($(280));var e=t.stateNode;e&&(e=Ji(e),co(t.stateNode,t.type,e))}}function xd(t){dr?hr?hr.push(t):hr=[t]:dr=t}function Ed(){if(dr){var t=dr,e=hr;if(hr=dr=null,pu(t),e)for(t=0;t<e.length;t++)pu(e[t])}}function _d(t,e){return t(e)}function Sd(){}var ys=!1;function Nd(t,e,n){if(ys)return t(e,n);ys=!0;try{return _d(t,e,n)}finally{ys=!1,(dr!==null||hr!==null)&&(Sd(),Ed())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Ji(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ho=!1;if(Ft)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{ho=!1}function Om(t,e,n,r,a,i,s,o,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Qr=!1,vi=null,yi=!1,fo=null,jm={onError:function(t){Qr=!0,vi=t}};function Am(t,e,n,r,a,i,s,o,u){Qr=!1,vi=null,Om.apply(jm,arguments)}function Rm(t,e,n,r,a,i,s,o,u){if(Am.apply(this,arguments),Qr){if(Qr){var c=vi;Qr=!1,vi=null}else throw Error($(198));yi||(yi=!0,fo=c)}}function Bn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vu(t){if(Bn(t)!==t)throw Error($(188))}function Im(t){var e=t.alternate;if(!e){if(e=Bn(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return vu(a),t;if(i===r)return vu(a),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Td(t){return t=Im(t),t!==null?Pd(t):null}function Pd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pd(t);if(e!==null)return e;t=t.sibling}return null}var Od=st.unstable_scheduleCallback,yu=st.unstable_cancelCallback,Lm=st.unstable_shouldYield,$m=st.unstable_requestPaint,ye=st.unstable_now,Um=st.unstable_getCurrentPriorityLevel,vl=st.unstable_ImmediatePriority,jd=st.unstable_UserBlockingPriority,wi=st.unstable_NormalPriority,Dm=st.unstable_LowPriority,Ad=st.unstable_IdlePriority,Hi=null,At=null;function Mm(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Hi,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Fm,zm=Math.log,Bm=Math.LN2;function Fm(t){return t>>>=0,t===0?32:31-(zm(t)/Bm|0)|0}var Fa=64,qa=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ki(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~a;o!==0?r=Vr(o):(i&=s,i!==0&&(r=Vr(i)))}else s=n&~a,s!==0?r=Vr(s):i!==0&&(r=Vr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xt(e),a=1<<n,r|=t[n],e&=~a;return r}function qm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-xt(i),o=1<<s,u=a[s];u===-1?(!(o&n)||o&r)&&(a[s]=qm(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function mo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rd(){var t=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),t}function ws(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=n}function Hm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-xt(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function yl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xt(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var ae=0;function Id(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ld,wl,$d,Ud,Dd,go=!1,Wa=[],sn=null,on=null,ln=null,ca=new Map,da=new Map,Zt=[],Vm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(t,e){switch(t){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function $r(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Oa(e),e!==null&&wl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Km(t,e,n,r,a){switch(e){case"focusin":return sn=$r(sn,t,e,n,r,a),!0;case"dragenter":return on=$r(on,t,e,n,r,a),!0;case"mouseover":return ln=$r(ln,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return ca.set(i,$r(ca.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,da.set(i,$r(da.get(i)||null,t,e,n,r,a)),!0}return!1}function Md(t){var e=Pn(t.target);if(e!==null){var n=Bn(e);if(n!==null){if(e=n.tag,e===13){if(e=Cd(n),e!==null){t.blockedOn=e,Dd(t.priority,function(){$d(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function si(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=po(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uo=r,n.target.dispatchEvent(r),uo=null}else return e=Oa(n),e!==null&&wl(e),t.blockedOn=n,!1;e.shift()}return!0}function ku(t,e,n){si(t)&&n.delete(e)}function Gm(){go=!1,sn!==null&&si(sn)&&(sn=null),on!==null&&si(on)&&(on=null),ln!==null&&si(ln)&&(ln=null),ca.forEach(ku),da.forEach(ku)}function Ur(t,e){t.blockedOn===e&&(t.blockedOn=null,go||(go=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Gm)))}function ha(t){function e(a){return Ur(a,t)}if(0<Wa.length){Ur(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sn!==null&&Ur(sn,t),on!==null&&Ur(on,t),ln!==null&&Ur(ln,t),ca.forEach(e),da.forEach(e),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Md(n),n.blockedOn===null&&Zt.shift()}var fr=Vt.ReactCurrentBatchConfig,bi=!0;function Jm(t,e,n,r){var a=ae,i=fr.transition;fr.transition=null;try{ae=1,kl(t,e,n,r)}finally{ae=a,fr.transition=i}}function Qm(t,e,n,r){var a=ae,i=fr.transition;fr.transition=null;try{ae=4,kl(t,e,n,r)}finally{ae=a,fr.transition=i}}function kl(t,e,n,r){if(bi){var a=po(t,e,n,r);if(a===null)Ps(t,e,r,xi,n),wu(t,r);else if(Km(a,t,e,n,r))r.stopPropagation();else if(wu(t,r),e&4&&-1<Vm.indexOf(t)){for(;a!==null;){var i=Oa(a);if(i!==null&&Ld(i),i=po(t,e,n,r),i===null&&Ps(t,e,r,xi,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Ps(t,e,r,null,n)}}var xi=null;function po(t,e,n,r){if(xi=null,t=pl(r),t=Pn(t),t!==null)if(e=Bn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xi=t,null}function zd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Um()){case vl:return 1;case jd:return 4;case wi:case Dm:return 16;case Ad:return 536870912;default:return 16}default:return 16}}var nn=null,bl=null,oi=null;function Bd(){if(oi)return oi;var t,e=bl,n=e.length,r,a="value"in nn?nn.value:nn.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===a[i-r];r++);return oi=a.slice(t,1<r?1-r:void 0)}function li(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ha(){return!0}function bu(){return!1}function lt(t){function e(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ha:bu,this.isPropagationStopped=bu,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),e}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=lt(Cr),Pa=me({},Cr,{view:0,detail:0}),Xm=lt(Pa),ks,bs,Dr,Vi=me({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:El,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(ks=t.screenX-Dr.screenX,bs=t.screenY-Dr.screenY):bs=ks=0,Dr=t),ks)},movementY:function(t){return"movementY"in t?t.movementY:bs}}),xu=lt(Vi),Ym=me({},Vi,{dataTransfer:0}),Zm=lt(Ym),eg=me({},Pa,{relatedTarget:0}),xs=lt(eg),tg=me({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),ng=lt(tg),rg=me({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ag=lt(rg),ig=me({},Cr,{data:0}),Eu=lt(ig),sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ug(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lg[t])?!!e[t]:!1}function El(){return ug}var cg=me({},Pa,{key:function(t){if(t.key){var e=sg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?og[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:El,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dg=lt(cg),hg=me({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=lt(hg),fg=me({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:El}),mg=lt(fg),gg=me({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=lt(gg),vg=me({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yg=lt(vg),wg=[9,13,27,32],_l=Ft&&"CompositionEvent"in window,Xr=null;Ft&&"documentMode"in document&&(Xr=document.documentMode);var kg=Ft&&"TextEvent"in window&&!Xr,Fd=Ft&&(!_l||Xr&&8<Xr&&11>=Xr),Su=" ",Nu=!1;function qd(t,e){switch(t){case"keyup":return wg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zn=!1;function bg(t,e){switch(t){case"compositionend":return Wd(e);case"keypress":return e.which!==32?null:(Nu=!0,Su);case"textInput":return t=e.data,t===Su&&Nu?null:t;default:return null}}function xg(t,e){if(Zn)return t==="compositionend"||!_l&&qd(t,e)?(t=Bd(),oi=bl=nn=null,Zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fd&&e.locale!=="ko"?null:e.data;default:return null}}var Eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Eg[t.type]:e==="textarea"}function Hd(t,e,n,r){xd(r),e=Ei(e,"onChange"),0<e.length&&(n=new xl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yr=null,fa=null;function _g(t){nh(t,0)}function Ki(t){var e=nr(t);if(gd(e))return t}function Sg(t,e){if(t==="change")return e}var Vd=!1;if(Ft){var Es;if(Ft){var _s="oninput"in document;if(!_s){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),_s=typeof Tu.oninput=="function"}Es=_s}else Es=!1;Vd=Es&&(!document.documentMode||9<document.documentMode)}function Pu(){Yr&&(Yr.detachEvent("onpropertychange",Kd),fa=Yr=null)}function Kd(t){if(t.propertyName==="value"&&Ki(fa)){var e=[];Hd(e,fa,t,pl(t)),Nd(_g,e)}}function Ng(t,e,n){t==="focusin"?(Pu(),Yr=e,fa=n,Yr.attachEvent("onpropertychange",Kd)):t==="focusout"&&Pu()}function Cg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ki(fa)}function Tg(t,e){if(t==="click")return Ki(e)}function Pg(t,e){if(t==="input"||t==="change")return Ki(e)}function Og(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _t=typeof Object.is=="function"?Object.is:Og;function ma(t,e){if(_t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Xs.call(e,a)||!_t(t[a],e[a]))return!1}return!0}function Ou(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ju(t,e){var n=Ou(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ou(n)}}function Gd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jd(){for(var t=window,e=pi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pi(t.document)}return e}function Sl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jg(t){var e=Jd(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gd(n.ownerDocument.documentElement,n)){if(r!==null&&Sl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=ju(n,i);var s=ju(n,r);a&&s&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ag=Ft&&"documentMode"in document&&11>=document.documentMode,er=null,vo=null,Zr=null,yo=!1;function Au(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yo||er==null||er!==pi(r)||(r=er,"selectionStart"in r&&Sl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zr&&ma(Zr,r)||(Zr=r,r=Ei(vo,"onSelect"),0<r.length&&(e=new xl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=er)))}function Va(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tr={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Ss={},Qd={};Ft&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function Gi(t){if(Ss[t])return Ss[t];if(!tr[t])return t;var e=tr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qd)return Ss[t]=e[n];return t}var Xd=Gi("animationend"),Yd=Gi("animationiteration"),Zd=Gi("animationstart"),eh=Gi("transitionend"),th=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){th.set(t,e),zn(e,[t])}for(var Ns=0;Ns<Ru.length;Ns++){var Cs=Ru[Ns],Rg=Cs.toLowerCase(),Ig=Cs[0].toUpperCase()+Cs.slice(1);vn(Rg,"on"+Ig)}vn(Xd,"onAnimationEnd");vn(Yd,"onAnimationIteration");vn(Zd,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(eh,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Iu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rm(r,e,void 0,t),t.currentTarget=null}function nh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&a.isPropagationStopped())break e;Iu(a,o,c),i=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,c=o.currentTarget,o=o.listener,u!==i&&a.isPropagationStopped())break e;Iu(a,o,c),i=u}}}if(yi)throw t=fo,yi=!1,fo=null,t}function ue(t,e){var n=e[Eo];n===void 0&&(n=e[Eo]=new Set);var r=t+"__bubble";n.has(r)||(rh(e,t,2,!1),n.add(r))}function Ts(t,e,n){var r=0;e&&(r|=4),rh(n,t,r,e)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Ka]){t[Ka]=!0,cd.forEach(function(n){n!=="selectionchange"&&(Lg.has(n)||Ts(n,!1,t),Ts(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ka]||(e[Ka]=!0,Ts("selectionchange",!1,e))}}function rh(t,e,n,r){switch(zd(e)){case 1:var a=Jm;break;case 4:a=Qm;break;default:a=kl}n=a.bind(null,e,n,t),a=void 0,!ho||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Ps(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;s=s.return}for(;o!==null;){if(s=Pn(o),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}o=o.parentNode}}r=r.return}Nd(function(){var c=i,d=pl(n),h=[];e:{var f=th.get(t);if(f!==void 0){var v=xl,w=t;switch(t){case"keypress":if(li(n)===0)break e;case"keydown":case"keyup":v=dg;break;case"focusin":w="focus",v=xs;break;case"focusout":w="blur",v=xs;break;case"beforeblur":case"afterblur":v=xs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=mg;break;case Xd:case Yd:case Zd:v=ng;break;case eh:v=pg;break;case"scroll":v=Xm;break;case"wheel":v=yg;break;case"copy":case"cut":case"paste":v=ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=_u}var k=(e&4)!==0,x=!k&&t==="scroll",p=k?f!==null?f+"Capture":null:f;k=[];for(var m=c,g;m!==null;){g=m;var E=g.stateNode;if(g.tag===5&&E!==null&&(g=E,p!==null&&(E=ua(m,p),E!=null&&k.push(pa(m,E,g)))),x)break;m=m.return}0<k.length&&(f=new v(f,w,null,n,d),h.push({event:f,listeners:k}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==uo&&(w=n.relatedTarget||n.fromElement)&&(Pn(w)||w[qt]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=c,w=w?Pn(w):null,w!==null&&(x=Bn(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(k=xu,E="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(k=_u,E="onPointerLeave",p="onPointerEnter",m="pointer"),x=v==null?f:nr(v),g=w==null?f:nr(w),f=new k(E,m+"leave",v,n,d),f.target=x,f.relatedTarget=g,E=null,Pn(d)===c&&(k=new k(p,m+"enter",w,n,d),k.target=g,k.relatedTarget=x,E=k),x=E,v&&w)t:{for(k=v,p=w,m=0,g=k;g;g=qn(g))m++;for(g=0,E=p;E;E=qn(E))g++;for(;0<m-g;)k=qn(k),m--;for(;0<g-m;)p=qn(p),g--;for(;m--;){if(k===p||p!==null&&k===p.alternate)break t;k=qn(k),p=qn(p)}k=null}else k=null;v!==null&&Lu(h,f,v,k,!1),w!==null&&x!==null&&Lu(h,x,w,k,!0)}}e:{if(f=c?nr(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var _=Sg;else if(Cu(f))if(Vd)_=Pg;else{_=Cg;var C=Ng}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Tg);if(_&&(_=_(t,c))){Hd(h,_,n,d);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&ao(f,"number",f.value)}switch(C=c?nr(c):window,t){case"focusin":(Cu(C)||C.contentEditable==="true")&&(er=C,vo=c,Zr=null);break;case"focusout":Zr=vo=er=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,Au(h,n,d);break;case"selectionchange":if(Ag)break;case"keydown":case"keyup":Au(h,n,d)}var P;if(_l)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Zn?qd(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Fd&&n.locale!=="ko"&&(Zn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Zn&&(P=Bd()):(nn=d,bl="value"in nn?nn.value:nn.textContent,Zn=!0)),C=Ei(c,A),0<C.length&&(A=new Eu(A,t,null,n,d),h.push({event:A,listeners:C}),P?A.data=P:(P=Wd(n),P!==null&&(A.data=P)))),(P=kg?bg(t,n):xg(t,n))&&(c=Ei(c,"onBeforeInput"),0<c.length&&(d=new Eu("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=P))}nh(h,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ei(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ua(t,n),i!=null&&r.unshift(pa(t,i,a)),i=ua(t,e),i!=null&&r.push(pa(t,i,a))),t=t.return}return r}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lu(t,e,n,r,a){for(var i=e._reactName,s=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,a?(u=ua(n,i),u!=null&&s.unshift(pa(n,u,o))):a||(u=ua(n,i),u!=null&&s.push(pa(n,u,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var $g=/\r\n?/g,Ug=/\u0000|\uFFFD/g;function $u(t){return(typeof t=="string"?t:""+t).replace($g,`
`).replace(Ug,"")}function Ga(t,e,n){if(e=$u(e),$u(t)!==e&&n)throw Error($(425))}function _i(){}var wo=null,ko=null;function bo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xo=typeof setTimeout=="function"?setTimeout:void 0,Dg=typeof clearTimeout=="function"?clearTimeout:void 0,Uu=typeof Promise=="function"?Promise:void 0,Mg=typeof queueMicrotask=="function"?queueMicrotask:typeof Uu<"u"?function(t){return Uu.resolve(null).then(t).catch(zg)}:xo;function zg(t){setTimeout(function(){throw t})}function Os(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);ha(e)}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Du(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Tr,va="__reactProps$"+Tr,qt="__reactContainer$"+Tr,Eo="__reactEvents$"+Tr,Bg="__reactListeners$"+Tr,Fg="__reactHandles$"+Tr;function Pn(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qt]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Du(t);t!==null;){if(n=t[jt])return n;t=Du(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){return t=t[jt]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Ji(t){return t[va]||null}var _o=[],rr=-1;function yn(t){return{current:t}}function ce(t){0>rr||(t.current=_o[rr],_o[rr]=null,rr--)}function le(t,e){rr++,_o[rr]=t.current,t.current=e}var pn={},Be=yn(pn),Ze=yn(!1),Ln=pn;function vr(t,e){var n=t.type.contextTypes;if(!n)return pn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function et(t){return t=t.childContextTypes,t!=null}function Si(){ce(Ze),ce(Be)}function Mu(t,e,n){if(Be.current!==pn)throw Error($(168));le(Be,e),le(Ze,n)}function ah(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error($(108,Nm(t)||"Unknown",a));return me({},n,r)}function Ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pn,Ln=Be.current,le(Be,t),le(Ze,Ze.current),!0}function zu(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=ah(t,e,Ln),r.__reactInternalMemoizedMergedChildContext=t,ce(Ze),ce(Be),le(Be,t)):ce(Ze),le(Ze,n)}var Dt=null,Qi=!1,js=!1;function ih(t){Dt===null?Dt=[t]:Dt.push(t)}function qg(t){Qi=!0,ih(t)}function wn(){if(!js&&Dt!==null){js=!0;var t=0,e=ae;try{var n=Dt;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dt=null,Qi=!1}catch(a){throw Dt!==null&&(Dt=Dt.slice(t+1)),Od(vl,wn),a}finally{ae=e,js=!1}}return null}var ar=[],ir=0,Ci=null,Ti=0,ct=[],dt=0,$n=null,Mt=1,zt="";function Sn(t,e){ar[ir++]=Ti,ar[ir++]=Ci,Ci=t,Ti=e}function sh(t,e,n){ct[dt++]=Mt,ct[dt++]=zt,ct[dt++]=$n,$n=t;var r=Mt;t=zt;var a=32-xt(r)-1;r&=~(1<<a),n+=1;var i=32-xt(e)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Mt=1<<32-xt(e)+a|n<<a|r,zt=i+t}else Mt=1<<i|n<<a|r,zt=t}function Nl(t){t.return!==null&&(Sn(t,1),sh(t,1,0))}function Cl(t){for(;t===Ci;)Ci=ar[--ir],ar[ir]=null,Ti=ar[--ir],ar[ir]=null;for(;t===$n;)$n=ct[--dt],ct[dt]=null,zt=ct[--dt],ct[dt]=null,Mt=ct[--dt],ct[dt]=null}var it=null,at=null,de=!1,bt=null;function oh(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,at=un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$n!==null?{id:Mt,overflow:zt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,at=null,!0):!1;default:return!1}}function So(t){return(t.mode&1)!==0&&(t.flags&128)===0}function No(t){if(de){var e=at;if(e){var n=e;if(!Bu(t,e)){if(So(t))throw Error($(418));e=un(n.nextSibling);var r=it;e&&Bu(t,e)?oh(r,n):(t.flags=t.flags&-4097|2,de=!1,it=t)}}else{if(So(t))throw Error($(418));t.flags=t.flags&-4097|2,de=!1,it=t}}}function Fu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function Ja(t){if(t!==it)return!1;if(!de)return Fu(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bo(t.type,t.memoizedProps)),e&&(e=at)){if(So(t))throw lh(),Error($(418));for(;e;)oh(t,e),e=un(e.nextSibling)}if(Fu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=it?un(t.stateNode.nextSibling):null;return!0}function lh(){for(var t=at;t;)t=un(t.nextSibling)}function yr(){at=it=null,de=!1}function Tl(t){bt===null?bt=[t]:bt.push(t)}var Wg=Vt.ReactCurrentBatchConfig;function Mr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=a.refs;s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Qa(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qu(t){var e=t._init;return e(t._payload)}function uh(t){function e(p,m){if(t){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=fn(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,m,g,E){return m===null||m.tag!==6?(m=Ds(g,p.mode,E),m.return=p,m):(m=a(m,g),m.return=p,m)}function u(p,m,g,E){var _=g.type;return _===Yn?d(p,m,g.props.children,E,g.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&qu(_)===m.type)?(E=a(m,g.props),E.ref=Mr(p,m,g),E.return=p,E):(E=gi(g.type,g.key,g.props,null,p.mode,E),E.ref=Mr(p,m,g),E.return=p,E)}function c(p,m,g,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Ms(g,p.mode,E),m.return=p,m):(m=a(m,g.children||[]),m.return=p,m)}function d(p,m,g,E,_){return m===null||m.tag!==7?(m=Rn(g,p.mode,E,_),m.return=p,m):(m=a(m,g),m.return=p,m)}function h(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ds(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ma:return g=gi(m.type,m.key,m.props,null,p.mode,g),g.ref=Mr(p,null,m),g.return=p,g;case Xn:return m=Ms(m,p.mode,g),m.return=p,m;case Xt:var E=m._init;return h(p,E(m._payload),g)}if(Hr(m)||Ir(m))return m=Rn(m,p.mode,g,null),m.return=p,m;Qa(p,m)}return null}function f(p,m,g,E){var _=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return _!==null?null:o(p,m,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ma:return g.key===_?u(p,m,g,E):null;case Xn:return g.key===_?c(p,m,g,E):null;case Xt:return _=g._init,f(p,m,_(g._payload),E)}if(Hr(g)||Ir(g))return _!==null?null:d(p,m,g,E,null);Qa(p,g)}return null}function v(p,m,g,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(g)||null,o(m,p,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ma:return p=p.get(E.key===null?g:E.key)||null,u(m,p,E,_);case Xn:return p=p.get(E.key===null?g:E.key)||null,c(m,p,E,_);case Xt:var C=E._init;return v(p,m,g,C(E._payload),_)}if(Hr(E)||Ir(E))return p=p.get(g)||null,d(m,p,E,_,null);Qa(m,E)}return null}function w(p,m,g,E){for(var _=null,C=null,P=m,A=m=0,O=null;P!==null&&A<g.length;A++){P.index>A?(O=P,P=null):O=P.sibling;var j=f(p,P,g[A],E);if(j===null){P===null&&(P=O);break}t&&P&&j.alternate===null&&e(p,P),m=i(j,m,A),C===null?_=j:C.sibling=j,C=j,P=O}if(A===g.length)return n(p,P),de&&Sn(p,A),_;if(P===null){for(;A<g.length;A++)P=h(p,g[A],E),P!==null&&(m=i(P,m,A),C===null?_=P:C.sibling=P,C=P);return de&&Sn(p,A),_}for(P=r(p,P);A<g.length;A++)O=v(P,p,A,g[A],E),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?A:O.key),m=i(O,m,A),C===null?_=O:C.sibling=O,C=O);return t&&P.forEach(function(D){return e(p,D)}),de&&Sn(p,A),_}function k(p,m,g,E){var _=Ir(g);if(typeof _!="function")throw Error($(150));if(g=_.call(g),g==null)throw Error($(151));for(var C=_=null,P=m,A=m=0,O=null,j=g.next();P!==null&&!j.done;A++,j=g.next()){P.index>A?(O=P,P=null):O=P.sibling;var D=f(p,P,j.value,E);if(D===null){P===null&&(P=O);break}t&&P&&D.alternate===null&&e(p,P),m=i(D,m,A),C===null?_=D:C.sibling=D,C=D,P=O}if(j.done)return n(p,P),de&&Sn(p,A),_;if(P===null){for(;!j.done;A++,j=g.next())j=h(p,j.value,E),j!==null&&(m=i(j,m,A),C===null?_=j:C.sibling=j,C=j);return de&&Sn(p,A),_}for(P=r(p,P);!j.done;A++,j=g.next())j=v(P,p,A,j.value,E),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?A:j.key),m=i(j,m,A),C===null?_=j:C.sibling=j,C=j);return t&&P.forEach(function(F){return e(p,F)}),de&&Sn(p,A),_}function x(p,m,g,E){if(typeof g=="object"&&g!==null&&g.type===Yn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ma:e:{for(var _=g.key,C=m;C!==null;){if(C.key===_){if(_=g.type,_===Yn){if(C.tag===7){n(p,C.sibling),m=a(C,g.props.children),m.return=p,p=m;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&qu(_)===C.type){n(p,C.sibling),m=a(C,g.props),m.ref=Mr(p,C,g),m.return=p,p=m;break e}n(p,C);break}else e(p,C);C=C.sibling}g.type===Yn?(m=Rn(g.props.children,p.mode,E,g.key),m.return=p,p=m):(E=gi(g.type,g.key,g.props,null,p.mode,E),E.ref=Mr(p,m,g),E.return=p,p=E)}return s(p);case Xn:e:{for(C=g.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=a(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=Ms(g,p.mode,E),m.return=p,p=m}return s(p);case Xt:return C=g._init,x(p,m,C(g._payload),E)}if(Hr(g))return w(p,m,g,E);if(Ir(g))return k(p,m,g,E);Qa(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=a(m,g),m.return=p,p=m):(n(p,m),m=Ds(g,p.mode,E),m.return=p,p=m),s(p)):n(p,m)}return x}var wr=uh(!0),ch=uh(!1),Pi=yn(null),Oi=null,sr=null,Pl=null;function Ol(){Pl=sr=Oi=null}function jl(t){var e=Pi.current;ce(Pi),t._currentValue=e}function Co(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mr(t,e){Oi=t,Pl=sr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ye=!0),t.firstContext=null)}function gt(t){var e=t._currentValue;if(Pl!==t)if(t={context:t,memoizedValue:e,next:null},sr===null){if(Oi===null)throw Error($(308));sr=t,Oi.dependencies={lanes:0,firstContext:t}}else sr=sr.next=t;return e}var On=null;function Al(t){On===null?On=[t]:On.push(t)}function dh(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,Al(e)):(n.next=a.next,a.next=n),e.interleaved=n,Wt(t,r)}function Wt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yt=!1;function Rl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Wt(t,n)}return a=r.interleaved,a===null?(e.next=e,Al(r)):(e.next=a.next,a.next=e),r.interleaved=e,Wt(t,n)}function ui(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yl(t,n)}}function Wu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ji(t,e,n,r){var a=t.updateQueue;Yt=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var u=o,c=u.next;u.next=null,s===null?i=c:s.next=c,s=u;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=a.baseState;s=0,d=c=u=null,o=i;do{var f=o.lane,v=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,k=o;switch(f=e,v=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){h=w.call(v,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,f=typeof w=="function"?w.call(v,h,f):w,f==null)break e;h=me({},h,f);break e;case 2:Yt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else v={eventTime:v,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,s|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(u=h),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Dn|=s,t.lanes=s,t.memoizedState=h}}function Hu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error($(191,a));a.call(r)}}}var ja={},Rt=yn(ja),ya=yn(ja),wa=yn(ja);function jn(t){if(t===ja)throw Error($(174));return t}function Il(t,e){switch(le(wa,e),le(ya,t),le(Rt,ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:so(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=so(e,t)}ce(Rt),le(Rt,e)}function kr(){ce(Rt),ce(ya),ce(wa)}function fh(t){jn(wa.current);var e=jn(Rt.current),n=so(e,t.type);e!==n&&(le(ya,t),le(Rt,n))}function Ll(t){ya.current===t&&(ce(Rt),ce(ya))}var he=yn(0);function Ai(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var As=[];function $l(){for(var t=0;t<As.length;t++)As[t]._workInProgressVersionPrimary=null;As.length=0}var ci=Vt.ReactCurrentDispatcher,Rs=Vt.ReactCurrentBatchConfig,Un=0,fe=null,Ee=null,Se=null,Ri=!1,ea=!1,ka=0,Hg=0;function $e(){throw Error($(321))}function Ul(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_t(t[n],e[n]))return!1;return!0}function Dl(t,e,n,r,a,i){if(Un=i,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ci.current=t===null||t.memoizedState===null?Jg:Qg,t=n(r,a),ea){i=0;do{if(ea=!1,ka=0,25<=i)throw Error($(301));i+=1,Se=Ee=null,e.updateQueue=null,ci.current=Xg,t=n(r,a)}while(ea)}if(ci.current=Ii,e=Ee!==null&&Ee.next!==null,Un=0,Se=Ee=fe=null,Ri=!1,e)throw Error($(300));return t}function Ml(){var t=ka!==0;return ka=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?fe.memoizedState=Se=t:Se=Se.next=t,Se}function pt(){if(Ee===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Se===null?fe.memoizedState:Se.next;if(e!==null)Se=e,Ee=t;else{if(t===null)throw Error($(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Se===null?fe.memoizedState=Se=t:Se=Se.next=t}return Se}function ba(t,e){return typeof e=="function"?e(t):e}function Is(t){var e=pt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ee,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=s=null,u=null,c=i;do{var d=c.lane;if((Un&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=h,s=r):u=u.next=h,fe.lanes|=d,Dn|=d}c=c.next}while(c!==null&&c!==i);u===null?s=r:u.next=o,_t(r,e.memoizedState)||(Ye=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,fe.lanes|=i,Dn|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ls(t){var e=pt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);_t(i,e.memoizedState)||(Ye=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mh(){}function gh(t,e){var n=fe,r=pt(),a=e(),i=!_t(r.memoizedState,a);if(i&&(r.memoizedState=a,Ye=!0),r=r.queue,zl(yh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,xa(9,vh.bind(null,n,r,a,e),void 0,null),Ne===null)throw Error($(349));Un&30||ph(n,e,a)}return a}function ph(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vh(t,e,n,r){e.value=n,e.getSnapshot=r,wh(e)&&kh(t)}function yh(t,e,n){return n(function(){wh(e)&&kh(t)})}function wh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_t(t,n)}catch{return!0}}function kh(t){var e=Wt(t,1);e!==null&&Et(e,t,1,-1)}function Vu(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=Gg.bind(null,fe,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bh(){return pt().memoizedState}function di(t,e,n,r){var a=Pt();fe.flags|=t,a.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function Xi(t,e,n,r){var a=pt();r=r===void 0?null:r;var i=void 0;if(Ee!==null){var s=Ee.memoizedState;if(i=s.destroy,r!==null&&Ul(r,s.deps)){a.memoizedState=xa(e,n,i,r);return}}fe.flags|=t,a.memoizedState=xa(1|e,n,i,r)}function Ku(t,e){return di(8390656,8,t,e)}function zl(t,e){return Xi(2048,8,t,e)}function xh(t,e){return Xi(4,2,t,e)}function Eh(t,e){return Xi(4,4,t,e)}function _h(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sh(t,e,n){return n=n!=null?n.concat([t]):null,Xi(4,4,_h.bind(null,e,t),n)}function Bl(){}function Nh(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ul(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ch(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ul(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Th(t,e,n){return Un&21?(_t(n,e)||(n=Rd(),fe.lanes|=n,Dn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ye=!0),t.memoizedState=n)}function Vg(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Rs.transition;Rs.transition={};try{t(!1),e()}finally{ae=n,Rs.transition=r}}function Ph(){return pt().memoizedState}function Kg(t,e,n){var r=hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oh(t))jh(e,n);else if(n=dh(t,e,n,r),n!==null){var a=We();Et(n,t,r,a),Ah(n,e,r)}}function Gg(t,e,n){var r=hn(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oh(t))jh(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,_t(o,s)){var u=e.interleaved;u===null?(a.next=a,Al(e)):(a.next=u.next,u.next=a),e.interleaved=a;return}}catch{}finally{}n=dh(t,e,a,r),n!==null&&(a=We(),Et(n,t,r,a),Ah(n,e,r))}}function Oh(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function jh(t,e){ea=Ri=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ah(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yl(t,n)}}var Ii={readContext:gt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Jg={readContext:gt,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:Ku,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,di(4194308,4,_h.bind(null,e,t),n)},useLayoutEffect:function(t,e){return di(4194308,4,t,e)},useInsertionEffect:function(t,e){return di(4,2,t,e)},useMemo:function(t,e){var n=Pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Kg.bind(null,fe,t),[r.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Vu,useDebugValue:Bl,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Vu(!1),e=t[0];return t=Vg.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fe,a=Pt();if(de){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ne===null)throw Error($(349));Un&30||ph(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,Ku(yh.bind(null,r,i,t),[t]),r.flags|=2048,xa(9,vh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pt(),e=Ne.identifierPrefix;if(de){var n=zt,r=Mt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qg={readContext:gt,useCallback:Nh,useContext:gt,useEffect:zl,useImperativeHandle:Sh,useInsertionEffect:xh,useLayoutEffect:Eh,useMemo:Ch,useReducer:Is,useRef:bh,useState:function(){return Is(ba)},useDebugValue:Bl,useDeferredValue:function(t){var e=pt();return Th(e,Ee.memoizedState,t)},useTransition:function(){var t=Is(ba)[0],e=pt().memoizedState;return[t,e]},useMutableSource:mh,useSyncExternalStore:gh,useId:Ph,unstable_isNewReconciler:!1},Xg={readContext:gt,useCallback:Nh,useContext:gt,useEffect:zl,useImperativeHandle:Sh,useInsertionEffect:xh,useLayoutEffect:Eh,useMemo:Ch,useReducer:Ls,useRef:bh,useState:function(){return Ls(ba)},useDebugValue:Bl,useDeferredValue:function(t){var e=pt();return Ee===null?e.memoizedState=t:Th(e,Ee.memoizedState,t)},useTransition:function(){var t=Ls(ba)[0],e=pt().memoizedState;return[t,e]},useMutableSource:mh,useSyncExternalStore:gh,useId:Ph,unstable_isNewReconciler:!1};function yt(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function To(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yi={isMounted:function(t){return(t=t._reactInternals)?Bn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),a=hn(t),i=Bt(r,a);i.payload=e,n!=null&&(i.callback=n),e=cn(t,i,a),e!==null&&(Et(e,t,a,r),ui(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),a=hn(t),i=Bt(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=cn(t,i,a),e!==null&&(Et(e,t,a,r),ui(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=hn(t),a=Bt(n,r);a.tag=2,e!=null&&(a.callback=e),e=cn(t,a,r),e!==null&&(Et(e,t,r,n),ui(e,t,r))}};function Gu(t,e,n,r,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!ma(n,r)||!ma(a,i):!0}function Rh(t,e,n){var r=!1,a=pn,i=e.contextType;return typeof i=="object"&&i!==null?i=gt(i):(a=et(e)?Ln:Be.current,r=e.contextTypes,i=(r=r!=null)?vr(t,a):pn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ju(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yi.enqueueReplaceState(e,e.state,null)}function Po(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},Rl(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=gt(i):(i=et(e)?Ln:Be.current,a.context=vr(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(To(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Yi.enqueueReplaceState(a,a.state,null),ji(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var n="",r=e;do n+=Sm(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function $s(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yg=typeof WeakMap=="function"?WeakMap:Map;function Ih(t,e,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$i||($i=!0,zo=r),Oo(t,e)},n}function Lh(t,e,n){n=Bt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){Oo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Oo(t,e),typeof r!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Qu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yg;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=hp.bind(null,t,e,n),e.then(t,t))}function Xu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yu(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bt(-1,1),e.tag=2,cn(n,e,1))),n.lanes|=1),t)}var Zg=Vt.ReactCurrentOwner,Ye=!1;function qe(t,e,n,r){e.child=t===null?ch(e,null,n,r):wr(e,t.child,n,r)}function Zu(t,e,n,r,a){n=n.render;var i=e.ref;return mr(e,a),r=Dl(t,e,n,r,i,a),n=Ml(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ht(t,e,a)):(de&&n&&Nl(e),e.flags|=1,qe(t,e,r,a),e.child)}function ec(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!Jl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$h(t,e,i,r,a)):(t=gi(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ma,n(s,r)&&t.ref===e.ref)return Ht(t,e,a)}return e.flags|=1,t=fn(i,r),t.ref=e.ref,t.return=e,e.child=t}function $h(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(ma(i,r)&&t.ref===e.ref)if(Ye=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(Ye=!0);else return e.lanes=t.lanes,Ht(t,e,a)}return jo(t,e,n,r,a)}function Uh(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(lr,rt),rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(lr,rt),rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(lr,rt),rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,le(lr,rt),rt|=r;return qe(t,e,a,n),e.child}function Dh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jo(t,e,n,r,a){var i=et(n)?Ln:Be.current;return i=vr(e,i),mr(e,a),n=Dl(t,e,n,r,i,a),r=Ml(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ht(t,e,a)):(de&&r&&Nl(e),e.flags|=1,qe(t,e,n,a),e.child)}function tc(t,e,n,r,a){if(et(n)){var i=!0;Ni(e)}else i=!1;if(mr(e,a),e.stateNode===null)hi(t,e),Rh(e,n,r),Po(e,n,r,a),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=gt(c):(c=et(n)?Ln:Be.current,c=vr(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||u!==c)&&Ju(e,s,r,c),Yt=!1;var f=e.memoizedState;s.state=f,ji(e,r,s,a),u=e.memoizedState,o!==r||f!==u||Ze.current||Yt?(typeof d=="function"&&(To(e,n,d,r),u=e.memoizedState),(o=Yt||Gu(e,n,o,r,f,u,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,hh(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:yt(e.type,o),s.props=c,h=e.pendingProps,f=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=gt(u):(u=et(n)?Ln:Be.current,u=vr(e,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==h||f!==u)&&Ju(e,s,r,u),Yt=!1,f=e.memoizedState,s.state=f,ji(e,r,s,a);var w=e.memoizedState;o!==h||f!==w||Ze.current||Yt?(typeof v=="function"&&(To(e,n,v,r),w=e.memoizedState),(c=Yt||Gu(e,n,c,r,f,w,u)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ao(t,e,n,r,i,a)}function Ao(t,e,n,r,a,i){Dh(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return a&&zu(e,n,!1),Ht(t,e,i);r=e.stateNode,Zg.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=wr(e,t.child,null,i),e.child=wr(e,null,o,i)):qe(t,e,o,i),e.memoizedState=r.state,a&&zu(e,n,!0),e.child}function Mh(t){var e=t.stateNode;e.pendingContext?Mu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mu(t,e.context,!1),Il(t,e.containerInfo)}function nc(t,e,n,r,a){return yr(),Tl(a),e.flags|=256,qe(t,e,n,r),e.child}var Ro={dehydrated:null,treeContext:null,retryLane:0};function Io(t){return{baseLanes:t,cachePool:null,transitions:null}}function zh(t,e,n){var r=e.pendingProps,a=he.current,i=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),le(he,a&1),t===null)return No(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ts(s,r,0,null),t=Rn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Io(n),e.memoizedState=Ro,t):Fl(e,s));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return ep(t,e,s,r,o,a,n);if(i){i=r.fallback,s=e.mode,a=t.child,o=a.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=fn(a,u),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=fn(o,i):(i=Rn(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Io(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Ro,r}return i=t.child,t=i.sibling,r=fn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fl(t,e){return e=ts({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xa(t,e,n,r){return r!==null&&Tl(r),wr(e,t.child,null,n),t=Fl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ep(t,e,n,r,a,i,s){if(n)return e.flags&256?(e.flags&=-257,r=$s(Error($(422))),Xa(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=ts({mode:"visible",children:r.children},a,0,null),i=Rn(i,a,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wr(e,t.child,null,s),e.child.memoizedState=Io(s),e.memoizedState=Ro,i);if(!(e.mode&1))return Xa(t,e,s,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error($(419)),r=$s(i,r,void 0),Xa(t,e,s,r)}if(o=(s&t.childLanes)!==0,Ye||o){if(r=Ne,r!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Wt(t,a),Et(r,t,a,-1))}return Gl(),r=$s(Error($(421))),Xa(t,e,s,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=fp.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,at=un(a.nextSibling),it=e,de=!0,bt=null,t!==null&&(ct[dt++]=Mt,ct[dt++]=zt,ct[dt++]=$n,Mt=t.id,zt=t.overflow,$n=e),e=Fl(e,r.children),e.flags|=4096,e)}function rc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Co(t.return,e,n)}function Us(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Bh(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(qe(t,e,r.children,n),r=he.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rc(t,n,e);else if(t.tag===19)rc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(he,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Ai(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Us(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Ai(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Us(e,!0,n,null,i);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tp(t,e,n){switch(e.tag){case 3:Mh(e),yr();break;case 5:fh(e);break;case 1:et(e.type)&&Ni(e);break;case 4:Il(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;le(Pi,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?zh(t,e,n):(le(he,he.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);le(he,he.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bh(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),le(he,he.current),r)break;return null;case 22:case 23:return e.lanes=0,Uh(t,e,n)}return Ht(t,e,n)}var Fh,Lo,qh,Wh;Fh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lo=function(){};qh=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,jn(Rt.current);var i=null;switch(n){case"input":a=no(t,a),r=no(t,r),i=[];break;case"select":a=me({},a,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":a=io(t,a),r=io(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_i)}oo(n,r);var s;n=null;for(c in a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(oa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(o=a!=null?a[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(oa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ue("scroll",t),i||o===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Wh=function(t,e,n,r){n!==r&&(e.flags|=4)};function zr(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function np(t,e,n){var r=e.pendingProps;switch(Cl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return et(e.type)&&Si(),Ue(e),null;case 3:return r=e.stateNode,kr(),ce(Ze),ce(Be),$l(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bt!==null&&(qo(bt),bt=null))),Lo(t,e),Ue(e),null;case 5:Ll(e);var a=jn(wa.current);if(n=e.type,t!==null&&e.stateNode!=null)qh(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Ue(e),null}if(t=jn(Rt.current),Ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jt]=e,r[va]=i,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(a=0;a<Kr.length;a++)ue(Kr[a],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":hu(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":mu(r,i),ue("invalid",r)}oo(n,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ga(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ga(r.textContent,o,t),a=["children",""+o]):oa.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ue("scroll",r)}switch(n){case"input":za(r),fu(r,i,!0);break;case"textarea":za(r),gu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_i)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[jt]=e,t[va]=r,Fh(t,e,!1,!1),e.stateNode=t;e:{switch(s=lo(n,r),n){case"dialog":ue("cancel",t),ue("close",t),a=r;break;case"iframe":case"object":case"embed":ue("load",t),a=r;break;case"video":case"audio":for(a=0;a<Kr.length;a++)ue(Kr[a],t);a=r;break;case"source":ue("error",t),a=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),a=r;break;case"details":ue("toggle",t),a=r;break;case"input":hu(t,r),a=no(t,r),ue("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=me({},r,{value:void 0}),ue("invalid",t);break;case"textarea":mu(t,r),a=io(t,r),ue("invalid",t);break;default:a=r}oo(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?bd(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wd(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&la(t,u):typeof u=="number"&&la(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ue("scroll",t):u!=null&&hl(t,i,u,s))}switch(n){case"input":za(t),fu(t,r,!1);break;case"textarea":za(t),gu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cr(t,!!r.multiple,i,!1):r.defaultValue!=null&&cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=_i)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)Wh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=jn(wa.current),jn(Rt.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[jt]=e,(i=r.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ga(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=e,e.stateNode=r}return Ue(e),null;case 13:if(ce(he),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&at!==null&&e.mode&1&&!(e.flags&128))lh(),yr(),e.flags|=98560,i=!1;else if(i=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[jt]=e}else yr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),i=!1}else bt!==null&&(qo(bt),bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?_e===0&&(_e=3):Gl())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return kr(),Lo(t,e),t===null&&ga(e.stateNode.containerInfo),Ue(e),null;case 10:return jl(e.type._context),Ue(e),null;case 17:return et(e.type)&&Si(),Ue(e),null;case 19:if(ce(he),i=e.memoizedState,i===null)return Ue(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)zr(i,!1);else{if(_e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ai(t),s!==null){for(e.flags|=128,zr(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(he,he.current&1|2),e.child}t=t.sibling}i.tail!==null&&ye()>xr&&(e.flags|=128,r=!0,zr(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ai(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!de)return Ue(e),null}else 2*ye()-i.renderingStartTime>xr&&n!==1073741824&&(e.flags|=128,r=!0,zr(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ye(),e.sibling=null,n=he.current,le(he,r?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return Kl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rt&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function rp(t,e){switch(Cl(e),e.tag){case 1:return et(e.type)&&Si(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kr(),ce(Ze),ce(Be),$l(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ll(e),null;case 13:if(ce(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));yr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(he),null;case 4:return kr(),null;case 10:return jl(e.type._context),null;case 22:case 23:return Kl(),null;case 24:return null;default:return null}}var Ya=!1,Me=!1,ap=typeof WeakSet=="function"?WeakSet:Set,W=null;function or(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function $o(t,e,n){try{n()}catch(r){pe(t,e,r)}}var ac=!1;function ip(t,e){if(wo=bi,t=Jd(),Sl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,o=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var v;h!==n||a!==0&&h.nodeType!==3||(o=s+a),h!==i||r!==0&&h.nodeType!==3||(u=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===n&&++c===a&&(o=s),f===i&&++d===r&&(u=s),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ko={focusedElem:t,selectionRange:n},bi=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,x=w.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?k:yt(e.type,k),x);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(E){pe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return w=ac,ac=!1,w}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&$o(e,n,i)}a=a.next}while(a!==r)}}function Zi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hh(t){var e=t.alternate;e!==null&&(t.alternate=null,Hh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jt],delete e[va],delete e[Eo],delete e[Bg],delete e[Fg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vh(t){return t.tag===5||t.tag===3||t.tag===4}function ic(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Do(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_i));else if(r!==4&&(t=t.child,t!==null))for(Do(t,e,n),t=t.sibling;t!==null;)Do(t,e,n),t=t.sibling}function Mo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mo(t,e,n),t=t.sibling;t!==null;)Mo(t,e,n),t=t.sibling}var je=null,wt=!1;function Gt(t,e,n){for(n=n.child;n!==null;)Kh(t,e,n),n=n.sibling}function Kh(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Hi,n)}catch{}switch(n.tag){case 5:Me||or(n,e);case 6:var r=je,a=wt;je=null,Gt(t,e,n),je=r,wt=a,je!==null&&(wt?(t=je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(wt?(t=je,n=n.stateNode,t.nodeType===8?Os(t.parentNode,n):t.nodeType===1&&Os(t,n),ha(t)):Os(je,n.stateNode));break;case 4:r=je,a=wt,je=n.stateNode.containerInfo,wt=!0,Gt(t,e,n),je=r,wt=a;break;case 0:case 11:case 14:case 15:if(!Me&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&$o(n,e,s),a=a.next}while(a!==r)}Gt(t,e,n);break;case 1:if(!Me&&(or(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){pe(n,e,o)}Gt(t,e,n);break;case 21:Gt(t,e,n);break;case 22:n.mode&1?(Me=(r=Me)||n.memoizedState!==null,Gt(t,e,n),Me=r):Gt(t,e,n);break;default:Gt(t,e,n)}}function sc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ap),e.forEach(function(r){var a=mp.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:je=o.stateNode,wt=!1;break e;case 3:je=o.stateNode.containerInfo,wt=!0;break e;case 4:je=o.stateNode.containerInfo,wt=!0;break e}o=o.return}if(je===null)throw Error($(160));Kh(i,s,a),je=null,wt=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(c){pe(a,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gh(e,t),e=e.sibling}function Gh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vt(e,t),Nt(t),r&4){try{ta(3,t,t.return),Zi(3,t)}catch(k){pe(t,t.return,k)}try{ta(5,t,t.return)}catch(k){pe(t,t.return,k)}}break;case 1:vt(e,t),Nt(t),r&512&&n!==null&&or(n,n.return);break;case 5:if(vt(e,t),Nt(t),r&512&&n!==null&&or(n,n.return),t.flags&32){var a=t.stateNode;try{la(a,"")}catch(k){pe(t,t.return,k)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&pd(a,i),lo(o,s);var c=lo(o,i);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];d==="style"?bd(a,h):d==="dangerouslySetInnerHTML"?wd(a,h):d==="children"?la(a,h):hl(a,d,h,c)}switch(o){case"input":ro(a,i);break;case"textarea":vd(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?cr(a,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?cr(a,!!i.multiple,i.defaultValue,!0):cr(a,!!i.multiple,i.multiple?[]:"",!1))}a[va]=i}catch(k){pe(t,t.return,k)}}break;case 6:if(vt(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error($(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(k){pe(t,t.return,k)}}break;case 3:if(vt(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ha(e.containerInfo)}catch(k){pe(t,t.return,k)}break;case 4:vt(e,t),Nt(t);break;case 13:vt(e,t),Nt(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Hl=ye())),r&4&&sc(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Me=(c=Me)||d,vt(e,t),Me=c):vt(e,t),Nt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(h=W=d;W!==null;){switch(f=W,v=f.child,f.tag){case 0:case 11:case 14:case 15:ta(4,f,f.return);break;case 1:or(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(k){pe(r,n,k)}}break;case 5:or(f,f.return);break;case 22:if(f.memoizedState!==null){lc(h);continue}}v!==null?(v.return=f,W=v):lc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=kd("display",s))}catch(k){pe(t,t.return,k)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(k){pe(t,t.return,k)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vt(e,t),Nt(t),r&4&&sc(t);break;case 21:break;default:vt(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Vh(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(la(a,""),r.flags&=-33);var i=ic(t);Mo(t,i,a);break;case 3:case 4:var s=r.stateNode.containerInfo,o=ic(t);Do(t,o,s);break;default:throw Error($(161))}}catch(u){pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sp(t,e,n){W=t,Jh(t)}function Jh(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var a=W,i=a.child;if(a.tag===22&&r){var s=a.memoizedState!==null||Ya;if(!s){var o=a.alternate,u=o!==null&&o.memoizedState!==null||Me;o=Ya;var c=Me;if(Ya=s,(Me=u)&&!c)for(W=a;W!==null;)s=W,u=s.child,s.tag===22&&s.memoizedState!==null?uc(a):u!==null?(u.return=s,W=u):uc(a);for(;i!==null;)W=i,Jh(i),i=i.sibling;W=a,Ya=o,Me=c}oc(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,W=i):oc(t)}}function oc(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||Zi(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Me)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:yt(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hu(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hu(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ha(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Me||e.flags&512&&Uo(e)}catch(f){pe(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function lc(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function uc(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zi(4,e)}catch(u){pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(u){pe(e,a,u)}}var i=e.return;try{Uo(e)}catch(u){pe(e,i,u)}break;case 5:var s=e.return;try{Uo(e)}catch(u){pe(e,s,u)}}}catch(u){pe(e,e.return,u)}if(e===t){W=null;break}var o=e.sibling;if(o!==null){o.return=e.return,W=o;break}W=e.return}}var op=Math.ceil,Li=Vt.ReactCurrentDispatcher,ql=Vt.ReactCurrentOwner,ft=Vt.ReactCurrentBatchConfig,te=0,Ne=null,ke=null,Re=0,rt=0,lr=yn(0),_e=0,Ea=null,Dn=0,es=0,Wl=0,na=null,Qe=null,Hl=0,xr=1/0,$t=null,$i=!1,zo=null,dn=null,Za=!1,rn=null,Ui=0,ra=0,Bo=null,fi=-1,mi=0;function We(){return te&6?ye():fi!==-1?fi:fi=ye()}function hn(t){return t.mode&1?te&2&&Re!==0?Re&-Re:Wg.transition!==null?(mi===0&&(mi=Rd()),mi):(t=ae,t!==0||(t=window.event,t=t===void 0?16:zd(t.type)),t):1}function Et(t,e,n,r){if(50<ra)throw ra=0,Bo=null,Error($(185));Ta(t,n,r),(!(te&2)||t!==Ne)&&(t===Ne&&(!(te&2)&&(es|=n),_e===4&&en(t,Re)),tt(t,r),n===1&&te===0&&!(e.mode&1)&&(xr=ye()+500,Qi&&wn()))}function tt(t,e){var n=t.callbackNode;Wm(t,e);var r=ki(t,t===Ne?Re:0);if(r===0)n!==null&&yu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yu(n),e===1)t.tag===0?qg(cc.bind(null,t)):ih(cc.bind(null,t)),Mg(function(){!(te&6)&&wn()}),n=null;else{switch(Id(r)){case 1:n=vl;break;case 4:n=jd;break;case 16:n=wi;break;case 536870912:n=Ad;break;default:n=wi}n=rf(n,Qh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qh(t,e){if(fi=-1,mi=0,te&6)throw Error($(327));var n=t.callbackNode;if(gr()&&t.callbackNode!==n)return null;var r=ki(t,t===Ne?Re:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Di(t,r);else{e=r;var a=te;te|=2;var i=Yh();(Ne!==t||Re!==e)&&($t=null,xr=ye()+500,An(t,e));do try{cp();break}catch(o){Xh(t,o)}while(!0);Ol(),Li.current=i,te=a,ke!==null?e=0:(Ne=null,Re=0,e=_e)}if(e!==0){if(e===2&&(a=mo(t),a!==0&&(r=a,e=Fo(t,a))),e===1)throw n=Ea,An(t,0),en(t,r),tt(t,ye()),n;if(e===6)en(t,r);else{if(a=t.current.alternate,!(r&30)&&!lp(a)&&(e=Di(t,r),e===2&&(i=mo(t),i!==0&&(r=i,e=Fo(t,i))),e===1))throw n=Ea,An(t,0),en(t,r),tt(t,ye()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Nn(t,Qe,$t);break;case 3:if(en(t,r),(r&130023424)===r&&(e=Hl+500-ye(),10<e)){if(ki(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){We(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=xo(Nn.bind(null,t,Qe,$t),e);break}Nn(t,Qe,$t);break;case 4:if(en(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var s=31-xt(r);i=1<<s,s=e[s],s>a&&(a=s),r&=~i}if(r=a,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*op(r/1960))-r,10<r){t.timeoutHandle=xo(Nn.bind(null,t,Qe,$t),r);break}Nn(t,Qe,$t);break;case 5:Nn(t,Qe,$t);break;default:throw Error($(329))}}}return tt(t,ye()),t.callbackNode===n?Qh.bind(null,t):null}function Fo(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(An(t,e).flags|=256),t=Di(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&qo(e)),t}function qo(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function lp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!_t(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~Wl,e&=~es,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xt(e),r=1<<n;t[n]=-1,e&=~r}}function cc(t){if(te&6)throw Error($(327));gr();var e=ki(t,0);if(!(e&1))return tt(t,ye()),null;var n=Di(t,e);if(t.tag!==0&&n===2){var r=mo(t);r!==0&&(e=r,n=Fo(t,r))}if(n===1)throw n=Ea,An(t,0),en(t,e),tt(t,ye()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nn(t,Qe,$t),tt(t,ye()),null}function Vl(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(xr=ye()+500,Qi&&wn())}}function Mn(t){rn!==null&&rn.tag===0&&!(te&6)&&gr();var e=te;te|=1;var n=ft.transition,r=ae;try{if(ft.transition=null,ae=1,t)return t()}finally{ae=r,ft.transition=n,te=e,!(te&6)&&wn()}}function Kl(){rt=lr.current,ce(lr)}function An(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dg(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Cl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Si();break;case 3:kr(),ce(Ze),ce(Be),$l();break;case 5:Ll(r);break;case 4:kr();break;case 13:ce(he);break;case 19:ce(he);break;case 10:jl(r.type._context);break;case 22:case 23:Kl()}n=n.return}if(Ne=t,ke=t=fn(t.current,null),Re=rt=e,_e=0,Ea=null,Wl=es=Dn=0,Qe=na=null,On!==null){for(e=0;e<On.length;e++)if(n=On[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=a,r.next=s}n.pending=r}On=null}return t}function Xh(t,e){do{var n=ke;try{if(Ol(),ci.current=Ii,Ri){for(var r=fe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ri=!1}if(Un=0,Se=Ee=fe=null,ea=!1,ka=0,ql.current=null,n===null||n.return===null){_e=1,Ea=e,ke=null;break}e:{var i=t,s=n.return,o=n,u=e;if(e=Re,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Xu(s);if(v!==null){v.flags&=-257,Yu(v,s,o,i,e),v.mode&1&&Qu(i,c,e),e=v,u=c;var w=e.updateQueue;if(w===null){var k=new Set;k.add(u),e.updateQueue=k}else w.add(u);break e}else{if(!(e&1)){Qu(i,c,e),Gl();break e}u=Error($(426))}}else if(de&&o.mode&1){var x=Xu(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Yu(x,s,o,i,e),Tl(br(u,o));break e}}i=u=br(u,o),_e!==4&&(_e=2),na===null?na=[i]:na.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Ih(i,u,e);Wu(i,p);break e;case 1:o=u;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(dn===null||!dn.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Lh(i,o,e);Wu(i,E);break e}}i=i.return}while(i!==null)}ef(n)}catch(_){e=_,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Yh(){var t=Li.current;return Li.current=Ii,t===null?Ii:t}function Gl(){(_e===0||_e===3||_e===2)&&(_e=4),Ne===null||!(Dn&268435455)&&!(es&268435455)||en(Ne,Re)}function Di(t,e){var n=te;te|=2;var r=Yh();(Ne!==t||Re!==e)&&($t=null,An(t,e));do try{up();break}catch(a){Xh(t,a)}while(!0);if(Ol(),te=n,Li.current=r,ke!==null)throw Error($(261));return Ne=null,Re=0,_e}function up(){for(;ke!==null;)Zh(ke)}function cp(){for(;ke!==null&&!Lm();)Zh(ke)}function Zh(t){var e=nf(t.alternate,t,rt);t.memoizedProps=t.pendingProps,e===null?ef(t):ke=e,ql.current=null}function ef(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rp(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_e=6,ke=null;return}}else if(n=np(n,e,rt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);_e===0&&(_e=5)}function Nn(t,e,n){var r=ae,a=ft.transition;try{ft.transition=null,ae=1,dp(t,e,n,r)}finally{ft.transition=a,ae=r}return null}function dp(t,e,n,r){do gr();while(rn!==null);if(te&6)throw Error($(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Hm(t,i),t===Ne&&(ke=Ne=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,rf(wi,function(){return gr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var s=ae;ae=1;var o=te;te|=4,ql.current=null,ip(t,n),Gh(n,t),jg(ko),bi=!!wo,ko=wo=null,t.current=n,sp(n),$m(),te=o,ae=s,ft.transition=i}else t.current=n;if(Za&&(Za=!1,rn=t,Ui=a),i=t.pendingLanes,i===0&&(dn=null),Mm(n.stateNode),tt(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if($i)throw $i=!1,t=zo,zo=null,t;return Ui&1&&t.tag!==0&&gr(),i=t.pendingLanes,i&1?t===Bo?ra++:(ra=0,Bo=t):ra=0,wn(),null}function gr(){if(rn!==null){var t=Id(Ui),e=ft.transition,n=ae;try{if(ft.transition=null,ae=16>t?16:t,rn===null)var r=!1;else{if(t=rn,rn=null,Ui=0,te&6)throw Error($(331));var a=te;for(te|=4,W=t.current;W!==null;){var i=W,s=i.child;if(W.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(W=c;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:ta(8,d,i)}var h=d.child;if(h!==null)h.return=d,W=h;else for(;W!==null;){d=W;var f=d.sibling,v=d.return;if(Hh(d),d===c){W=null;break}if(f!==null){f.return=v,W=f;break}W=v}}}var w=i.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}W=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,W=s;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,W=p;break e}W=i.return}}var m=t.current;for(W=m;W!==null;){s=W;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,W=g;else e:for(s=m;W!==null;){if(o=W,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Zi(9,o)}}catch(_){pe(o,o.return,_)}if(o===s){W=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,W=E;break e}W=o.return}}if(te=a,wn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Hi,t)}catch{}r=!0}return r}finally{ae=n,ft.transition=e}}return!1}function dc(t,e,n){e=br(n,e),e=Ih(t,e,1),t=cn(t,e,1),e=We(),t!==null&&(Ta(t,1,e),tt(t,e))}function pe(t,e,n){if(t.tag===3)dc(t,t,n);else for(;e!==null;){if(e.tag===3){dc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dn===null||!dn.has(r))){t=br(n,t),t=Lh(e,t,1),e=cn(e,t,1),t=We(),e!==null&&(Ta(e,1,t),tt(e,t));break}}e=e.return}}function hp(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Re&n)===n&&(_e===4||_e===3&&(Re&130023424)===Re&&500>ye()-Hl?An(t,0):Wl|=n),tt(t,e)}function tf(t,e){e===0&&(t.mode&1?(e=qa,qa<<=1,!(qa&130023424)&&(qa=4194304)):e=1);var n=We();t=Wt(t,e),t!==null&&(Ta(t,e,n),tt(t,n))}function fp(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tf(t,n)}function mp(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),tf(t,n)}var nf;nf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Ye=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ye=!1,tp(t,e,n);Ye=!!(t.flags&131072)}else Ye=!1,de&&e.flags&1048576&&sh(e,Ti,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hi(t,e),t=e.pendingProps;var a=vr(e,Be.current);mr(e,n),a=Dl(null,e,r,t,a,n);var i=Ml();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,Ni(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Rl(e),a.updater=Yi,e.stateNode=a,a._reactInternals=e,Po(e,r,t,n),e=Ao(null,e,r,!0,i,n)):(e.tag=0,de&&i&&Nl(e),qe(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hi(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=pp(r),t=yt(r,t),a){case 0:e=jo(null,e,r,t,n);break e;case 1:e=tc(null,e,r,t,n);break e;case 11:e=Zu(null,e,r,t,n);break e;case 14:e=ec(null,e,r,yt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:yt(r,a),jo(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:yt(r,a),tc(t,e,r,a,n);case 3:e:{if(Mh(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,a=i.element,hh(t,e),ji(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=br(Error($(423)),e),e=nc(t,e,r,n,a);break e}else if(r!==a){a=br(Error($(424)),e),e=nc(t,e,r,n,a);break e}else for(at=un(e.stateNode.containerInfo.firstChild),it=e,de=!0,bt=null,n=ch(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yr(),r===a){e=Ht(t,e,n);break e}qe(t,e,r,n)}e=e.child}return e;case 5:return fh(e),t===null&&No(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,s=a.children,bo(r,a)?s=null:i!==null&&bo(r,i)&&(e.flags|=32),Dh(t,e),qe(t,e,s,n),e.child;case 6:return t===null&&No(e),null;case 13:return zh(t,e,n);case 4:return Il(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wr(e,null,r,n):qe(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:yt(r,a),Zu(t,e,r,a,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,s=a.value,le(Pi,r._currentValue),r._currentValue=s,i!==null)if(_t(i.value,s)){if(i.children===a.children&&!Ze.current){e=Ht(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Bt(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Co(i.return,n,e),o.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error($(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Co(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}qe(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,mr(e,n),a=gt(a),r=r(a),e.flags|=1,qe(t,e,r,n),e.child;case 14:return r=e.type,a=yt(r,e.pendingProps),a=yt(r.type,a),ec(t,e,r,a,n);case 15:return $h(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:yt(r,a),hi(t,e),e.tag=1,et(r)?(t=!0,Ni(e)):t=!1,mr(e,n),Rh(e,r,a),Po(e,r,a,n),Ao(null,e,r,!0,t,n);case 19:return Bh(t,e,n);case 22:return Uh(t,e,n)}throw Error($(156,e.tag))};function rf(t,e){return Od(t,e)}function gp(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new gp(t,e,n,r)}function Jl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pp(t){if(typeof t=="function")return Jl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ml)return 11;if(t===gl)return 14}return 2}function fn(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gi(t,e,n,r,a,i){var s=2;if(r=t,typeof t=="function")Jl(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Yn:return Rn(n.children,a,i,e);case fl:s=8,a|=8;break;case Ys:return t=ht(12,n,e,a|2),t.elementType=Ys,t.lanes=i,t;case Zs:return t=ht(13,n,e,a),t.elementType=Zs,t.lanes=i,t;case eo:return t=ht(19,n,e,a),t.elementType=eo,t.lanes=i,t;case fd:return ts(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dd:s=10;break e;case hd:s=9;break e;case ml:s=11;break e;case gl:s=14;break e;case Xt:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=ht(s,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function Rn(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function ts(t,e,n,r){return t=ht(22,t,r,e),t.elementType=fd,t.lanes=n,t.stateNode={isHidden:!1},t}function Ds(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function Ms(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vp(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ql(t,e,n,r,a,i,s,o,u){return t=new vp(t,e,n,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rl(i),t}function yp(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function af(t){if(!t)return pn;t=t._reactInternals;e:{if(Bn(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(et(n))return ah(t,n,e)}return e}function sf(t,e,n,r,a,i,s,o,u){return t=Ql(n,r,!0,t,a,i,s,o,u),t.context=af(null),n=t.current,r=We(),a=hn(n),i=Bt(r,a),i.callback=e??null,cn(n,i,a),t.current.lanes=a,Ta(t,a,r),tt(t,r),t}function ns(t,e,n,r){var a=e.current,i=We(),s=hn(a);return n=af(n),e.context===null?e.context=n:e.pendingContext=n,e=Bt(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cn(a,e,s),t!==null&&(Et(t,a,s,i),ui(t,a,s)),s}function Mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xl(t,e){hc(t,e),(t=t.alternate)&&hc(t,e)}function wp(){return null}var of=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yl(t){this._internalRoot=t}rs.prototype.render=Yl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));ns(t,e,null,null)};rs.prototype.unmount=Yl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mn(function(){ns(null,t,null,null)}),e[qt]=null}};function rs(t){this._internalRoot=t}rs.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ud();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&Md(t)}};function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function as(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fc(){}function kp(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var c=Mi(s);i.call(c)}}var s=sf(e,r,t,0,null,!1,!1,"",fc);return t._reactRootContainer=s,t[qt]=s.current,ga(t.nodeType===8?t.parentNode:t),Mn(),s}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var c=Mi(u);o.call(c)}}var u=Ql(t,0,!1,null,null,!1,!1,"",fc);return t._reactRootContainer=u,t[qt]=u.current,ga(t.nodeType===8?t.parentNode:t),Mn(function(){ns(e,u,n,r)}),u}function is(t,e,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var u=Mi(s);o.call(u)}}ns(e,s,t,a)}else s=kp(n,e,t,a,r);return Mi(s)}Ld=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(yl(e,n|1),tt(e,ye()),!(te&6)&&(xr=ye()+500,wn()))}break;case 13:Mn(function(){var r=Wt(t,1);if(r!==null){var a=We();Et(r,t,1,a)}}),Xl(t,1)}};wl=function(t){if(t.tag===13){var e=Wt(t,134217728);if(e!==null){var n=We();Et(e,t,134217728,n)}Xl(t,134217728)}};$d=function(t){if(t.tag===13){var e=hn(t),n=Wt(t,e);if(n!==null){var r=We();Et(n,t,e,r)}Xl(t,e)}};Ud=function(){return ae};Dd=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};co=function(t,e,n){switch(e){case"input":if(ro(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=Ji(r);if(!a)throw Error($(90));gd(r),ro(r,a)}}}break;case"textarea":vd(t,n);break;case"select":e=n.value,e!=null&&cr(t,!!n.multiple,e,!1)}};_d=Vl;Sd=Mn;var bp={usingClientEntryPoint:!1,Events:[Oa,nr,Ji,xd,Ed,Vl]},Br={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xp={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Td(t),t===null?null:t.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||wp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ei.isDisabled&&ei.supportsFiber)try{Hi=ei.inject(xp),At=ei}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bp;ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zl(e))throw Error($(200));return yp(t,e,null,n)};ot.createRoot=function(t,e){if(!Zl(t))throw Error($(299));var n=!1,r="",a=of;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Ql(t,1,!1,null,null,n,!1,r,a),t[qt]=e.current,ga(t.nodeType===8?t.parentNode:t),new Yl(e)};ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Td(e),t=t===null?null:t.stateNode,t};ot.flushSync=function(t){return Mn(t)};ot.hydrate=function(t,e,n){if(!as(e))throw Error($(200));return is(null,t,e,!0,n)};ot.hydrateRoot=function(t,e,n){if(!Zl(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",s=of;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=sf(e,null,t,1,n??null,a,!1,i,s),t[qt]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new rs(e)};ot.render=function(t,e,n){if(!as(e))throw Error($(200));return is(null,t,e,!1,n)};ot.unmountComponentAtNode=function(t){if(!as(t))throw Error($(40));return t._reactRootContainer?(Mn(function(){is(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};ot.unstable_batchedUpdates=Vl;ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!as(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return is(t,e,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function lf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lf)}catch(t){console.error(t)}}lf(),od.exports=ot;var Ep=od.exports,uf,mc=Ep;uf=mc.createRoot,mc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_a.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const gc="popstate";function _p(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:s,hash:o}=r.location;return Wo("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:zi(a)}return Np(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sp(){return Math.random().toString(36).substr(2,8)}function pc(t,e){return{usr:t.state,key:t.key,idx:e}}function Wo(t,e,n,r){return n===void 0&&(n=null),_a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pr(e):e,{state:n,key:e&&e.key||r||Sp()})}function zi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Np(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o=an.Pop,u=null,c=d();c==null&&(c=0,s.replaceState(_a({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function h(){o=an.Pop;let x=d(),p=x==null?null:x-c;c=x,u&&u({action:o,location:k.location,delta:p})}function f(x,p){o=an.Push;let m=Wo(k.location,x,p);c=d()+1;let g=pc(m,c),E=k.createHref(m);try{s.pushState(g,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(E)}i&&u&&u({action:o,location:k.location,delta:1})}function v(x,p){o=an.Replace;let m=Wo(k.location,x,p);c=d();let g=pc(m,c),E=k.createHref(m);s.replaceState(g,"",E),i&&u&&u({action:o,location:k.location,delta:0})}function w(x){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof x=="string"?x:zi(x);return m=m.replace(/ $/,"%20"),ve(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let k={get action(){return o},get location(){return t(a,s)},listen(x){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(gc,h),u=x,()=>{a.removeEventListener(gc,h),u=null}},createHref(x){return e(a,x)},createURL:w,encodeLocation(x){let p=w(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(x){return s.go(x)}};return k}var vc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vc||(vc={}));function Cp(t,e,n){return n===void 0&&(n="/"),Tp(t,e,n)}function Tp(t,e,n,r){let a=typeof e=="string"?Pr(e):e,i=Er(a.pathname||"/",n);if(i==null)return null;let s=df(t);Pp(s);let o=null;for(let u=0;o==null&&u<s.length;++u){let c=zp(i);o=Dp(s[u],c)}return o}function df(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,s,o)=>{let u={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};u.relativePath.startsWith("/")&&(ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=mn([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),df(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:$p(c,i.index),routesMeta:d})};return t.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let u of hf(i.path))a(i,s,u)}),e}function hf(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let s=hf(r.join("/")),o=[];return o.push(...s.map(u=>u===""?i:[i,u].join("/"))),a&&o.push(...s),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function Pp(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Up(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Op=/^:[\w-]+$/,jp=3,Ap=2,Rp=1,Ip=10,Lp=-2,yc=t=>t==="*";function $p(t,e){let n=t.split("/"),r=n.length;return n.some(yc)&&(r+=Lp),e&&(r+=Ap),n.filter(a=>!yc(a)).reduce((a,i)=>a+(Op.test(i)?jp:i===""?Rp:Ip),r)}function Up(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function Dp(t,e,n){let{routesMeta:r}=t,a={},i="/",s=[];for(let o=0;o<r.length;++o){let u=r[o],c=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Ho({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h)return null;Object.assign(a,h.params),s.push({params:a,pathname:mn([i,h.pathname]),pathnameBase:Wp(mn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=mn([i,h.pathnameBase]))}return s}function Ho(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mp(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:v}=d;if(f==="*"){let k=o[h]||"";s=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const w=o[h];return v&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:s,pattern:t}}function Mp(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function zp(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Er(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Bp(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Pr(t):t;return{pathname:n?n.startsWith("/")?n:Fp(n,e):e,search:Hp(r),hash:Vp(a)}}function Fp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function zs(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qp(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ff(t,e){let n=qp(t);return e?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function mf(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Pr(t):(a=_a({},t),ve(!a.pathname||!a.pathname.includes("?"),zs("?","pathname","search",a)),ve(!a.pathname||!a.pathname.includes("#"),zs("#","pathname","hash",a)),ve(!a.search||!a.search.includes("#"),zs("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}o=h>=0?e[h]:"/"}let u=Bp(a,o),c=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const mn=t=>t.join("/").replace(/\/\/+/g,"/"),Wp=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hp=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vp=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Kp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gf=["post","put","patch","delete"];new Set(gf);const Gp=["get",...gf];new Set(Gp);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sa.apply(this,arguments)}const ss=y.createContext(null),pf=y.createContext(null),kn=y.createContext(null),os=y.createContext(null),Kt=y.createContext({outlet:null,matches:[],isDataRoute:!1}),vf=y.createContext(null);function Jp(t,e){let{relative:n}=e===void 0?{}:e;Aa()||ve(!1);let{basename:r,navigator:a}=y.useContext(kn),{hash:i,pathname:s,search:o}=ls(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:mn([r,s])),a.createHref({pathname:u,search:o,hash:i})}function Aa(){return y.useContext(os)!=null}function Ra(){return Aa()||ve(!1),y.useContext(os).location}function yf(t){y.useContext(kn).static||y.useLayoutEffect(t)}function Or(){let{isDataRoute:t}=y.useContext(Kt);return t?d0():Qp()}function Qp(){Aa()||ve(!1);let t=y.useContext(ss),{basename:e,future:n,navigator:r}=y.useContext(kn),{matches:a}=y.useContext(Kt),{pathname:i}=Ra(),s=JSON.stringify(ff(a,n.v7_relativeSplatPath)),o=y.useRef(!1);return yf(()=>{o.current=!0}),y.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=mf(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,s,i,t])}const Xp=y.createContext(null);function Yp(t){let e=y.useContext(Kt).outlet;return e&&y.createElement(Xp.Provider,{value:t},e)}function Zp(){let{matches:t}=y.useContext(Kt),e=t[t.length-1];return e?e.params:{}}function ls(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(kn),{matches:a}=y.useContext(Kt),{pathname:i}=Ra(),s=JSON.stringify(ff(a,r.v7_relativeSplatPath));return y.useMemo(()=>mf(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function e0(t,e){return t0(t,e)}function t0(t,e,n,r){Aa()||ve(!1);let{navigator:a}=y.useContext(kn),{matches:i}=y.useContext(Kt),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=Ra(),d;if(e){var h;let x=typeof e=="string"?Pr(e):e;u==="/"||(h=x.pathname)!=null&&h.startsWith(u)||ve(!1),d=x}else d=c;let f=d.pathname||"/",v=f;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let w=Cp(t,{pathname:v}),k=s0(w&&w.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:mn([u,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:mn([u,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&k?y.createElement(os.Provider,{value:{location:Sa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:an.Pop}},k):k}function n0(){let t=c0(),e=Kp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:a},n):null,null)}const r0=y.createElement(n0,null);class a0 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Kt.Provider,{value:this.props.routeContext},y.createElement(vf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i0(t){let{routeContext:e,match:n,children:r}=t,a=y.useContext(ss);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Kt.Provider,{value:e},r)}function s0(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(a=n)==null?void 0:a.errors;if(o!=null){let d=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||ve(!1),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:v}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,h,f)=>{let v,w=!1,k=null,x=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,k=h.route.errorElement||r0,u&&(c<0&&f===0?(h0("route-fallback"),w=!0,x=null):c===f&&(w=!0,x=h.route.hydrateFallbackElement||null)));let p=e.concat(s.slice(0,f+1)),m=()=>{let g;return v?g=k:w?g=x:h.route.Component?g=y.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,y.createElement(i0,{match:h,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(a0,{location:n.location,revalidation:n.revalidation,component:k,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var wf=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wf||{}),kf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kf||{});function o0(t){let e=y.useContext(ss);return e||ve(!1),e}function l0(t){let e=y.useContext(pf);return e||ve(!1),e}function u0(t){let e=y.useContext(Kt);return e||ve(!1),e}function bf(t){let e=u0(),n=e.matches[e.matches.length-1];return n.route.id||ve(!1),n.route.id}function c0(){var t;let e=y.useContext(vf),n=l0(),r=bf();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function d0(){let{router:t}=o0(wf.UseNavigateStable),e=bf(kf.UseNavigateStable),n=y.useRef(!1);return yf(()=>{n.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Sa({fromRouteId:e},i)))},[t,e])}const wc={};function h0(t,e,n){wc[t]||(wc[t]=!0)}function f0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function m0(t){return Yp(t.context)}function Ct(t){ve(!1)}function g0(t){let{basename:e="/",children:n=null,location:r,navigationType:a=an.Pop,navigator:i,static:s=!1,future:o}=t;Aa()&&ve(!1);let u=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:u,navigator:i,static:s,future:Sa({v7_relativeSplatPath:!1},o)}),[u,o,i,s]);typeof r=="string"&&(r=Pr(r));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:w="default"}=r,k=y.useMemo(()=>{let x=Er(d,u);return x==null?null:{location:{pathname:x,search:h,hash:f,state:v,key:w},navigationType:a}},[u,d,h,f,v,w,a]);return k==null?null:y.createElement(kn.Provider,{value:c},y.createElement(os.Provider,{children:n,value:k}))}function p0(t){let{children:e,location:n}=t;return e0(Vo(e),n)}new Promise(()=>{});function Vo(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,a)=>{if(!y.isValidElement(r))return;let i=[...e,a];if(r.type===y.Fragment){n.push.apply(n,Vo(r.props.children,i));return}r.type!==Ct&&ve(!1),!r.props.index||!r.props.children||ve(!1);let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Vo(r.props.children,i)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bi(){return Bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bi.apply(this,arguments)}function xf(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function v0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function y0(t,e){return t.button===0&&(!e||e==="_self")&&!v0(t)}const w0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],k0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],b0="6";try{window.__reactRouterVersion=b0}catch{}const x0=y.createContext({isTransitioning:!1}),E0="startTransition",kc=ym[E0];function _0(t){let{basename:e,children:n,future:r,window:a}=t,i=y.useRef();i.current==null&&(i.current=_p({window:a,v5Compat:!0}));let s=i.current,[o,u]=y.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},d=y.useCallback(h=>{c&&kc?kc(()=>u(h)):u(h)},[u,c]);return y.useLayoutEffect(()=>s.listen(d),[s,d]),y.useEffect(()=>f0(r),[r]),y.createElement(g0,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const S0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=y.forwardRef(function(e,n){let{onClick:r,relative:a,reloadDocument:i,replace:s,state:o,target:u,to:c,preventScrollReset:d,viewTransition:h}=e,f=xf(e,w0),{basename:v}=y.useContext(kn),w,k=!1;if(typeof c=="string"&&N0.test(c)&&(w=c,S0))try{let g=new URL(window.location.href),E=c.startsWith("//")?new URL(g.protocol+c):new URL(c),_=Er(E.pathname,v);E.origin===g.origin&&_!=null?c=_+E.search+E.hash:k=!0}catch{}let x=Jp(c,{relative:a}),p=T0(c,{replace:s,state:o,target:u,preventScrollReset:d,relative:a,viewTransition:h});function m(g){r&&r(g),g.defaultPrevented||p(g)}return y.createElement("a",Bi({},f,{href:w||x,onClick:k||i?r:m,ref:n,target:u}))}),xn=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:s=!1,style:o,to:u,viewTransition:c,children:d}=e,h=xf(e,k0),f=ls(u,{relative:h.relative}),v=Ra(),w=y.useContext(pf),{navigator:k,basename:x}=y.useContext(kn),p=w!=null&&P0(f)&&c===!0,m=k.encodeLocation?k.encodeLocation(f).pathname:f.pathname,g=v.pathname,E=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(g=g.toLowerCase(),E=E?E.toLowerCase():null,m=m.toLowerCase()),E&&x&&(E=Er(E,x)||E);const _=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let C=g===m||!s&&g.startsWith(m)&&g.charAt(_)==="/",P=E!=null&&(E===m||!s&&E.startsWith(m)&&E.charAt(m.length)==="/"),A={isActive:C,isPending:P,isTransitioning:p},O=C?r:void 0,j;typeof i=="function"?j=i(A):j=[i,C?"active":null,P?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(A):o;return y.createElement(In,Bi({},h,{"aria-current":O,className:j,ref:n,style:D,to:u,viewTransition:c}),typeof d=="function"?d(A):d)});var Ko;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ko||(Ko={}));var bc;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bc||(bc={}));function C0(t){let e=y.useContext(ss);return e||ve(!1),e}function T0(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:s,viewTransition:o}=e===void 0?{}:e,u=Or(),c=Ra(),d=ls(t,{relative:s});return y.useCallback(h=>{if(y0(h,n)){h.preventDefault();let f=r!==void 0?r:zi(c)===zi(d);u(t,{replace:f,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,u,d,r,a,n,t,i,s,o])}function P0(t,e){e===void 0&&(e={});let n=y.useContext(x0);n==null&&ve(!1);let{basename:r}=C0(Ko.useViewTransitionState),a=ls(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Er(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Er(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ho(a.pathname,s)!=null||Ho(a.pathname,i)!=null}function O0(){const[t,e]=y.useState(()=>typeof window>"u"?!0:localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches);return y.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme",t?"dark":"light")},[t]),{dark:t,toggle:()=>e(n=>!n)}}const j0="modulepreload",A0=function(t){return"/"+t},xc={},Ia=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(n.map(u=>{if(u=A0(u),u in xc)return;xc[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":j0,c||(h.as="script"),h.crossOrigin="",h.href=u,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},R0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ia(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class eu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Ec extends eu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _c extends eu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sc extends eu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Go;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Go||(Go={}));var I0=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class L0{constructor(e,{headers:n={},customFetch:r,region:a=Go.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=R0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return I0(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:s,signal:o}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;s&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=s):typeof s=="string"?(u["Content-Type"]="text/plain",h=s):typeof FormData<"u"&&s instanceof FormData?h=s:(u["Content-Type"]="application/json",h=JSON.stringify(s)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:h,signal:o}).catch(x=>{throw x.name==="AbortError"?x:new Ec(x)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new _c(f);if(!f.ok)throw new Sc(f);let w=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return w==="application/json"?k=yield f.json():w==="application/octet-stream"?k=yield f.blob():w==="text/event-stream"?k=f:w==="multipart/form-data"?k=yield f.formData():k=yield f.text(),{data:k,error:null,response:f}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Ec(a)}:{data:null,error:a,response:a instanceof Sc||a instanceof _c?a.context:void 0}}})}}var Xe={},tu={},us={},La={},cs={},ds={},$0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_r=$0();const U0=_r.fetch,Ef=_r.fetch.bind(_r),_f=_r.Headers,D0=_r.Request,M0=_r.Response,jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:_f,Request:D0,Response:M0,default:Ef,fetch:U0},Symbol.toStringTag,{value:"Module"})),z0=nm(jr);var hs={};Object.defineProperty(hs,"__esModule",{value:!0});let B0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};hs.default=B0;var Sf=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ds,"__esModule",{value:!0});const F0=Sf(z0),q0=Sf(hs);let W0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=F0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var s,o,u,c;let d=null,h=null,f=null,v=i.status,w=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const x=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");x&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,v=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await i.text();try{d=JSON.parse(x),Array.isArray(d)&&i.status===404&&(h=[],d=null,v=200,w="OK")}catch{i.status===404&&x===""?(v=204,w="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,v=200,w="OK"),d&&this.shouldThrowOnError)throw new q0.default(d)}return{error:d,data:h,count:f,status:v,statusText:w}});return this.shouldThrowOnError||(a=a.catch(i=>{var s,o,u;return{error:{message:`${(s=i==null?void 0:i.name)!==null&&s!==void 0?s:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}};ds.default=W0;var H0=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cs,"__esModule",{value:!0});const V0=H0(ds);let K0=class extends V0.default{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:s="text"}={}){var o;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${u};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};cs.default=K0;var G0=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(La,"__esModule",{value:!0});const J0=G0(cs);let Q0=class extends J0.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};La.default=Q0;var X0=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(us,"__esModule",{value:!0});const Fr=X0(La);let Y0=class{constructor(e,{headers:n={},schema:r,fetch:a}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(e,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const s=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),r&&this.headers.append("Prefer",`count=${r}`),new Fr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((o,u)=>o.concat(Object.keys(u)),[]);if(s.length>0){const o=[...new Set(s)].map(u=>`"${u}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Fr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};us.default=Y0;var Nf=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tu,"__esModule",{value:!0});const Z0=Nf(us),ev=Nf(La);let tv=class Cf{constructor(e,{headers:n={},schema:r,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Z0.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:a=!1,count:i}={}){var s;let o;const u=new URL(`${this.url}/rpc/${e}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(o="POST",c=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new ev.default({method:o,url:u,headers:d,schema:this.schemaName,body:c,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};tu.default=tv;var Ar=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PostgrestError=Xe.PostgrestBuilder=Xe.PostgrestTransformBuilder=Xe.PostgrestFilterBuilder=Xe.PostgrestQueryBuilder=Xe.PostgrestClient=void 0;const Tf=Ar(tu);Xe.PostgrestClient=Tf.default;const Pf=Ar(us);Xe.PostgrestQueryBuilder=Pf.default;const Of=Ar(La);Xe.PostgrestFilterBuilder=Of.default;const jf=Ar(cs);Xe.PostgrestTransformBuilder=jf.default;const Af=Ar(ds);Xe.PostgrestBuilder=Af.default;const Rf=Ar(hs);Xe.PostgrestError=Rf.default;var nv=Xe.default={PostgrestClient:Tf.default,PostgrestQueryBuilder:Pf.default,PostgrestFilterBuilder:Of.default,PostgrestTransformBuilder:jf.default,PostgrestBuilder:Af.default,PostgrestError:Rf.default};const{PostgrestClient:rv,PostgrestQueryBuilder:$w,PostgrestFilterBuilder:Uw,PostgrestTransformBuilder:Dw,PostgrestBuilder:Mw,PostgrestError:zw}=nv;class av{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const iv="2.15.5",sv=`realtime-js/${iv}`,ov="1.0.0",Jo=1e4,lv=1e3,uv=100;var aa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(aa||(aa={}));var xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xe||(xe={}));var kt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kt||(kt={}));var Qo;(function(t){t.websocket="websocket"})(Qo||(Qo={}));var Tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Tn||(Tn={}));class cv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const a=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const o=r.decode(e.slice(s,s+a));s=s+a;const u=r.decode(e.slice(s,s+i));s=s+i;const c=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:o,event:u,payload:c}}}class If{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const Nc=(t,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,s)=>(i[s]=dv(s,t,e,a),i),{})},dv=(t,e,n,r)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,s=n[t];return i&&!r.includes(i)?Lf(i,s):Xo(s)},Lf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return gv(e,n)}switch(t){case oe.bool:return hv(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return fv(e);case oe.json:case oe.jsonb:return mv(e);case oe.timestamp:return pv(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return Xo(e);default:return Xo(e)}},Xo=t=>t,hv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},mv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gv=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const s=t.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>Lf(e,o))}return t},pv=t=>typeof t=="string"?t.replace(" ","T"):t,$f=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Bs{constructor(e,n,r={},a=Jo){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Cc||(Cc={}));class ia{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ia.syncState(this.state,a,i,s),this.pendingDiffs.forEach(u=>{this.state=ia.syncDiff(this.state,u,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ia.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const i=this.cloneDeep(e),s=this.transformState(n),o={},u={};return this.map(i,(c,d)=>{s[c]||(u[c]=d)}),this.map(s,(c,d)=>{const h=i[c];if(h){const f=d.map(x=>x.presence_ref),v=h.map(x=>x.presence_ref),w=d.filter(x=>v.indexOf(x.presence_ref)<0),k=h.filter(x=>f.indexOf(x.presence_ref)<0);w.length>0&&(o[c]=w),k.length>0&&(u[c]=k)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:u},r,a)}static syncDiff(e,n,r,a){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(o,u)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(u),d.length>0){const h=e[o].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);e[o].unshift(...f)}r(o,d,u)}),this.map(s,(o,u)=>{let c=e[o];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=c,a(o,c,u),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tc||(Tc={}));var sa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(sa||(sa={}));var Ut;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class nu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bs(this,kt.join,this.params,this.timeout),this.rejoinTimer=new If(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new ia(this),this.broadcastEndpointURL=$f(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:s,presence:o,private:u}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[sa.PRESENCE]&&this.bindings[sa.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Ut.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Ut.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket.setAuth(),v===void 0){e==null||e(Ut.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,x=(w=k==null?void 0:k.length)!==null&&w!==void 0?w:0,p=[];for(let m=0;m<x;m++){const g=k[m],{filter:{event:E,schema:_,table:C,filter:P}}=g,A=v&&v[m];if(A&&A.event===E&&A.schema===_&&A.table===C&&A.filter===P)p.push(Object.assign(Object.assign({},g),{id:A.id}));else{this.unsubscribe(),this.state=xe.errored,e==null||e(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ut.SUBSCRIBED);return}}).receive("error",v=>{this.state=xe.errored,e==null||e(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===xe.joined&&e===sa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:s}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Bs(this,kt.leave,{},e),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Bs(this,e,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,i;const s=e.toLocaleLowerCase(),{close:o,error:u,leave:c,join:d}=kt;if(r&&[o,u,c,d].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var w,k,x;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(k=v.filter)===null||k===void 0?void 0:k.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(v=>v.callback(f,r)):(i=this.bindings[s])===null||i===void 0||i.filter(v=>{var w,k,x,p,m,g;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in v){const E=v.id,_=(w=v.filter)===null||w===void 0?void 0:w.event;return E&&((k=n.ids)===null||k===void 0?void 0:k.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const E=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return E==="*"||E===((g=n==null?void 0:n.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===s}).map(v=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:k,table:x,commit_timestamp:p,type:m,errors:g}=w;f=Object.assign(Object.assign({},{schema:k,table:x,commit_timestamp:p,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(w))}v.callback(f,r)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&nu.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kt.close,{},e)}_onError(e){this._on(kt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Nc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Nc(e.columns,e.old_record)),n}}const Fs=()=>{},ti={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vv=[1e3,2e3,5e3,1e4],yv=1e4,wv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jo,this.transport=null,this.heartbeatIntervalMs=ti.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fs,this.ref=0,this.reconnectTimer=null,this.logger=Fs,this.conn=null,this.sendBuffer=[],this.serializer=new cv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...s)=>Ia(async()=>{const{default:o}=await Promise.resolve().then(()=>jr);return{default:o}},void 0).then(({default:o})=>o(...s)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...s)=>i(...s)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Qo.websocket}`,this.httpEndpoint=$f(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=av.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ov}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case aa.connecting:return Tn.Connecting;case aa.open:return Tn.Open;case aa.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new nu(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:a,ref:i}=e,s=()=>{this.encode(e,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(lv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ti.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:s}=n,o=s?`(${s})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${a} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([wv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:sv};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new If(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ti.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,a,i,s,o,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Jo,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:ti.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Fs,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>vv[h-1]||yv,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ru extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function we(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bv extends ru{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yo extends ru{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var xv=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Uf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ia(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ev=()=>xv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ia(()=>Promise.resolve().then(()=>jr),void 0)).Response:Response}),Zo=t=>{if(Array.isArray(t))return t.map(n=>Zo(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Zo(r)}),e},_v=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fn=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const qs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sv=(t,e,n)=>Fn(void 0,void 0,void 0,function*(){const r=yield Ev();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{const i=t.status||500,s=(a==null?void 0:a.statusCode)||i+"";e(new bv(qs(a),i,s))}).catch(a=>{e(new Yo(qs(a),a))}):e(new Yo(qs(t),t))}),Nv=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?a:(_v(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function $a(t,e,n,r,a,i){return Fn(this,void 0,void 0,function*(){return new Promise((s,o)=>{t(n,Nv(e,r,a,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>s(u)).catch(u=>Sv(u,o,r))})})}function Fi(t,e,n,r){return Fn(this,void 0,void 0,function*(){return $a(t,"GET",e,n,r)})}function Ot(t,e,n,r,a){return Fn(this,void 0,void 0,function*(){return $a(t,"POST",e,r,a,n)})}function el(t,e,n,r,a){return Fn(this,void 0,void 0,function*(){return $a(t,"PUT",e,r,a,n)})}function Cv(t,e,n,r){return Fn(this,void 0,void 0,function*(){return $a(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Df(t,e,n,r,a){return Fn(this,void 0,void 0,function*(){return $a(t,"DELETE",e,r,a,n)})}var Tv=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class Pv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Tv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(we(e))return{data:null,error:e};throw e}})}}var Ov=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class jv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new Pv(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return Ov(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(we(e))return{data:null,error:e};throw e}})}}var Je=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Av={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rv{constructor(e,n={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Uf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,a){return Je(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Pc),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const u=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?el:Ot)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return Je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Pc.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield el(this.fetch,o.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(we(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield Ot(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new ru("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r))return{data:null,error:r};throw r}})}update(e,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Je(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}copy(e,n,r){return Je(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return Je(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Ot(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return Je(this,void 0,void 0,function*(){try{const a=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(e),u=()=>Fi(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new jv(u,this.shouldThrowOnError)}info(e){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Fi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zo(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r))return{data:null,error:r};throw r}})}exists(e){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Cv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r)&&r instanceof Yo){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&a.push(u);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return Je(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}list(e,n,r){return Je(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Av),n),{prefix:e||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}listV2(e,n){return Je(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Iv="2.12.2",Lv={"X-Client-Info":`storage-js/${Iv}`};var Wn=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class $v{constructor(e,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Lv),n),this.fetch=Uf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Wn(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(we(e))return{data:null,error:e};throw e}})}getBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Wn(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(we(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Df(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}}class Uv extends $v{constructor(e,n={},r,a){super(e,n,r,a)}from(e){return new Rv(this.url,this.headers,e,this.fetch)}}const Dv="2.58.0";let Gr="";typeof Deno<"u"?Gr="deno":typeof document<"u"?Gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gr="react-native":Gr="node";const Mv={"X-Client-Info":`supabase-js-${Gr}/${Dv}`},zv={headers:Mv},Bv={schema:"public"},Fv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qv={};var Wv=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Hv=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ef:e=fetch,(...n)=>e(...n)},Vv=()=>typeof Headers>"u"?_f:Headers,Kv=(t,e,n)=>{const r=Hv(n),a=Vv();return(i,s)=>Wv(void 0,void 0,void 0,function*(){var o;const u=(o=yield e())!==null&&o!==void 0?o:t;let c=new a(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},s),{headers:c}))})};var Gv=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};function Jv(t){return t.endsWith("/")?t:t+"/"}function Qv(t,e){var n,r;const{db:a,auth:i,realtime:s,global:o}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Gv(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Xv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Mf="2.72.0",Jn=30*1e3,tl=3,Ws=tl*Jn,Yv="http://localhost:9999",Zv="supabase.auth.token",ey={"X-Client-Info":`gotrue-js/${Mf}`},nl="X-Supabase-Api-Version",zf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ty=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ny=10*60*1e3;class au extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function J(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ry extends au{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ay(t){return J(t)&&t.name==="AuthApiError"}class Bf extends au{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class bn extends au{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class Qt extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iy(t){return J(t)&&t.name==="AuthSessionMissingError"}class qr extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ni extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ri extends bn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sy(t){return J(t)&&t.name==="AuthImplicitGrantRedirectError"}class Oc extends bn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rl extends bn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Hs(t){return J(t)&&t.name==="AuthRetryableFetchError"}class jc extends bn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class al extends bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ac=` 	
\r=`.split(""),oy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ac.length;e+=1)t[Ac[e].charCodeAt(0)]=-2;for(let e=0;e<qi.length;e+=1)t[qi[e].charCodeAt(0)]=e;return t})();function Rc(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(qi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(qi[r]),e.queuedBits-=6}}function Ff(t,e,n){const r=oy[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ic(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{cy(s,r,n)};for(let s=0;s<t.length;s+=1)Ff(t.charCodeAt(s),a,i);return e.join("")}function ly(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function uy(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}ly(r,e)}}function cy(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function dy(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Ff(t.charCodeAt(a),n,r);return new Uint8Array(e)}function hy(t){const e=[];return uy(t,n=>e.push(n)),new Uint8Array(e)}function fy(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>Rc(a,n,r)),Rc(null,n,r),e.join("")}function my(t){return Math.round(Date.now()/1e3)+t}function gy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},qf=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function py(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const Wf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ia(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},vy=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},_n=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(t,e)=>{await t.removeItem(e)};class fs{constructor(){this.promise=new fs.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fs.promiseConstructor=Promise;function Vs(t){const e=t.split(".");if(e.length!==3)throw new al("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ty.test(e[r]))throw new al("JWT not in base64url format");return{header:JSON.parse(Ic(e[0])),payload:JSON.parse(Ic(e[1])),signature:dy(e[2]),raw:{header:e[0],payload:e[1]}}}async function yy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wy(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await t(i);if(!e(i,null,s)){r(s);return}}catch(s){if(!e(i,s)){a(s);return}}})()})}function ky(t){return("0"+t.toString(16)).substr(-2)}function by(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,ky).join("")}async function xy(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Ey(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xy(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hn(t,e,n=!1){const r=by();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Qn(t,`${e}-code-verifier`,a);const i=await Ey(r);return[i,r===i?"plain":"s256"]}const _y=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sy(t){const e=t.headers.get(nl);if(!e||!e.match(_y))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ny(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Cy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ty=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vn(t){if(!Ty.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ks(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lc(t){return JSON.parse(JSON.stringify(t))}var Py=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const Cn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oy=[502,503,504];async function $c(t){var e;if(!vy(t))throw new rl(Cn(t),0);if(Oy.includes(t.status))throw new rl(Cn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Bf(Cn(i),i)}let r;const a=Sy(t);if(a&&a.getTime()>=zf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new jc(Cn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Qt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new jc(Cn(n),t.status,n.weak_password.reasons);throw new ry(Cn(n),t.status||500,r)}const jy=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Q(t,e,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[nl]||(i[nl]=zf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",u=await Ay(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Ay(t,e,n,r,a,i){const s=jy(e,r,a,i);let o;try{o=await t(n,Object.assign({},s))}catch(u){throw console.error(u),new rl(Cn(u),0)}if(o.ok||await $c(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(u){await $c(u)}}function Tt(t){var e;let n=null;$y(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=my(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Uc(t){const e=Tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ry(t){return{data:t,error:null}}function Iy(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=t,s=Py(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},u=Object.assign({},s);return{data:{properties:o,user:u},error:null}}function Ly(t){return t}function $y(t){return t.access_token&&t.refresh_token&&t.expires_in}const Gs=["global","local","others"];var Uy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class Dy{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Wf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Gs[0]){if(Gs.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gs.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:tn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Uy(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Iy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(J(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tn})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,i,s,o,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ly});if(d.error)throw d.error;const h=await d.json(),f=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,v=(u=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(w=>{const k=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);c[`${x}Page`]=k}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Vn(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tn})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Vn(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:tn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Vn(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:tn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Vn(e.userId);try{const{data:n,error:r}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Vn(e.userId),Vn(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}}function Dc(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function My(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kn={debug:!!(globalThis&&qf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zy extends Hf{}async function By(t,e,n){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zy(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Vf(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Fy(t){return parseInt(t,16)}function qy(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Wy(t){var e;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:u,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=Vf(t.address),w=d?`${d}://${r}`:r,k=t.statement?`${t.statement}
`:"",x=`${w} wants you to sign in with your Ethereum account:
${v}

${k}`;let p=`URI: ${h}
Version: ${f}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),o&&(p+=`
Not Before: ${o.toISOString()}`),u&&(p+=`
Request ID: ${u}`),c){let m=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);m+=`
- ${g}`}p+=m}return`${x}
${p}`}My();const Hy={url:Yv,storageKey:Zv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ey,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mc(t,e,n){return await n()}const Gn={};class Na{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Na.nextInstanceID,Na.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Hy),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Dy({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Wf(a.fetch),this.lock=a.lock||Mc,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=By:this.lock=Mc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:qf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dc(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Dc(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=py(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ut()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sy(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return J(n)?{error:n}:{error:new Bf("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Tt}),{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const u=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,a;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Hn(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:w},xform:Tt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tt})}else throw new ni("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const u=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:s,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uc})}else if("phone"in e){const{phone:i,password:s,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uc})}else throw new ni("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new qr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,a,i,s,o,u,c,d,h,f;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:k,wallet:x,statement:p,options:m}=e;let g;if(ut())if(typeof x=="object")g=x;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")g=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=x}const E=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),_=await g.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=Vf(_[0]);let P=(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const O=await g.request({method:"eth_chainId"});P=Fy(O)}const A={domain:E.host,address:C,statement:p,uri:E.href,version:"1",chainId:P,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=Wy(A),w=await g.request({method:"personal_sign",params:[qy(v),C]})}try{const{data:k,error:x}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Tt});if(x)throw x;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new qr}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:x})}catch(k){if(J(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(e){var n,r,a,i,s,o,u,c,d,h,f,v;let w,k;if("message"in e)w=e.message,k=e.signature;else{const{chain:x,wallet:p,statement:m,options:g}=e;let E;if(ut())if(typeof p=="object")E=p;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))E=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=p}const _=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const C=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let P;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")P=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)P=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)w=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),k=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((s=g==null?void 0:g.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const C=await E.signMessage(new TextEncoder().encode(w),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=C}}try{const{data:x,error:p}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:fy(k)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Tt});if(p)throw p;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new qr}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:p})}catch(x){if(J(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const n=await _n(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:s}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tt});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new qr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(J(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:i,nonce:s}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tt}),{data:u,error:c}=o;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new qr}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,a,i,s;try{if("email"in e){const{email:o,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Hn(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:u}=e,{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=u==null?void 0:u.data)!==null&&a!==void 0?a:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(s=u==null?void 0:u.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ni("You must provide either an email or phone number.")}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let a,i;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Tt});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const u=s.session,c=s.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,r,a;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await Hn(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:Ry})}catch(i){if(J(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Qt;const{error:a}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:s}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:s,error:o}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o}}throw new ni("You must provide either an email or phone number and a type")}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await _n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ws:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await _n(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=Ks()}if(this.storage.isServer&&e.user){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!s&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tn}):await this._useSession(async n=>{var r,a,i;const{data:s,error:o}=n;if(o)throw o;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:tn})})}catch(n){if(J(n))return iy(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Qt;const s=a.session;let o=null,u=null;this.flowType==="pkce"&&e.email!=null&&([o,u]=await Hn(this.storage,this.storageKey));const{data:c,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:u}),jwt:s.access_token,xform:tn});if(d)throw d;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qt;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:s}=Vs(e.access_token);if(s.exp&&(r=s.exp,a=r<=n),a){const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(J(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:o}=n;if(o)throw o;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Qt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ut())throw new ri("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ri(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Oc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ri("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Oc("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:u,token_type:c}=e;if(!i||!o||!s||!c)throw new ri("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;u&&(f=parseInt(u));const v=f-d;v*1e3<=Jn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:k,error:x}=await this._getUser(i);if(x)throw x;const p={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:s,token_type:c,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(J(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await _n(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const s=(r=a.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(ay(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=gy(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Hn(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(J(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var s,o,u,c,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(J(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:s}=n;if(s)throw s;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wy(async a=>(a>0&&await yy(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(a,i)=>{const s=200*Math.pow(2,a);return i&&Hs(i)&&Date.now()+s-r<Jn})}catch(r){if(this._debug(n,"error",r),J(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await _n(this.storage,this.storageKey);if(a&&this.userStorage){let s=await _n(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await Qn(this.userStorage,this.storageKey+"-user",s)),a.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:Ks()}else if(a&&!a.user&&!a.user){const s=await _n(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Jt(this.storage,this.storageKey+"-user"),await Qn(this.storage,this.storageKey,a)):a.user=Ks()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ws;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Ws}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),Hs(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(a.access_token);!o&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new fs;const{data:i,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new Qt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),J(i)){const s={session:null,error:i};return Hs(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Qn(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Lc(a);await Qn(this.storage,this.storageKey,i)}else{const a=Lc(n);await Qn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Jn}ms, refresh threshold is ${tl} ticks`),a<=tl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Hf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,s]=await Hn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((a=u==null?void 0:u.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:s,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],a=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),i=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Vs(a.access_token);let o=null;s.aal&&(o=s.aal);let u=o;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=s.amr||[];return{data:{currentLevel:o,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+ny>a)return r;const{data:i,error:s}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};r=v.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:u}}=Vs(r);n!=null&&n.allowExpired||Ny(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:a,signature:s},error:null}}const d=Cy(a.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,s,hy(`${o}.${u}`)))throw new al("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}Na.nextInstanceID=0;const Vy=Na;class Ky extends Vy{constructor(e){super(e)}}var Gy=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?i(d.value):a(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class Jy{constructor(e,n,r){var a,i,s;this.supabaseUrl=e,this.supabaseKey=n;const o=Xv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:Bv,realtime:qv,auth:Object.assign(Object.assign({},Fv),{storageKey:u}),global:zv},d=Qv(r??{},c);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=Kv(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new rv(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Uv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new L0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Gy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:s,flowType:o,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ky({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:o,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new kv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qy=(t,e,n)=>new Jy(t,e,n);function Xy(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xy()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Wc,Hc;let Ae=((Hc=(Wc=import.meta)==null?void 0:Wc.env)==null?void 0:Hc.VITE_SUPABASE_URL)||"";var Vc,Kc;let ze=((Kc=(Vc=import.meta)==null?void 0:Vc.env)==null?void 0:Kc.VITE_SUPABASE_ANON_KEY)||"";(!Ae||!ze)&&typeof window<"u"&&(Ae=window.__SUPABASE_URL__||Ae,ze=window.__SUPABASE_ANON_KEY__||ze);const Yy="https://lfnhvsigfcaimgiwbeyb.supabase.co",zc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxmbmh2c2lnZmNhaW1naXdiZXliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MTIyMzYsImV4cCI6MjA3NDk4ODIzNn0.KE6y53oscvkoqmzqGnLHpsI3j5fu3M7w-vLpegHLcj4";(!Ae||!ze)&&zc&&(Ae=Yy,ze=zc);try{if((!Ae||!ze)&&typeof localStorage<"u"){const t=localStorage.getItem("DEV_SUPABASE_URL"),e=localStorage.getItem("DEV_SUPABASE_ANON_KEY");t&&(Ae=t),e&&(ze=e)}}catch{}typeof Ae=="string"&&(Ae=Ae.trim());typeof ze=="string"&&(ze=ze.trim());var Gc,Jc,Qc,Xc;typeof window<"u"&&!window.__SUPA_DEBUG__&&(window.__SUPA_DEBUG__=!0,console.debug("[supabase:diagnostic]",{hasEnvUrl:!!((Jc=(Gc=import.meta)==null?void 0:Gc.env)!=null&&Jc.VITE_SUPABASE_URL),hasEnvKey:!!((Xc=(Qc=import.meta)==null?void 0:Qc.env)!=null&&Xc.VITE_SUPABASE_ANON_KEY),finalUrlLength:(Ae==null?void 0:Ae.length)||0,finalKeyLength:(ze==null?void 0:ze.length)||0}));let K;if(!Ae||!ze){const t="[supabase] Missing config – reason: "+(!Ae&&!ze?"both url & key empty":Ae?"anon key empty":"url empty")+" (using stub fallback).";console.warn(t);const e=()=>({data:null,error:new Error("Supabase not configured: add VITE_SUPABASE_URL & VITE_SUPABASE_ANON_KEY to your .env")}),n=()=>({select(){return n()},insert(){return Promise.resolve(e())},update(){return Promise.resolve(e())},delete(){return Promise.resolve(e())},upsert(){return Promise.resolve(e())},order(){return n()},limit(){return n()},eq(){return n()},in(){return n()},single(){return Promise.resolve(e())},then(r,a){const{data:i,error:s}=e();return Promise.resolve({data:i,error:s}).then(r,a)}});K={from(){return n()},auth:{getSession:async()=>({data:{session:null},error:null}),signInWithPassword:async()=>e(),signOut:async()=>e(),signUp:async()=>e()},storage:{from(){return{upload:async()=>e(),getPublicUrl(){return{data:{publicUrl:""}}}}}}}}else K=Qy(Ae,ze,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});const Kf=y.createContext(null);function Zy(t){return btoa(unescape(encodeURIComponent(t)))}function ew({children:t}){const[e,n]=y.useState(null),[r,a]=y.useState(!0),[i,s]=y.useState(null),o=y.useCallback(async(O,j,D)=>{if(!O)return null;const F=await K.from("profiles").select("*").eq("id",O).single();if(F.error&&F.error.code!=="406"&&console.warn("[profiles] fetch error",F.error),F.data)return F.data;const Y={id:O,name:j||"User",is_admin:!1,upload_bytes:0,email:D},se=await K.from("profiles").upsert(Y,{onConflict:"id"});if(se.error)return console.warn("[profiles] upsert error",se.error),null;const q=await K.from("profiles").select("*").eq("id",O).single();return q.error&&q.error.code!=="406"&&console.warn("[profiles] fetch2 error",q.error),q.data||null},[]);y.useEffect(()=>{(async()=>{var O,j,D;{const F=await K.auth.getSession(),Y=((O=F==null?void 0:F.data)==null?void 0:O.session)||null;if(Y&&Y.user){const q=await o(Y.user.id,(j=Y.user.email)==null?void 0:j.split("@")[0],Y.user.email);n({id:Y.user.id,email:Y.user.email,name:(q==null?void 0:q.name)||((D=Y.user.email)==null?void 0:D.split("@")[0]),avatar:(q==null?void 0:q.avatar_url)||null,cover:(q==null?void 0:q.cover_url)||null,bio:(q==null?void 0:q.bio)||"",dob:(q==null?void 0:q.dob)||null,isAdmin:!!(q!=null&&q.is_admin),suspended:!!(q!=null&&q.suspended),uploadBytes:(q==null?void 0:q.upload_bytes)||0})}a(!1);const{data:se}=K.auth.onAuthStateChange(async(q,ie)=>{var Ce,M;if(ie!=null&&ie.user){const B=await o(ie.user.id,(Ce=ie.user.email)==null?void 0:Ce.split("@")[0],ie.user.email);n({id:ie.user.id,email:ie.user.email,name:(B==null?void 0:B.name)||((M=ie.user.email)==null?void 0:M.split("@")[0]),avatar:(B==null?void 0:B.avatar_url)||null,cover:(B==null?void 0:B.cover_url)||null,bio:(B==null?void 0:B.bio)||"",dob:(B==null?void 0:B.dob)||null,isAdmin:!!(B!=null&&B.is_admin),suspended:!!(B!=null&&B.suspended),uploadBytes:(B==null?void 0:B.upload_bytes)||0})}else n(null)});return()=>{se.subscription.unsubscribe()}}})()},[]);const u=O=>localStorage.setItem("users",JSON.stringify(O)),c=y.useCallback(async({email:O,password:j,name:D})=>{if(!O||!j)throw new Error("Email và mật khẩu bắt buộc");{const{data:F,error:Y}=await K.auth.signUp({email:O,password:j});if(Y)throw Y;const se=F.user.id;return F.session||s(O),{id:se,email:O}}},[]),d=y.useCallback(async({email:O,password:j})=>{{const{data:D,error:F}=await K.auth.signInWithPassword({email:O,password:j});if(F)throw console.warn("[auth] login error",F),F.message&&F.message.toLowerCase().includes("email not confirmed")?(s(O),new Error("Email chưa xác nhận. Kiểm tra hộp thư hoặc dùng resendConfirmation(email).")):new Error(F.message||"Sai email hoặc mật khẩu");const Y=D.user.id,se=await K.from("profiles").select("*").eq("id",Y).single(),q=se.error&&se.error.code==="406"?null:se.data,ie={id:Y,email:D.user.email,name:(q==null?void 0:q.name)||O.split("@")[0],avatar:(q==null?void 0:q.avatar_url)||null,cover:(q==null?void 0:q.cover_url)||null,bio:(q==null?void 0:q.bio)||"",dob:(q==null?void 0:q.dob)||null,isAdmin:!!(q!=null&&q.is_admin),suspended:!!(q!=null&&q.suspended),uploadBytes:(q==null?void 0:q.upload_bytes)||0};return n(ie),ie}},[]),h=y.useCallback(async()=>{{await K.auth.signOut(),n(null);return}},[]),f=y.useCallback(async O=>{if(!e)throw new Error("Chưa đăng nhập");{const j={};O.name!==void 0&&(j.name=O.name),O.bio!==void 0&&(j.bio=O.bio),O.avatar!==void 0&&(j.avatar_url=O.avatar),O.cover!==void 0&&(j.cover_url=O.cover),Object.keys(j).length&&await K.from("profiles").update(j).eq("id",e.id);const D={...e,...O};return n(D),D}},[e]),v=y.useCallback(async({oldPassword:O,newPassword:j})=>{if(!e)throw new Error("Chưa đăng nhập");{const{error:D}=await K.auth.signInWithPassword({email:e.email,password:O});if(D)throw new Error("Mật khẩu cũ không đúng");const{error:F}=await K.auth.updateUser({password:j});if(F)throw F;return!0}},[e]),w=y.useCallback(async O=>f({cover:O}),[f]),k=y.useCallback(async()=>{{let O="id, name, bio, avatar_url, cover_url, is_admin, suspended, upload_bytes, dob, created_at, email",{data:j,error:D}=await K.from("profiles").select(O);return D&&(console.warn("[profiles] listUsers fallback (no email column?)",D.message),{data:j}=await K.from("profiles").select("id, name, bio, avatar_url, cover_url, is_admin, suspended, upload_bytes, dob, created_at")),(j||[]).map(F=>({id:F.id,name:F.name,bio:F.bio,avatar:F.avatar_url,cover:F.cover_url,isAdmin:F.is_admin,suspended:F.suspended,uploadBytes:F.upload_bytes,dob:F.dob,createdAt:F.created_at,email:F.email||null}))}},[]),x=y.useCallback(async(O,j)=>{if(!(e!=null&&e.isAdmin))throw new Error("Không có quyền");{const D={};return j.name!==void 0&&(D.name=j.name),j.bio!==void 0&&(D.bio=j.bio),j.avatar!==void 0&&(D.avatar_url=j.avatar),j.cover!==void 0&&(D.cover_url=j.cover),j.isAdmin!==void 0&&(D.is_admin=j.isAdmin),j.suspended!==void 0&&(D.suspended=j.suspended),Object.keys(D).length&&await K.from("profiles").update(D).eq("id",O),e.id===O&&n(F=>({...F,...j})),{id:O,...j}}},[e]),p=y.useCallback(async O=>{if(!(e!=null&&e.isAdmin))throw new Error("Không có quyền");{await K.from("profiles").update({suspended:!0}).eq("id",O),e.id===O&&(await K.auth.signOut(),n(null));return}},[e]),m=y.useCallback((O,j)=>{if(!(e!=null&&e.isAdmin))throw new Error("Không có quyền");const D=JSON.parse(localStorage.getItem("users")||"[]"),F=D.findIndex(Y=>Y.id===O);if(F===-1)throw new Error("User không tồn tại");D[F].passwordHash=Zy(j),u(D),e.id===O&&n(D[F])},[e]),g=y.useCallback(async O=>{if(e){const j=(e.uploadBytes||0)+O;await K.from("profiles").update({upload_bytes:j}).eq("id",e.id),n(D=>({...D,uploadBytes:j}));return}},[e]),E=y.useCallback((O,j={})=>{if(e)try{const D=localStorage.getItem("userActivity"),F=D?JSON.parse(D):{};F[e.id]||(F[e.id]={logins:[],actions:[],viewedPosts:{},meta:{}}),F[e.id].actions.push({at:new Date().toISOString(),action:O,...j}),F[e.id].actions.length>500&&(F[e.id].actions=F[e.id].actions.slice(-500)),localStorage.setItem("userActivity",JSON.stringify(F))}catch{}},[e]),_=y.useCallback(O=>{if(e)try{const j=localStorage.getItem("userActivity"),D=j?JSON.parse(j):{};D[e.id]||(D[e.id]={logins:[],actions:[],viewedPosts:{},meta:{}}),D[e.id].viewedPosts[O]||(D[e.id].viewedPosts[O]={count:0,lastAt:null}),D[e.id].viewedPosts[O].count+=1,D[e.id].viewedPosts[O].lastAt=new Date().toISOString(),localStorage.setItem("userActivity",JSON.stringify(D))}catch{}},[e]),C=y.useCallback(O=>{try{const j=localStorage.getItem("userActivity");return j&&JSON.parse(j)[O]||null}catch{return null}},[]),P={user:e,loading:r,authenticated:!!e,login:d,register:c,logout:h,updateProfile:f,changePassword:v,updateCover:w,listUsers:k,adminUpdateUser:x,adminDeleteUser:p,incrementUploadBytes:g,adminResetPassword:m,recordAction:E,recordPostView:_,getActivity:C},A=y.useCallback(async O=>{const j=O||i;if(!j)throw new Error("Không có email cần xác nhận");const{error:D}=await K.auth.resend({type:"signup",email:j});if(D)throw D;return!0},[i]);return P.pendingEmailConfirm=i,P.resendConfirmation=A,l.createElement(Kf.Provider,{value:P},t)}function Fe(){return y.useContext(Kf)}function Bc(){const{authenticated:t,user:e,logout:n}=Fe(),[r,a]=y.useState(!1),i=Or(),s=y.useRef(null);y.useEffect(()=>{function c(d){s.current&&!s.current.contains(d.target)&&a(!1)}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);function o(){n(),a(!1),i("/")}const u=((e==null?void 0:e.name)||(e==null?void 0:e.email)||"?").trim().charAt(0).toUpperCase();return l.createElement("div",{className:"relative",ref:s},l.createElement("button",{type:"button",onClick:()=>a(c=>!c),className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center shadow hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 overflow-hidden"},t?e!=null&&e.avatar?l.createElement("img",{src:e.avatar,alt:"avatar",className:"w-full h-full object-cover"}):u:"👤"),r&&l.createElement("div",{className:"absolute right-0 mt-2 w-56 rounded-xl overflow-hidden shadow-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 origin-top-right animate-scaleFade"},!t&&l.createElement("div",{className:"py-2"},l.createElement(In,{to:"/login",onClick:()=>a(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"},"Đăng nhập"),l.createElement(In,{to:"/register",onClick:()=>a(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"},"Đăng ký")),t&&l.createElement("div",{className:"py-2"},l.createElement("div",{className:"px-4 pt-2 pb-1 text-xs uppercase tracking-wide text-gray-400"},"Tài khoản"),l.createElement("div",{className:"px-4 pb-2 text-sm font-medium text-gray-800 dark:text-gray-100"},e.name||e.email),l.createElement(In,{to:"/profile",onClick:()=>a(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"},"Hồ sơ"),l.createElement("button",{onClick:o,className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 font-semibold"},"Đăng xuất"))))}function tw(){const{dark:t,toggle:e}=O0(),{user:n,authenticated:r,logout:a}=Fe();Or();const[i,s]=y.useState(!1),o=({isActive:u})=>u?"text-green-600 dark:text-green-400 font-semibold":"text-gray-600 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400 font-medium";return l.createElement("div",{className:"min-h-screen bg-gray-100 dark:bg-black text-gray-800 dark:text-gray-200 flex flex-col"},l.createElement("header",{className:"bg-white dark:bg-gray-900/80 backdrop-blur-sm shadow-md sticky top-0 z-30"},l.createElement("nav",{className:"container mx-auto px-6 py-3 flex justify-between items-center"},l.createElement(In,{to:"/",className:"text-2xl font-bold text-green-600 dark:text-green-400"},"LỚP A12K45"),l.createElement("div",{className:"hidden md:flex items-center space-x-6"},l.createElement(xn,{to:"/",end:!0,className:o},"Trang chủ"),l.createElement(xn,{to:"/gioithieu",className:o},"Giới Thiệu"),l.createElement(xn,{to:"/thanhtich",className:o},"Thành Tích"),r&&(n==null?void 0:n.isAdmin)&&l.createElement(xn,{to:"/admin",className:o},"Admin"),l.createElement(Bc,null),l.createElement("button",{type:"button",onClick:e,className:"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm p-2.5 transition-all","aria-label":"Đổi giao diện"},t?"🌙":"☀️")),l.createElement("div",{className:"md:hidden flex items-center"},l.createElement("button",{type:"button",onClick:e,className:"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm p-2.5 mr-2 transition-all","aria-label":"Đổi giao diện"},t?"🌙":"☀️"),l.createElement("button",{onClick:()=>s(u=>!u),className:"outline-none","aria-label":"Mở menu"},l.createElement("svg",{className:"w-6 h-6 text-gray-500 hover:text-green-600 dark:hover:text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"}))))),l.createElement("div",{id:"mobile-menu",className:(i?"":"hidden ")+"md:hidden"},l.createElement(xn,{to:"/",end:!0,className:"block py-3 px-6 text-sm text-green-600 dark:text-green-400 font-semibold",onClick:()=>s(!1)},"Trang chủ"),l.createElement(xn,{to:"/gioithieu",className:"block py-3 px-6 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>s(!1)},"Giới Thiệu"),l.createElement(xn,{to:"/thanhtich",className:"block py-3 px-6 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>s(!1)},"Thành Tích"),l.createElement("div",{className:"py-3 px-6"},l.createElement(Bc,null)))),l.createElement("div",{className:"flex-1 flex flex-col"},l.createElement(m0,null)),l.createElement("footer",{className:"bg-gray-800/50 dark:bg-black/50 text-white py-6 mt-12"},l.createElement("div",{className:"container mx-auto px-6 text-center"},l.createElement("p",null,"© 2025 - A12K45"))))}function nw(t=[],e=6e3){const n=y.useRef(t);y.useRef(0),y.useEffect(()=>{n.current=t},[t]),y.useEffect(()=>{const r=document.querySelectorAll(".hero-frame .pane");if(!r.length||!n.current.length)return;let a,i=!0;async function s(){const u=[...n.current];if(u.length){for(let c=u.length-1;c>0;c--){const d=Math.floor(Math.random()*(c+1));[u[c],u[d]]=[u[d],u[c]]}r.forEach((c,d)=>{const h=u[d%u.length];!h||c.getAttribute("data-current")===h||(c.style.setProperty("--pane-after-image",`url('${h}')`),c.classList.add("swap-active"),setTimeout(()=>{c.style.setProperty("--pane-img-inline",`url('${h}')`),c.setAttribute("data-current",h),c.classList.remove("swap-active")},900))})}}function o(){i&&(a=setTimeout(async()=>{await s(),o()},e))}return o(),()=>{i=!1,clearTimeout(a)}},[e])}const rw=["/DMT_0001.jpg","/DMT_0426.jpg","/DMT_9823.jpg","/DVN04905.jpg","/DVN04915.jpg","/DVN06150.jpg"];function iu({text:t="A12K45",images:e=rw}){nw(e,6e3);const n=t.split("");return l.createElement("div",{className:"hero-frame","aria-hidden":"false"},n.map((r,a)=>l.createElement("div",{key:a,className:"pane","data-pane":a+1,style:{"--pane-img-inline":`url('${e[a%e.length]}')`}},l.createElement("span",{className:"pane-char"},r),l.createElement("div",{className:"pane-flash"}))))}function aw({open:t,onClose:e}){const n=y.useRef(null),r=y.useRef(null);return y.useEffect(()=>{function a(i){i.key==="Escape"&&e()}return t?(document.addEventListener("keydown",a),setTimeout(()=>{var i;(i=r.current)==null||i.focus()},30),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",a),t||(document.body.style.overflow="")}},[t,e]),t?l.createElement("div",{className:"fixed inset-0 z-[120] flex items-start md:items-center justify-center p-4 md:p-8 modal-intro-wrapper"},l.createElement("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),l.createElement("div",{ref:n,role:"dialog","aria-modal":"true",className:"relative max-h-[90vh] overflow-y-auto w-full max-w-4xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl ring-1 ring-green-500/20 animate-scaleFade"},l.createElement("div",{className:"flex justify-between items-start p-5 border-b border-gray-200 dark:border-gray-700"},l.createElement("h2",{className:"text-2xl font-bold text-green-600 dark:text-green-400"},"Giới Thiệu A12K45"),l.createElement("button",{ref:r,onClick:e,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 rounded-full p-2","aria-label":"Đóng giới thiệu"},"✕")),l.createElement("div",{className:"p-6 space-y-12"},l.createElement("section",null,l.createElement("h3",{className:"text-3xl font-extrabold mb-6 text-green-600 dark:text-green-400"},"A12K45 Là Ai?"),l.createElement("p",{className:"leading-relaxed text-lg text-gray-700 dark:text-gray-300 mb-4"},"A12K45 là một tập thể học sinh đầy năng lượng của Trường THPT Hoài Đức B – nơi mà tinh thần đoàn kết, trách nhiệm và khát vọng học tập luôn được đặt lên hàng đầu. Chúng mình đến từ nhiều hoàn cảnh khác nhau nhưng gặp nhau ở cùng một mục tiêu: cùng tiến bộ, cùng tạo nên những ký ức khó quên của tuổi học trò."),l.createElement("p",{className:"leading-relaxed text-lg text-gray-700 dark:text-gray-300 mb-4"},"Với phương châm ",l.createElement("span",{className:"font-semibold italic text-green-600 dark:text-green-400"},"“Tôn trọng – Hỗ trợ – Vươn lên”"),", lớp luôn khuyến khích mỗi cá nhân thể hiện thế mạnh riêng, đồng thời không để ai bị bỏ lại phía sau.")),l.createElement("section",null,l.createElement("h3",{className:"text-2xl font-bold mb-4"},"Giá Trị Nổi Bật"),l.createElement("ul",{className:"grid md:grid-cols-2 gap-6"},l.createElement("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700"},l.createElement("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400"},"Tinh thần đoàn kết"),l.createElement("p",{className:"text-sm leading-relaxed"},"Luôn sát cánh trong học tập, ngoại khóa và các hoạt động phong trào.")),l.createElement("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700"},l.createElement("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400"},"Tôn trọng & sẻ chia"),l.createElement("p",{className:"text-sm leading-relaxed"},"Xây dựng môi trường thân thiện, lắng nghe và hỗ trợ nhau.")),l.createElement("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700"},l.createElement("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400"},"Kỷ luật & trách nhiệm"),l.createElement("p",{className:"text-sm leading-relaxed"},"Ý thức giữ gìn nề nếp, chủ động trong mọi công việc chung.")),l.createElement("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700"},l.createElement("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400"},"Khát vọng học tập"),l.createElement("p",{className:"text-sm leading-relaxed"},"Không ngừng phấn đấu để đạt kết quả tốt trong các kỳ thi.")))),l.createElement("section",null,l.createElement("h3",{className:"text-2xl font-bold mb-4"},"Những Hoạt Động Tiêu Biểu"),l.createElement("div",{className:"grid md:grid-cols-3 gap-6"},l.createElement("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow"},l.createElement("h4",{className:"font-semibold mb-1"},"Học tập nâng cao"),l.createElement("p",{className:"text-sm"},"Nhóm học tập theo môn, chia sẻ tài liệu và hỗ trợ ôn thi.")),l.createElement("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow"},l.createElement("h4",{className:"font-semibold mb-1"},"Hoạt động thiện nguyện"),l.createElement("p",{className:"text-sm"},"Tham gia các chương trình gây quỹ và hỗ trợ cộng đồng.")),l.createElement("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow"},l.createElement("h4",{className:"font-semibold mb-1"},"Văn nghệ & thể thao"),l.createElement("p",{className:"text-sm"},"Đội hình năng động góp mặt nhiều sự kiện của trường.")))),l.createElement("section",null,l.createElement("h3",{className:"text-2xl font-bold mb-4"},"Thông Điệp Gửi Tới Thành Viên Mới"),l.createElement("div",{className:"p-6 md:p-10 bg-white dark:bg-gray-800/60 rounded-2xl shadow relative overflow-hidden"},l.createElement("div",{className:"absolute inset-0 opacity-5 bg-[radial-gradient(circle_at_center,theme(colors.green.400),transparent_70%)]"}),l.createElement("p",{className:"relative leading-relaxed text-lg"},"Nếu bạn là một phần của A12K45, bạn không chỉ là một học sinh trong lớp – bạn là một mảnh ghép quan trọng của một tập thể đang cùng nhau viết nên một câu chuyện đẹp. Hãy tự tin thể hiện, kết nối và cùng nhau tiến bộ!")))),l.createElement("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-900/60"},l.createElement("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-sm font-medium text-gray-700 dark:text-gray-200"},"Đóng")))):null}const De={like:[],love:[],haha:[],wow:[],sad:[],angry:[]},Gf=y.createContext(null);function iw({children:t}){const{user:e}=Fe(),[n,r]=y.useState([]),[a,i]=y.useState({}),[s,o]=y.useState(!1),u=y.useRef(null),c=y.useRef({});function d(I){c.current[I]&&(clearTimeout(c.current[I]),delete c.current[I])}const h=y.useCallback(async I=>{const N=I.filter(Boolean).filter((S,T,z)=>z.indexOf(S)===T).filter(S=>!a[S]);if(!N.length)return;const{data:b}=await K.from("profiles").select("id,name,avatar_url").in("id",N);b&&i(S=>({...S,...b.reduce((T,z)=>(T[z.id]={id:z.id,name:z.name,avatar:z.avatar_url},T),{})}))},[a]),f=y.useCallback(async()=>{o(!0);const{data:I,error:N}=await K.from("posts").select("*").order("created_at",{ascending:!1}).limit(100);if(N){o(!1);return}const b=(I||[]).map(U=>U.id);let S=[];if(b.length){const{data:U}=await K.from("comments").select("*").in("post_id",b).order("created_at",{ascending:!0});S=U||[]}const T=S.map(U=>U.id);let z=[];if(T.length){const{data:U}=await K.from("replies").select("*").in("comment_id",T).order("created_at",{ascending:!0});z=U||[]}const R=[...b,...T,...z.map(U=>U.id)];let H=[];if(R.length){const{data:U}=await K.from("reactions").select("*").in("entity_id",R);H=U||[]}const V={};H.forEach(U=>{V[U.entity_id]||(V[U.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),V[U.entity_id][U.reaction_type]=[...V[U.entity_id][U.reaction_type],U.user_id]});const ee={};z.forEach(U=>{ee[U.comment_id]||(ee[U.comment_id]=[]),ee[U.comment_id].push({id:U.id,authorId:U.author_id,content:U.content||"",image:U.image_url||null,createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De}})});const L={};S.forEach(U=>{L[U.post_id]||(L[U.post_id]=[]),L[U.post_id].push({id:U.id,authorId:U.author_id,content:U.content||"",image:U.image_url||null,createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De},replies:ee[U.id]||[]})});const Z=(I||[]).map(U=>({id:U.id,authorId:U.author_id,content:U.content||"",images:U.images||[],createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De},comments:L[U.id]||[]}));r(Z),o(!1),h(Z.flatMap(U=>[U.authorId,...U.comments.map(ge=>ge.authorId),...U.comments.flatMap(ge=>ge.replies.map(Pe=>Pe.authorId))]))},[h]);y.useEffect(()=>{f()},[f]),y.useEffect(()=>{if(u.current)return;const I=K.channel("rt-feed").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},N=>{const b=N.new;r(S=>S.some(T=>T.id===b.id)?S:[{id:b.id,authorId:b.author_id,content:b.content||"",images:b.images||[],createdAt:b.created_at,updatedAt:b.updated_at,deleted:b.deleted,reactions:{...De},comments:[]},...S]),h([b.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts"},N=>{const b=N.new;r(S=>S.map(T=>T.id===b.id?{...T,content:b.content||T.content,images:b.images||T.images,updatedAt:b.updated_at,deleted:b.deleted}:T))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},N=>{const b=N.old;r(S=>S.filter(T=>T.id!==b.id))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},N=>{const b=N.new;r(S=>S.map(T=>{if(T.id!==b.post_id||T.comments.some(R=>R.id===b.id))return T;const z=T.comments.find(R=>R.pending&&R.authorId===b.author_id&&R.content===(b.content||"").trim());return z?(d(z.id),{...T,comments:T.comments.map(R=>R===z?{id:b.id,authorId:b.author_id,content:b.content||"",image:b.image_url||null,createdAt:b.created_at,updatedAt:b.updated_at,deleted:b.deleted,reactions:{...De},replies:[],pending:!1}:R)}):{...T,comments:[...T.comments,{id:b.id,authorId:b.author_id,content:b.content||"",image:b.image_url||null,createdAt:b.created_at,updatedAt:b.updated_at,deleted:b.deleted,reactions:{...De},replies:[]}]}})),h([b.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"comments"},N=>{const b=N.new;r(S=>S.map(T=>T.id===b.post_id?{...T,comments:T.comments.map(z=>z.id===b.id?{...z,content:b.content||z.content,image:b.image_url||z.image,updatedAt:b.updated_at,deleted:b.deleted}:z)}:T))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"comments"},N=>{const b=N.old;r(S=>S.map(T=>T.id===b.post_id?{...T,comments:T.comments.filter(z=>z.id!==b.id)}:T))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"replies"},N=>{const b=N.new;r(S=>S.map(T=>T.comments.some(R=>R.id===b.comment_id)?{...T,comments:T.comments.map(R=>R.id===b.comment_id?{...R,replies:R.replies.some(H=>H.id===b.id)?R.replies:[...R.replies,{id:b.id,authorId:b.author_id,content:b.content||"",image:b.image_url||null,createdAt:b.created_at,updatedAt:b.updated_at,deleted:b.deleted,reactions:{...De}}]}:R)}:T)),h([b.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"replies"},N=>{const b=N.new;r(S=>S.map(T=>({...T,comments:T.comments.map(z=>z.replies.some(R=>R.id===b.id)?{...z,replies:z.replies.map(R=>R.id===b.id?{...R,content:b.content||R.content,image:b.image_url||R.image,updatedAt:b.updated_at,deleted:b.deleted}:R)}:z)})))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"replies"},N=>{const b=N.old;r(S=>S.map(T=>({...T,comments:T.comments.map(z=>({...z,replies:z.replies.filter(R=>R.id!==b.id)}))})))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"reactions"},N=>{const b=N.new;r(S=>S.map(T=>{if(b.entity_type==="post"&&T.id===b.entity_id){const R={...T.reactions},H=R[b.reaction_type]||[];return H.includes(b.user_id)||(R[b.reaction_type]=[...H,b.user_id]),{...T,reactions:R}}const z=T.comments.map(R=>{if(b.entity_type==="comment"&&R.id===b.entity_id){const V={...R.reactions},ee=V[b.reaction_type]||[];return ee.includes(b.user_id)||(V[b.reaction_type]=[...ee,b.user_id]),{...R,reactions:V}}const H=R.replies.map(V=>{if(b.entity_type==="reply"&&V.id===b.entity_id){const ee={...V.reactions},L=ee[b.reaction_type]||[];return L.includes(b.user_id)||(ee[b.reaction_type]=[...L,b.user_id]),{...V,reactions:ee}}return V});return{...R,replies:H}});return{...T,comments:z}}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"reactions"},N=>{const b=N.old;r(S=>S.map(T=>{if(b.entity_type==="post"&&T.id===b.entity_id){const R={...T.reactions};return Object.keys(R).forEach(H=>R[H]=R[H].filter(V=>V!==b.user_id)),{...T,reactions:R}}const z=T.comments.map(R=>{if(b.entity_type==="comment"&&R.id===b.entity_id){const V={...R.reactions};return Object.keys(V).forEach(ee=>V[ee]=V[ee].filter(L=>L!==b.user_id)),{...R,reactions:V}}const H=R.replies.map(V=>{if(b.entity_type==="reply"&&V.id===b.entity_id){const ee={...V.reactions};return Object.keys(ee).forEach(L=>ee[L]=ee[L].filter(Z=>Z!==b.user_id)),{...V,reactions:ee}}return V});return{...R,replies:H}});return{...T,comments:z}}))}).subscribe();return u.current=I,()=>{K.removeChannel(I)}},[h]);const v=y.useRef(0);y.useEffect(()=>{if(!n.length)return;const I=setInterval(async()=>{const N=Date.now();if(N-v.current<5e3)return;v.current=N;const b=n.map(U=>U.id),S=n.reduce((U,ge)=>{const Pe=ge.comments.reduce((be,Oe)=>Math.max(be,new Date(Oe.createdAt).getTime()),0);return Math.max(U,Pe)},0),T=S?new Date(S-1e3).toISOString():null;let z=K.from("comments").select("*").in("post_id",b).order("created_at",{ascending:!0}).limit(200);T&&(z=z.gt("created_at",T));const{data:R,error:H}=await z;if(H||!R||!R.length)return;const V={};R.forEach(U=>{V[U.post_id]||(V[U.post_id]=[]),V[U.post_id].push(U)});const ee=R.map(U=>U.id);let L=[];if(ee.length){const{data:U}=await K.from("reactions").select("*").in("entity_id",ee);L=U||[]}const Z={};L.forEach(U=>{Z[U.entity_id]||(Z[U.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),Z[U.entity_id][U.reaction_type]=[...Z[U.entity_id][U.reaction_type],U.user_id]}),r(U=>U.map(ge=>{const Pe=V[ge.id];if(!Pe)return ge;const be=new Set(ge.comments.map(Ge=>Ge.id)),Oe=Pe.filter(Ge=>!be.has(Ge.id)).map(Ge=>({id:Ge.id,authorId:Ge.author_id,content:Ge.content||"",image:Ge.image_url||null,createdAt:Ge.created_at,updatedAt:Ge.updated_at,deleted:Ge.deleted,reactions:Z[Ge.id]||{...De},replies:[]}));return Oe.length?{...ge,comments:[...ge.comments,...Oe]}:ge})),h(R.map(U=>U.author_id))},3e3);return()=>clearInterval(I)},[n,h]);async function w(I,N=[]){if(!e)throw new Error("Chưa đăng nhập");const{error:b}=await K.from("posts").insert({author_id:e.id,content:I.trim(),images:N});if(b)throw b}async function k(I,{content:N,images:b=[]}){if(!e)throw new Error("Chưa đăng nhập");const{error:S}=await K.from("posts").update({content:N.trim(),images:b,updated_at:new Date().toISOString()}).eq("id",I);if(S)throw S}async function x(I){await K.from("posts").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}async function p(I){await K.from("posts").update({deleted:!1,deleted_at:null}).eq("id",I)}async function m(I){await K.from("posts").delete().eq("id",I)}function g(I,N,b){return{id:I,pending:!0,tempLocalId:I,authorId:e.id,content:N.trim(),image:b||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted:!1,reactions:{...De},replies:[]}}function E(I,N,b){r(S=>S.map(T=>{if(T.id!==I)return T;const z=T.comments.some(H=>H.id===b.id);let R=T.comments.map(H=>H.id===N?{id:b.id,authorId:b.author_id,content:b.content||"",image:b.image_url||null,createdAt:b.created_at,updatedAt:b.updated_at,deleted:b.deleted,reactions:{...De},replies:[],pending:!1}:H);return z&&(R=R.filter(H=>H.id!==N)),{...T,comments:R}})),d(N)}async function _(I,N,b=null){if(!e)throw new Error("Chưa đăng nhập");const S=(N||"").trim();if(!S&&!b)return;const T="temp-"+Date.now()+"-"+Math.random().toString(36).slice(2),z=g(T,S,b);r(R=>R.map(H=>H.id===I?{...H,comments:[...H.comments,z]}:H)),h([e.id]);try{const{data:R,error:H}=await K.from("comments").insert({post_id:I,author_id:e.id,content:S,image_url:b}).select().single();if(H)throw H;R&&E(I,T,R)}catch(R){throw console.warn("addComment error",R),r(H=>H.map(V=>V.id===I?{...V,comments:V.comments.map(ee=>ee.id===T?{...ee,failed:!0,pending:!1}:ee)}:V)),setTimeout(()=>ne(I),1e3),R}c.current[T]=setTimeout(()=>C(I,T),5e3)}function C(I,N){r(b=>b.map(S=>S.id!==I?S:{...S,comments:S.comments.map(T=>T.id===N&&T.pending?{...T,pending:!1,stale:!0}:T)})),ne(I)}async function P(I,N){await K.from("comments").update({content:N.trim(),updated_at:new Date().toISOString()}).eq("id",I)}async function A(I){await K.from("comments").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}async function O(I,N,b){return P(N,b)}async function j(I,N){return A(N)}async function D(I,N,b=null){if(!e)throw new Error("Chưa đăng nhập");const{error:S}=await K.from("replies").insert({comment_id:I,author_id:e.id,content:N.trim(),image_url:b});if(S)throw S}async function F(I,N){await K.from("replies").update({content:N.trim(),updated_at:new Date().toISOString()}).eq("id",I)}async function Y(I){await K.from("replies").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}function se(I,N,b){r(S=>S.map(T=>{if(I==="post")return T.id!==N?T:{...T,reactions:b(T.reactions)};const z=T.comments.map(R=>{if(I==="comment"&&R.id===N)return{...R,reactions:b(R.reactions)};const H=R.replies.map(V=>I==="reply"&&V.id===N?{...V,reactions:b(V.reactions)}:V);return{...R,replies:H}});return{...T,comments:z}}))}function q(I,N){for(const b of n){if(I==="post"&&b.id===N)return b.reactions;for(const S of b.comments){if(I==="comment"&&S.id===N)return S.reactions;for(const T of S.replies)if(I==="reply"&&T.id===N)return T.reactions}}return{...De}}async function ie(I,N,b){if(!e)throw new Error("Chưa đăng nhập");const S=q(I,N);se(I,N,T=>{const z=Object.fromEntries(Object.keys(De).map(R=>[R,(T[R]||[]).filter(H=>H!==e.id)]));return z[b]=[...z[b],e.id],z});try{await K.from("reactions").delete().eq("entity_type",I).eq("entity_id",N).eq("user_id",e.id);const{error:T}=await K.from("reactions").insert({entity_type:I,entity_id:N,user_id:e.id,reaction_type:b});if(T)throw T}catch(T){throw se(I,N,()=>S),T}}async function Ce(I,N,b){if(!e)throw new Error("Chưa đăng nhập");const S=q(I,N),T=(S[b]||[]).includes(e.id),z=S;if(T){se(I,N,R=>{const H=Object.fromEntries(Object.keys(De).map(V=>[V,[...R[V]||[]]]));return H[b]=H[b].filter(V=>V!==e.id),H});try{await K.from("reactions").delete().eq("entity_type",I).eq("entity_id",N).eq("user_id",e.id).eq("reaction_type",b)}catch(R){throw se(I,N,()=>z),R}}else await ie(I,N,b)}async function M(I,N,b,S){return D(N,b,S)}async function B(I,N,b,S){return F(b,S)}async function G(I,N,b){return Y(b)}const re=y.useRef({});async function ne(I){if(I)try{re.current[I]=!0;const{data:N}=await K.from("posts").select("*").eq("id",I).single();if(!N)return;const{data:b}=await K.from("comments").select("*").eq("post_id",I).order("created_at",{ascending:!0}),S=(b||[]).map(L=>L.id);let T=[];if(S.length){const{data:L}=await K.from("replies").select("*").in("comment_id",S).order("created_at",{ascending:!0});T=L||[]}const z=[I,...S,...T.map(L=>L.id)];let R=[];if(z.length){const{data:L}=await K.from("reactions").select("*").in("entity_id",z);R=L||[]}const H={};R.forEach(L=>{H[L.entity_id]||(H[L.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),H[L.entity_id][L.reaction_type]=[...H[L.entity_id][L.reaction_type],L.user_id]});const V={};T.forEach(L=>{V[L.comment_id]||(V[L.comment_id]=[]),V[L.comment_id].push({id:L.id,authorId:L.author_id,content:L.content||"",image:L.image_url||null,createdAt:L.created_at,updatedAt:L.updated_at,deleted:L.deleted,reactions:H[L.id]||{...De}})});const ee=(b||[]).map(L=>({id:L.id,authorId:L.author_id,content:L.content||"",image:L.image_url||null,createdAt:L.created_at,updatedAt:L.updated_at,deleted:L.deleted,reactions:H[L.id]||{...De},replies:V[L.id]||[]}));r(L=>L.map(Z=>{if(Z.id!==I)return Z;const U=Z.comments.filter(Pe=>Pe.pending),ge=[...ee];return U.forEach(Pe=>{ge.some(be=>be.authorId===Pe.authorId&&be.content===Pe.content)||ge.push(Pe)}),{id:N.id,authorId:N.author_id,content:N.content||"",images:N.images||[],createdAt:N.created_at,updatedAt:N.updated_at,deleted:N.deleted,reactions:H[N.id]||{...De},comments:ge.sort((Pe,be)=>new Date(Pe.createdAt)-new Date(be.createdAt))}}))}finally{delete re.current[I]}}function nt(I){return!!re.current[I]}async function Te(I,N){await ie("post",I,N)}async function St(I,N,b){await ie("comment",N,b)}async function Le(I,N,b){await Ce("comment",N,b)}async function Ke(I,N,b,S){await ie("reply",b,S)}async function Rr(I,N,b,S){await Ce("reply",b,S)}const Lt={posts:n,loading:s,profiles:a,usersMap:a,createPost:w,updatePost:k,deletePost:x,restorePost:p,hardDeletePost:m,addComment:_,updateComment:O,deleteComment:j,addReply:M,updateReply:B,deleteReply:G,setReaction:ie,toggleReaction:Ce,refreshPost:ne,isRefreshing:nt,choosePostReaction:Te,chooseCommentReaction:St,toggleCommentReaction:Le,chooseReplyReaction:Ke,toggleReplyReaction:Rr};return l.createElement(Gf.Provider,{value:Lt},t)}function It(){return y.useContext(Gf)}async function sw(t,e={}){const{maxDimension:n=1920,targetMaxBytes:r=350*1024,initialQuality:a=.85,minQuality:i=.55,qualityStep:s=.1,mime:o="image/webp"}=e;if(!t||!t.type.startsWith("image/")||t.type==="image/gif")return t;let u;try{u=await createImageBitmap(t)}catch{return t}let{width:c,height:d}=u;const h=Math.min(1,n/Math.max(c,d));h<1&&(c=Math.round(c*h),d=Math.round(d*h));const f=document.createElement("canvas");f.width=c,f.height=d,f.getContext("2d").drawImage(u,0,0,c,d);let w=a,k=null;for(;w>=i;){const m=await new Promise(g=>f.toBlob(g,o,w));if(!m)break;if(m.size<=r){k=m;break}(!k||m.size<k.size)&&(k=m),w-=s}if(!k||k.size>=t.size)return t;const x=o.split("/")[1]||"webp",p=t.name.replace(/\.[^.]+$/,"")+"."+x;return new File([k],p,{type:o,lastModified:Date.now()})}async function Jf(t,e){const n=[];for(const r of t)n.push(await sw(r,e));return n}function Qf(){const{user:t,authenticated:e}=Fe(),{createPost:n}=It(),[r,a]=y.useState(""),[i,s]=y.useState([]),[o,u]=y.useState(null),[c,d]=y.useState(!1),h=y.useRef(null),f=y.useRef(null);y.useEffect(()=>{c&&h.current&&h.current.focus()},[c]),y.useEffect(()=>{function m(g){g.key==="Escape"&&d(!1)}return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]);const v=!e;async function w(m){const g=Array.from(m.target.files||[]);if(!g.length)return;const _=Math.max(0,10-i.length),C=g.slice(0,_),P=await Jf(C,{targetMaxBytes:350*1024,maxDimension:1920,initialQuality:.85});for(const A of P){const O=new FileReader;O.onload=j=>{s(D=>[...D,j.target.result])},O.readAsDataURL(A)}}function k(m){s(g=>g.filter((E,_)=>_!==m))}function x(){s([])}function p(m){if(m.preventDefault(),v)return;const g=r.trim();if(!g&&i.length===0){u("Nội dung trống");return}try{n(g,i),a(""),s([]),u(null),d(!1)}catch(E){u(E.message)}}return l.createElement(l.Fragment,null,l.createElement("div",{className:"bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-3xl p-4 shadow flex items-center gap-4"},l.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden flex-shrink-0"},t!=null&&t.avatar?l.createElement("img",{src:t.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((t==null?void 0:t.name)||(t==null?void 0:t.email)||"?").charAt(0).toUpperCase()),l.createElement("button",{disabled:v,onClick:()=>d(!0),className:"flex-1 text-left text-sm px-4 py-2 rounded-full bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-600 dark:text-gray-300 disabled:opacity-60"},v?"Đăng nhập để viết...":"Bạn đang nghĩ gì?"),l.createElement("button",{disabled:v,onClick:()=>d(!0),className:"hidden sm:inline-flex items-center gap-1 text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-gray-600"},"🖼️ ",l.createElement("span",null,"Ảnh"))),c&&l.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4"},l.createElement("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>d(!1)}),l.createElement("div",{ref:f,className:"relative w-full max-w-lg bg-white dark:bg-gray-800/90 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl p-5 flex flex-col gap-4 animate-scaleFade"},l.createElement("div",{className:"flex items-center justify-between"},l.createElement("h2",{className:"text-base font-semibold text-gray-800 dark:text-gray-100"},"Tạo bài viết"),l.createElement("button",{onClick:()=>d(!1),className:"w-8 h-8 inline-flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-300","aria-label":"Đóng"},"✕")),l.createElement("div",{className:"flex items-center gap-3"},l.createElement("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden flex-shrink-0"},t!=null&&t.avatar?l.createElement("img",{src:t.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((t==null?void 0:t.name)||(t==null?void 0:t.email)||"?").charAt(0).toUpperCase()),l.createElement("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200"},(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Ẩn danh")),l.createElement("form",{onSubmit:p,className:"flex flex-col gap-4"},l.createElement("textarea",{ref:h,disabled:v,value:r,onChange:m=>a(m.target.value),placeholder:v?"Đăng nhập để viết...":"Bạn đang nghĩ gì?",className:"w-full min-h-[140px] resize-y bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),i.length>0&&l.createElement("div",{className:"grid gap-2",style:{gridTemplateColumns:i.length===1?"1fr":i.length===2?"repeat(2,1fr)":i.length===3?"repeat(3,1fr)":"repeat(4,1fr)"}},i.slice(0,4).map((m,g)=>{const E=g===3&&i.length>4;return l.createElement("div",{key:g,className:"relative group aspect-square overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 bg-black/5"},l.createElement("img",{src:m,alt:"img"+g,className:"object-cover w-full h-full"}),!E&&l.createElement("button",{type:"button",onClick:()=>k(g),className:"absolute top-1.5 right-1.5 w-6 h-6 rounded-full bg-black/60 hover:bg-black/80 text-white text-xs flex items-center justify-center"},"✕"),E&&l.createElement("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-xl font-semibold"},"+",i.length-3))}),i.length>4&&l.createElement("div",{className:"col-span-full text-[11px] text-gray-500 dark:text-gray-400"},"Tổng ",i.length," ảnh (chỉ hiển thị 4, khi đăng sẽ lưu tất cả)"),l.createElement("button",{type:"button",onClick:x,className:"col-span-full justify-self-end text-[11px] text-red-500 hover:underline"},"Xóa tất cả")),l.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},l.createElement("div",{className:"flex items-center gap-2"},l.createElement("label",{className:"cursor-pointer text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 hover:bg-green-100 dark:hover:bg-gray-600 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 flex items-center gap-2"},l.createElement("span",{className:"text-base"},"🖼️"),l.createElement("span",null,"Ảnh"),l.createElement("input",{multiple:!0,type:"file",accept:"image/*",className:"hidden",onChange:w}))),l.createElement("div",{className:"flex items-center gap-2 ml-auto"},l.createElement("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm font-medium text-gray-600 dark:text-gray-200"},"Hủy"),l.createElement("button",{disabled:v,className:"px-6 py-2.5 rounded-xl bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white text-sm font-semibold shadow"},"Đăng"))),o&&l.createElement("div",{className:"text-xs text-red-500 -mt-2"},o)))))}const Js=[{s:60,name:"giây"},{s:60,name:"phút"},{s:24,name:"giờ"},{s:30,name:"ngày"},{s:12,name:"tháng"}];function Sr(t){const e=typeof t=="string"?Date.parse(t):typeof t=="number"?t:NaN;if(isNaN(e))return"";const n=Math.floor((Date.now()-e)/1e3);if(n<5)return"vừa xong";let r=n,a=0;for(;a<Js.length&&r>=Js[a].s;)r=Math.floor(r/Js[a].s),a++;const s=["giây","phút","giờ","ngày","tháng","năm"][a];return`${r} ${s} trước`}const ow=[{type:"like",label:"Thích",icon:"👍"},{type:"love",label:"Yêu thích",icon:"❤️"},{type:"haha",label:"Haha",icon:"😂"},{type:"wow",label:"Wow",icon:"😮"},{type:"sad",label:"Buồn",icon:"😢"},{type:"angry",label:"Phẫn nộ",icon:"😡"}];function il({onSelect:t,onClose:e,anchorRect:n}){const r=y.useRef(null);y.useEffect(()=>{function o(u){r.current&&!r.current.contains(u.target)&&e()}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[e]);const a=260,i=70;let s={};if(n){let u=n.left+n.width/2-a/2;u=Math.max(8,Math.min(window.innerWidth-a-8,u));let c=n.top-i-8;c<4&&(c=n.bottom+8),s={position:"fixed",top:c,left:u,width:a,zIndex:200}}return l.createElement("div",{ref:r,style:s,className:"reaction-picker select-none"},l.createElement("div",{className:"flex gap-2 bg-white dark:bg-gray-800 px-3 py-2 rounded-full shadow-xl border border-gray-200 dark:border-gray-600"},ow.map(o=>l.createElement("button",{key:o.type,onClick:()=>{t(o.type),e()},className:"flex flex-col items-center text-xs focus:outline-none group"},l.createElement("span",{className:"text-2xl leading-none group-hover:scale-125 transition-transform drop-shadow"},o.icon),l.createElement("span",{className:"mt-1 text-[10px] text-gray-500 dark:text-gray-400"},o.label)))))}const ur={like:"👍",love:"❤️",haha:"😂",wow:"😮",sad:"😢",angry:"😡"};function lw({post:t}){const{updatePost:e,deletePost:n,restorePost:r,hardDeletePost:a}=It(),{user:i}=Fe(),[s,o]=y.useState(!1),[u,c]=y.useState(!1),[d,h]=y.useState(t.content),[f,v]=y.useState(t.images||[]),[w,k]=y.useState(null),x=y.useRef(null),p=y.useRef(null);l.useEffect(()=>{function P(A){x.current&&!x.current.contains(A.target)&&o(!1)}return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]),l.useEffect(()=>{u&&p.current&&p.current.focus()},[u]),l.useEffect(()=>{if(u)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[u]),l.useEffect(()=>{function P(A){A.key==="Escape"&&u&&c(!1)}return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[u]);async function m(P){const A=Array.from(P.target.files||[]);if(!A.length)return;const O=Math.max(0,10-f.length),j=A.slice(0,O),D=await Jf(j,{targetMaxBytes:350*1024,maxDimension:1920,initialQuality:.85});for(const F of D){const Y=new FileReader;Y.onload=se=>v(q=>[...q,se.target.result]),Y.readAsDataURL(F)}}function g(){if(!d.trim()&&f.length===0){k("Nội dung trống");return}e(t.id,{content:d,images:f}),k(null),c(!1)}function E(P){v(A=>A.filter((O,j)=>j!==P))}function _(){v([])}function C(){h(t.content),v(t.images||[]),k(null),c(!0),o(!1)}return l.createElement(l.Fragment,null,l.createElement("div",{className:"relative",ref:x},l.createElement("button",{type:"button",onClick:()=>o(P=>!P),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500"},"⋮"),s&&l.createElement("div",{className:"absolute right-0 mt-1 w-36 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 shadow-lg py-1 z-30 text-xs"},!t.deleted&&l.createElement("button",{onClick:C,className:"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700"},"Sửa bài"),!t.deleted&&l.createElement("button",{onClick:()=>{confirm("Đánh dấu xoá bài viết?")&&n(t.id)},className:"w-full text-left px-3 py-2 hover:bg-red-50 dark:hover:bg-gray-700 text-red-600"},i!=null&&i.isAdmin?"Xoá mềm (Admin)":"Xoá"),t.deleted&&(i==null?void 0:i.isAdmin)&&l.createElement("button",{onClick:()=>r(t.id),className:"w-full text-left px-3 py-2 hover:bg-green-50 dark:hover:bg-gray-700 text-green-600"},"Khôi phục"),t.deleted&&(i==null?void 0:i.isAdmin)&&l.createElement("button",{onClick:()=>{confirm("Xóa vĩnh viễn?")&&a(t.id)},className:"w-full text-left px-3 py-2 hover:bg-red-100 dark:hover:bg-gray-700 text-red-600"},"Xóa vĩnh viễn"))),u&&l.createElement("div",{className:"fixed inset-0 z-[220] flex items-start md:items-center justify-center p-0 md:p-8"},l.createElement("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>c(!1)}),l.createElement("div",{className:"relative w-full max-w-xl bg-white dark:bg-gray-900 rounded-none md:rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 md:p-8 flex flex-col gap-5 animate-scaleFade"},l.createElement("div",{className:"flex items-center justify-between"},l.createElement("h2",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-gray-100"},"Chỉnh sửa bài viết"),l.createElement("button",{onClick:()=>c(!1),className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500"},"✕")),l.createElement("textarea",{ref:p,value:d,onChange:P=>h(P.target.value),placeholder:"Nội dung...",className:"w-full min-h-[160px] resize-y bg-gray-50 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-600 rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),f.length>0&&l.createElement("div",{className:"grid gap-2",style:{gridTemplateColumns:f.length===1?"1fr":f.length===2?"repeat(2,1fr)":f.length===3?"repeat(3,1fr)":"repeat(4,1fr)"}},f.slice(0,4).map((P,A)=>{const O=A===3&&f.length>4;return l.createElement("div",{key:A,className:"relative group aspect-square rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700"},l.createElement("img",{src:P,alt:"img"+A,className:"object-cover w-full h-full"}),!O&&l.createElement("button",{type:"button",onClick:()=>E(A),className:"absolute top-1.5 right-1.5 w-6 h-6 rounded-full bg-black/60 hover:bg-black/80 text-white text-xs flex items-center justify-center"},"✕"),O&&l.createElement("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-xl font-semibold"},"+",f.length-3))}),f.length>4&&l.createElement("div",{className:"col-span-full text-[11px] text-gray-500 dark:text-gray-400"},"Tổng ",f.length," ảnh"),l.createElement("button",{type:"button",onClick:_,className:"col-span-full justify-self-end text-[11px] text-red-500 hover:underline"},"Xóa tất cả")),l.createElement("div",{className:"flex items-center justify-between flex-wrap gap-3"},l.createElement("div",{className:"flex items-center gap-3"},l.createElement("label",{className:"cursor-pointer text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 hover:bg-green-100 dark:hover:bg-gray-600 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 flex items-center gap-2"},l.createElement("span",{className:"text-base"},"🖼️"),l.createElement("span",null,"Ảnh"),l.createElement("input",{multiple:!0,type:"file",accept:"image/*",className:"hidden",onChange:m})),f.length>0&&l.createElement("button",{type:"button",onClick:_,className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200"},"Xóa hết")),l.createElement("div",{className:"flex items-center gap-2 ml-auto"},l.createElement("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 rounded-xl bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-medium text-gray-700 dark:text-gray-200"},"Hủy"),l.createElement("button",{type:"button",onClick:g,className:"px-6 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-xs font-semibold shadow"},"Lưu"))),w&&l.createElement("div",{className:"text-xs text-red-500"},w))))}function uw({post:t}){const{user:e}=Fe(),{choosePostReaction:n,toggleReaction:r}=It(),a=e==null?void 0:e.id,[i,s]=y.useState(!1),o=y.useRef(null),u=l.useMemo(()=>a&&Object.keys(t.reactions).find(f=>(t.reactions[f]||[]).includes(a))||null,[a,t.reactions]);function c(){a&&(u?r(t.id,u):s(!0))}const d=Object.values(t.reactions).reduce((f,v)=>f+((v==null?void 0:v.length)||0),0),h=Object.entries(t.reactions).filter(([,f])=>f.length>0).sort((f,v)=>v[1].length-f[1].length).slice(0,3).map(([f])=>ur[f]);return l.createElement("div",{className:"mt-4"},l.createElement("div",{className:"flex items-center gap-4"},l.createElement("button",{ref:o,onClick:c,onMouseEnter:()=>{u||s(!0)},onMouseLeave:()=>{},className:`px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 border transition ${u?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800/70 border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"}`},u?ur[u]:"👍",l.createElement("span",null,u?"Bạn":"Thích")),d>0&&l.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1"},h.map(f=>l.createElement("span",{key:f},f))," ",l.createElement("span",{className:"ml-1"},d))),i&&o.current&&l.createElement(il,{anchorRect:o.current.getBoundingClientRect(),onSelect:f=>n(t.id,f),onClose:()=>s(!1)}))}function cw({post:t,preview:e=!1,onRequestExpand:n}){const{user:r,authenticated:a}=Fe(),{addComment:i,usersMap:s={},chooseCommentReaction:o,toggleCommentReaction:u,deleteComment:c,updateComment:d,addReply:h,chooseReplyReaction:f,toggleReplyReaction:v,deleteReply:w,updateReply:k}=It(),[x,p]=y.useState(""),[m,g]=y.useState(!1),[E,_]=y.useState(""),[C,P]=y.useState(null),[A,O]=y.useState(null),[j,D]=y.useState(null),[F,Y]=y.useState(""),[se,q]=y.useState(null),[ie,Ce]=y.useState(""),[M,B]=y.useState(null),[G,re]=y.useState({}),[ne,nt]=y.useState(null),[Te,St]=y.useState({}),Le=y.useRef({}),Ke=y.useRef({});l.useEffect(()=>{function S(T){if(!(T.target.closest&&T.target.closest(".reaction-picker"))){if(C){const z=Le.current[C];z&&!z.contains(T.target)&&P(null)}if(M){const z=Ke.current[M];z&&!z.contains(T.target)&&B(null)}}}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[C,M]);function Rr(S){var R;const T=(R=S.target.files)==null?void 0:R[0];if(!T||T.size>1024*1024)return;const z=new FileReader;z.onload=H=>nt(H.target.result),z.readAsDataURL(T)}function Ua(S,T){var H;const z=(H=S.target.files)==null?void 0:H[0];if(!z||z.size>1024*1024)return;const R=new FileReader;R.onload=V=>St(ee=>({...ee,[T]:V.target.result})),R.readAsDataURL(z)}function Lt(S){St(T=>({...T,[S]:null}))}async function I(S){if(S.preventDefault(),!a||m)return;const T=x.trim();if(!(!T&&!ne)){g(!0),_("");try{const z=await i(t.id,T,ne);p(""),nt(null)}catch(z){_(z.message||"Lỗi gửi bình luận")}finally{g(!1)}}}const N=t.comments,b=e?N.slice(-2):N;return l.createElement("div",{className:"mt-3 space-y-3"},l.createElement("div",{className:"space-y-2"},b.map(S=>{var ee;const T=s[S.authorId]||{},z=T.name||S.authorName||"Ẩn danh",R=T.avatar||S.authorAvatar,H=r?Object.keys(S.reactions||{}).find(L=>{var Z;return(((Z=S.reactions)==null?void 0:Z[L])||[]).includes(r.id)}):null,V=S.reactions?Object.values(S.reactions).reduce((L,Z)=>L+((Z==null?void 0:Z.length)||0),0):0;return l.createElement("div",{key:S.id,className:"flex gap-2 items-start"},l.createElement("button",{type:"button",onClick:()=>window.location.href=`/profile/${S.authorId}`,className:"w-7 h-7 rounded-full bg-green-600 text-white flex items-center justify-center text-xs font-semibold overflow-hidden focus:outline-none focus:ring-2 focus:ring-green-500"},R?l.createElement("img",{src:R,alt:"avatar",className:"w-full h-full object-cover"}):z.charAt(0).toUpperCase()),l.createElement("div",{className:"bg-gray-100 dark:bg-gray-800/70 px-3 py-2 rounded-xl text-xs leading-relaxed flex-1"},l.createElement("div",{className:"flex justify-between gap-3"},l.createElement("button",{type:"button",onClick:()=>window.location.href=`/profile/${S.authorId}`,className:"font-semibold text-left text-gray-800 dark:text-gray-100 hover:underline"},z),((r==null?void 0:r.id)===S.authorId||(r==null?void 0:r.isAdmin))&&l.createElement(Fc,{onEdit:()=>{D(S.id),Y(S.content)},onDelete:()=>c(t.id,S.id)})),j===S.id?l.createElement("div",{className:"mt-1 space-y-2"},l.createElement("textarea",{value:F,onChange:L=>Y(L.target.value),rows:2,className:"w-full resize-none p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900/60 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("div",{className:"flex gap-2"},l.createElement("button",{onClick:()=>{d(t.id,S.id,F),D(null)},className:"px-3 py-1 rounded-md bg-green-600 text-white text-[11px]"},"Lưu"),l.createElement("button",{onClick:()=>{D(null),Y("")},className:"px-3 py-1 rounded-md bg-gray-300 dark:bg-gray-700 text-[11px]"},"Hủy"))):l.createElement("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words"},S.content,S.pending&&l.createElement("span",{className:"ml-2 inline-flex items-center gap-1 text-[10px] text-orange-500 animate-pulse"},"⏳ đang gửi...")),S.image&&l.createElement("div",{className:"mt-2"},l.createElement("img",{src:S.image,alt:"comment",className:"w-40 max-h-40 object-cover rounded-lg border border-gray-300 dark:border-gray-600"})),l.createElement("div",{className:"mt-1 flex items-center gap-2"},l.createElement("span",{className:"text-[10px] text-gray-400"},Sr(S.createdAt)),l.createElement("button",{onClick:()=>{r&&(H?u(t.id,S.id,H):P(S.id))},ref:L=>Le.current[S.id]=L,className:`px-2 py-0.5 rounded-full border text-[10px] flex items-center gap-1 ${H?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`},H?ur[H]:(()=>{const L=Object.entries(S.reactions||{}).filter(([,Z])=>Z==null?void 0:Z.length).sort((Z,U)=>U[1].length-Z[1].length);return L.length?ur[L[0][0]]:"👍"})()," ",V>0&&l.createElement("span",null,V)),l.createElement("button",{onClick:()=>O(A===S.id?null:S.id),className:"text-[10px] text-green-600 hover:underline"},A===S.id?"Đóng":"Trả lời")),A===S.id&&l.createElement("div",{className:"mt-2 flex gap-2 items-start"},l.createElement("textarea",{value:G[S.id]||"",onChange:L=>re(Z=>({...Z,[S.id]:L.target.value})),rows:2,className:"flex-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900/60 resize-none focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Viết phản hồi..."}),l.createElement("div",{className:"flex flex-col items-center gap-2"},l.createElement("label",{className:"text-[10px] cursor-pointer px-2 py-1 rounded bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-600 dark:text-green-300"},"Ảnh",l.createElement("input",{type:"file",accept:"image/*",className:"hidden",onChange:L=>Ua(L,S.id)})),Te[S.id]&&l.createElement("div",{className:"relative w-16 h-16"},l.createElement("img",{src:Te[S.id],alt:"reply",className:"w-16 h-16 object-cover rounded border border-gray-300 dark:border-gray-600"}),l.createElement("button",{type:"button",onClick:()=>Lt(S.id),className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-black/70 text-white text-[10px] flex items-center justify-center"},"✕"))),l.createElement("button",{onClick:()=>{const L=(G[S.id]||"").trim();!L&&!Te[S.id]||(h(t.id,S.id,L,Te[S.id]||null),re(Z=>({...Z,[S.id]:""})),Lt(S.id),O(null))},className:"px-3 py-2 rounded-lg bg-green-600 text-white text-[11px]"},"Gửi")),((ee=S.replies)==null?void 0:ee.length)>0&&l.createElement("div",{className:"mt-3 space-y-2 border-l border-gray-300 dark:border-gray-700 pl-3"},S.replies.map(L=>{const Z=s[L.authorId]||{},U=Z.name||"Ẩn danh",ge=r?Object.keys(L.reactions||{}).find(be=>{var Oe;return(((Oe=L.reactions)==null?void 0:Oe[be])||[]).includes(r.id)}):null,Pe=L.reactions?Object.values(L.reactions).reduce((be,Oe)=>be+((Oe==null?void 0:Oe.length)||0),0):0;return l.createElement("div",{key:L.id,className:"flex gap-2 items-start"},l.createElement("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white text-[10px] flex items-center justify-center overflow-hidden"},Z.avatar?l.createElement("img",{src:Z.avatar,alt:"avatar",className:"w-full h-full object-cover"}):U.charAt(0).toUpperCase()),l.createElement("div",{className:"flex-1 bg-gray-50 dark:bg-gray-900/60 rounded-xl px-3 py-2"},l.createElement("div",{className:"flex justify-between gap-2"},l.createElement("span",{className:"font-semibold text-gray-700 dark:text-gray-200 text-[11px]"},U),((r==null?void 0:r.id)===L.authorId||(r==null?void 0:r.isAdmin))&&l.createElement(Fc,{small:!0,onEdit:()=>{q(L.id),Ce(L.content)},onDelete:()=>w(t.id,S.id,L.id)})),se===L.id?l.createElement("div",{className:"mt-1 space-y-2"},l.createElement("textarea",{value:ie,onChange:be=>Ce(be.target.value),rows:2,className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800/60 resize-none focus:outline-none focus:ring-2 focus:ring-green-500 text-[11px]"}),l.createElement("div",{className:"flex gap-2"},l.createElement("button",{onClick:()=>{k(t.id,S.id,L.id,ie),q(null)},className:"px-3 py-1 rounded-md bg-green-600 text-white text-[10px]"},"Lưu"),l.createElement("button",{onClick:()=>{q(null),Ce("")},className:"px-3 py-1 rounded-md bg-gray-300 dark:bg-gray-700 text-[10px]"},"Hủy"))):l.createElement("div",{className:"text-[11px] text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words"},L.content),L.image&&l.createElement("div",{className:"mt-2"},l.createElement("img",{src:L.image,alt:"reply",className:"w-32 h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600"})),l.createElement("div",{className:"mt-1 flex items-center gap-2"},l.createElement("span",{className:"text-[9px] text-gray-400"},Sr(L.createdAt)),l.createElement("button",{onClick:()=>{r&&(ge?v(t.id,S.id,L.id,ge):B(L.id))},ref:be=>Ke.current[L.id]=be,className:`px-2 py-0.5 rounded-full border text-[9px] flex items-center gap-1 ${ge?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`},ge?ur[ge]:(()=>{const be=Object.entries(L.reactions||{}).filter(([,Oe])=>Oe==null?void 0:Oe.length).sort((Oe,Ge)=>Ge[1].length-Oe[1].length);return be.length?ur[be[0][0]]:"👍"})()," ",Pe>0&&l.createElement("span",null,Pe)))))}))))}),e&&N.length>b.length&&l.createElement("button",{type:"button",onClick:n,className:"text-[11px] text-green-600 hover:underline px-2"},"Xem thêm ",N.length-b.length," bình luận..."),C&&Le.current[C]&&l.createElement(il,{anchorRect:Le.current[C].getBoundingClientRect(),onSelect:S=>{o(t.id,C,S),P(null)},onClose:()=>P(null)}),M&&Ke.current[M]&&l.createElement(il,{anchorRect:Ke.current[M].getBoundingClientRect(),onSelect:S=>{var T;f(t.id,(T=t.comments.find(z=>{var R;return(R=z.replies)==null?void 0:R.some(H=>H.id===M)}))==null?void 0:T.id,M,S),B(null)},onClose:()=>B(null)})),l.createElement("form",{onSubmit:I,className:"flex items-center gap-2 flex-wrap"},l.createElement("div",{className:"flex items-center gap-2 flex-1"},l.createElement("input",{disabled:!a,value:x,onChange:S=>p(S.target.value),placeholder:a?"Viết bình luận...":"Đăng nhập để bình luận",name:"comment",id:`comment-input-${t.id}`,autoComplete:"off",className:"flex-1 text-xs px-3 py-2 rounded-full bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("label",{className:"text-[10px] cursor-pointer px-2 py-1 rounded bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-600 dark:text-green-300"},"Ảnh",l.createElement("input",{type:"file",accept:"image/*",className:"hidden",onChange:Rr}))),ne&&l.createElement("div",{className:"relative w-16 h-16"},l.createElement("img",{src:ne,alt:"comment",className:"w-16 h-16 object-cover rounded border border-gray-300 dark:border-gray-600"}),l.createElement("button",{type:"button",onClick:()=>nt(null),className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-black/70 text-white text-[10px] flex items-center justify-center"},"✕")),l.createElement("button",{disabled:!a||!x.trim()&&!ne||m,className:"text-xs px-3 py-2 rounded-full bg-green-600 text-white disabled:opacity-50"},m?"Đang gửi...":"Gửi")),E&&l.createElement("div",{className:"text-[11px] text-red-500"},E))}function Fc({onEdit:t,onDelete:e,small:n}){const[r,a]=y.useState(!1),i=y.useRef(null),{user:s}=Fe();return l.useEffect(()=>{function o(u){i.current&&!i.current.contains(u.target)&&a(!1)}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),l.createElement("div",{className:"relative",ref:i},l.createElement("button",{type:"button",onClick:()=>a(o=>!o),className:`${n?"w-6 h-6 text-[10px]":"w-6 h-6"} flex items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500`},"⋮"),r&&l.createElement("div",{className:"absolute right-0 mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 text-[11px] z-40"},l.createElement("button",{onClick:()=>{t(),a(!1)},className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700"},"Sửa"),l.createElement("button",{onClick:()=>{e(),a(!1)},className:"w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-gray-700 text-red-600"},s!=null&&s.isAdmin?"Xóa (Admin)":"Xóa")))}function dw({post:t,onClose:e}){return l.createElement("div",{className:"fixed inset-0 z-[160] flex items-start md:items-center justify-center p-0 md:p-8"},l.createElement("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),l.createElement("div",{className:"relative w-full md:max-w-3xl max-h-[95vh] overflow-y-auto bg-white dark:bg-gray-900 rounded-none md:rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700"},l.createElement("button",{onClick:e,className:"absolute top-3 right-3 w-9 h-9 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white text-lg"},"✕"),l.createElement("div",{className:"p-6 md:p-10"},l.createElement(Xf,{post:t,focusMode:!0,onCloseFocus:e}))))}function Xf({post:t,focusMode:e=!1,onCloseFocus:n,onOpenFocus:r}){var k;const{usersMap:a={}}=It(),{user:i}=Fe(),s=a[t.authorId]||{},[o,u]=y.useState(!1),[c,d]=y.useState(0);function h(x){d(x),u(!0),document.body.style.overflow="hidden"}function f(){u(!1),document.body.style.overflow=""}function v(){d(x=>(x+1)%t.images.length)}function w(){d(x=>(x-1+t.images.length)%t.images.length)}return l.useEffect(()=>{function x(p){o&&(p.key==="Escape"&&f(),p.key==="ArrowRight"&&v(),p.key==="ArrowLeft"&&w())}return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[o,(k=t.images)==null?void 0:k.length]),l.createElement("article",{className:`${e?"bg-transparent shadow-none p-0 border-0":"bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 shadow-lg"} rounded-3xl p-0`},l.createElement("div",{className:`${e?"":"p-8 md:p-10"} rounded-3xl`},l.createElement("header",{className:"flex items-start gap-4"},l.createElement("button",{type:"button",onClick:()=>window.location.href=`/profile/${t.authorId}`,className:"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden ring-0 focus:outline-none focus:ring-2 focus:ring-green-500 transition"},s!=null&&s.avatar?l.createElement("img",{src:s.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((s==null?void 0:s.name)||(s==null?void 0:s.email)||"?").charAt(0).toUpperCase()),l.createElement("div",{className:"flex-1 min-w-0"},l.createElement("button",{type:"button",onClick:()=>window.location.href=`/profile/${t.authorId}`,className:"font-semibold text-left text-[17px] md:text-[18px] text-gray-800 dark:text-gray-100 leading-tight hover:underline"},(s==null?void 0:s.name)||"Ẩn danh"),l.createElement("div",{className:"text-[12px] text-gray-400 flex gap-2 items-center"},Sr(t.createdAt),l.createElement("span",{className:"hidden md:inline text-gray-500"},"• ",new Date(t.createdAt).toLocaleString()),t.updatedAt&&l.createElement("span",null,"(đã sửa)"),t.deleted&&l.createElement("span",{className:"text-red-500 font-medium"},"[ĐÃ XÓA]"))),((i==null?void 0:i.id)===t.authorId||(i==null?void 0:i.isAdmin))&&l.createElement(lw,{post:t})),t.content&&l.createElement("div",{className:"mt-6 text-[16px] md:text-[17px] leading-relaxed whitespace-pre-wrap break-words text-gray-800 dark:text-gray-200"},t.content),t.images&&t.images.length>0&&l.createElement("div",{className:"mt-6"},!e&&l.createElement("div",{className:`grid gap-2 ${t.images.length===1?"grid-cols-1":"grid-cols-2"}`},t.images.slice(0,4).map((x,p)=>{const m=p===3&&t.images.length>4,g=t.images.length===1;return l.createElement("button",{type:"button",onClick:()=>h(p),key:p,className:`group relative overflow-hidden rounded-2xl border border-gray-200 dark:border-gray-700 bg-black/5 ${g?"aspect-[4/3] md:aspect-[4/3]":"aspect-square"} flex items-center justify-center`},l.createElement("img",{src:x,alt:"pimg"+p,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),m&&l.createElement("div",{onClick:()=>h(3),className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-3xl font-semibold"},"+",t.images.length-3))})),e&&l.createElement("div",{className:"grid gap-3 md:gap-4",style:{gridTemplateColumns:t.images.length===1?"minmax(0,1fr)":t.images.length===2?"repeat(2,minmax(0,1fr))":"repeat(auto-fill,minmax(220px,1fr))"}},t.images.map((x,p)=>l.createElement("button",{type:"button",onClick:()=>h(p),key:p,className:`relative rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-black/5 group ${t.images.length===1?"aspect-[4/3] md:aspect-[4/3]":"aspect-square md:aspect-[4/3]"} flex items-center justify-center`},l.createElement("img",{src:x,alt:"full"+p,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}))))),o&&l.createElement("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4"},l.createElement("div",{className:"absolute inset-0 bg-black/80",onClick:f}),l.createElement("div",{className:"relative w-full max-w-4xl flex flex-col gap-4"},l.createElement("div",{className:"flex items-center justify-between text-white text-sm px-1"},l.createElement("span",null,c+1,"/",t.images.length),l.createElement("button",{onClick:f,className:"w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white"},"✕")),l.createElement("div",{className:"relative self-center w-[min(100%,880px)] h-[70vh] max-h-[780px] rounded-2xl bg-black flex items-center justify-center shadow-2xl border border-white/10 overflow-hidden"},l.createElement("div",{className:"w-full h-full flex items-center justify-center bg-black"},l.createElement("img",{src:t.images[c],alt:"view",className:"max-w-full max-h-full object-contain"})),t.images.length>1&&l.createElement(l.Fragment,null,l.createElement("button",{onClick:w,className:"absolute left-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/10 hover:bg-white/25 text-white text-xl flex items-center justify-center backdrop-blur-sm"},"‹"),l.createElement("button",{onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/10 hover:bg-white/25 text-white text-xl flex items-center justify-center backdrop-blur-sm"},"›"))),t.images.length>1&&l.createElement("div",{className:"mx-auto w-full max-w-4xl flex flex-wrap gap-2 justify-center"},t.images.map((x,p)=>l.createElement("button",{key:p,onClick:()=>d(p),className:`relative rounded-md overflow-hidden border ${c===p?"border-green-500 shadow-lg":"border-transparent"} bg-white/10 w-16 h-16 md:w-20 md:h-20 group`},l.createElement("img",{src:x,alt:"thumb"+p,className:"w-full h-full object-cover group-hover:opacity-80"})))))),l.createElement(uw,{post:t}),l.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700"},l.createElement("div",{className:"flex items-center justify-between mb-2"},l.createElement("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400"},"Bình luận"),l.createElement(mw,{postId:t.id})),l.createElement(cw,{post:t,preview:!e,onRequestExpand:r})),!e&&l.createElement("div",{className:"mt-6 flex justify-end"},l.createElement(hw,{onOpen:r})),e&&l.createElement("div",{className:"mt-8 flex justify-end"},l.createElement("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-xs font-medium"},"Đóng"))))}function hw({onOpen:t}){return l.createElement("button",{onClick:t,className:"px-5 py-2 rounded-full bg-green-600 hover:bg-green-700 text-white text-sm font-medium shadow"},"Bình luận")}function Yf({post:t}){const[e,n]=y.useState(!1);return l.useEffect(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow=""},[e]),l.createElement(l.Fragment,null,l.createElement(Xf,{post:t,onCloseFocus:()=>n(!1),onOpenFocus:()=>n(!0)}),e&&l.createElement(dw,{post:t,onClose:()=>n(!1)}))}function fw({posts:t}){const{user:e}=Fe(),n=e!=null&&e.isAdmin?t:t.filter(r=>!r.deleted);return n.length?l.createElement("div",{className:"space-y-4"},n.map(r=>l.createElement(Yf,{key:r.id,post:r}))):l.createElement("div",{className:"text-sm text-gray-500 text-center py-10"},"Chưa có bài viết nào")}function mw({postId:t}){const{refreshPost:e,isRefreshing:n}=It(),r=n(t);return l.createElement("button",{type:"button",onClick:()=>e(t),disabled:r,title:"Làm mới bình luận",className:`w-7 h-7 flex items-center justify-center rounded-full border text-gray-500 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-gray-700 text-xs ${r?"animate-spin pointer-events-none opacity-70":""}`,style:{fontSize:"13px"}},r?"↻":"⟳")}function gw(){const[t,e]=y.useState(!1),[n,r]=y.useState(!1),{posts:a}=It(),i=[...a].sort((s,o)=>o.createdAt-s.createdAt);return l.createElement(l.Fragment,null,l.createElement("div",{className:`hero-block ${n?"collapsed":""} relative overflow-hidden transition-all duration-300 ${n?"h-[200px]":"h-[520px]"}`},l.createElement("div",{className:"absolute inset-0 -z-10 pointer-events-none bg-gradient-to-b from-indigo-700 via-sky-600/80 to-transparent dark:from-slate-800 dark:via-slate-800/90 dark:to-transparent"}),l.createElement("div",{className:`container mx-auto px-6 ${n?"py-8":"py-24"} text-center relative z-[1] select-none transition-all duration-300`},l.createElement(iu,{text:"A12K45"}),l.createElement("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg"},"Trường THPT Hoài Đức B"),l.createElement("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan"},"Niên khóa 2022 - 2025")),l.createElement("div",{className:"absolute left-1/2 bottom-2 md:bottom-4 -translate-x-1/2 z-10"},l.createElement("button",{onClick:()=>r(s=>!s),className:"w-12 h-12 rounded-full shadow-xl bg-white/90 dark:bg-gray-900/80 backdrop-blur border border-gray-200 dark:border-gray-600 flex items-center justify-center hover:scale-105 active:scale-95 transition group","aria-label":"Toggle hero"},l.createElement("svg",{className:`w-6 h-6 text-gray-700 dark:text-gray-200 transition-transform duration-500 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("path",{d:"M6 15l6-6 6 6"}))))),l.createElement("main",{className:"relative container mx-auto px-6 pt-10 pb-16 max-w-4xl"},l.createElement("div",{className:"space-y-6 bg-transparent"},l.createElement(Qf,null),l.createElement(fw,{posts:i}))),l.createElement(aw,{open:t,onClose:()=>e(!1)}))}function pw({member:t,onClick:e}){const n=r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/cccccc/ffffff?text=No+Image"};return l.createElement("div",{className:"member-card group relative parallelogram-shape cursor-pointer aspect-[2/3]",onClick:()=>e==null?void 0:e(t)},l.createElement("div",{className:"image-container absolute inset-0 z-[2]"},l.createElement("img",{"data-src":t.avatar,alt:t.name,onError:n,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out lazy-image",loading:"lazy"})),l.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-[1]"}),l.createElement("div",{className:"absolute bottom-0 left-0 w-full p-5 z-[4]"},l.createElement("h3",{className:"text-2xl font-bold text-white image-text-effect tracking-wide"},t.name),l.createElement("p",{className:"text-gray-200 image-text-effect font-medium"},t.nickname)))}function vw({members:t=[],onSelect:e}){y.useEffect(()=>{const r=document.querySelectorAll("img.lazy-image"),a=new IntersectionObserver((o,u)=>{o.forEach(c=>{if(c.isIntersecting){const d=c.target,h=d.getAttribute("data-src");h&&(d.src=h),d.onload=()=>{var f;d.classList.add("loaded"),(f=d.parentElement)==null||f.classList.add("loaded")},u.unobserve(d)}})},{rootMargin:"100px 0px",threshold:.1});r.forEach(o=>a.observe(o));const i=document.querySelectorAll(".member-card"),s=new IntersectionObserver(o=>{o.forEach(u=>{const c=u.target;if(u.isIntersecting){const d=Math.random()*200;setTimeout(()=>c.classList.add("visible"),d)}else c.classList.remove("visible")})},{rootMargin:"0px 0px -50px 0px",threshold:.2});return i.forEach(o=>s.observe(o)),()=>{a.disconnect(),s.disconnect()}},[t]);const n=l.useMemo(()=>{const r=new Set,a=[];return(t||[]).forEach((i,s)=>{const o=(i==null?void 0:i.id)||(i==null?void 0:i.email)||`idx-${s}`;r.has(o)||(r.add(o),a.push(i))}),a},[t]);return l.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"},n.map((r,a)=>{const i=r!=null&&r.id?`mem-${r.id}`:r!=null&&r.email?`mem-${r.email}`:`mem-fallback-${a}`;return l.createElement(pw,{key:i,member:r,onClick:e})}))}function yw({member:t,onClose:e}){var r,a,i;if(y.useEffect(()=>{function s(o){o.key==="Escape"&&(e==null||e())}return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e]),!t)return null;const n=s=>{s.target.onerror=null,s.target.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"};return l.createElement(l.Fragment,null,l.createElement("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:e}),l.createElement("aside",{className:"fixed top-0 right-0 h-full w-full md:w-1/3 bg-white/40 dark:bg-black/60 backdrop-blur-lg border-l border-gray-200 dark:border-gray-700 shadow-2xl z-50 p-8 overflow-y-auto",role:"dialog","aria-modal":"true"},l.createElement("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors","aria-label":"Đóng"},"✕"),l.createElement("div",{className:"text-center pt-8"},l.createElement("img",{src:t.avatar,onError:n,alt:t.name,className:"w-32 h-32 rounded-full mx-auto mb-4 border-4 border-green-400 object-cover shadow-lg"}),l.createElement("h3",{className:"text-3xl font-bold text-green-600 dark:text-green-400"},t.name),l.createElement("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4"},t.nickname),l.createElement("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-left"},t.bio),t.quote&&l.createElement("blockquote",{className:"border-l-4 border-green-200 dark:border-green-700 pl-4 italic text-gray-600 dark:text-gray-400 mb-6 text-left"},l.createElement("p",null,'"',t.quote,'"')),l.createElement("div",{className:"flex justify-center space-x-4"},((r=t.social)==null?void 0:r.facebook)&&l.createElement("a",{href:t.social.facebook,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:text-blue-800"},"FB"),((a=t.social)==null?void 0:a.instagram)&&l.createElement("a",{href:t.social.instagram,target:"_blank",rel:"noreferrer",className:"text-pink-600 hover:text-pink-800"},"IG"),((i=t.social)==null?void 0:i.tiktok)&&l.createElement("a",{href:t.social.tiktok,target:"_blank",rel:"noreferrer",className:"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300"},"TT")))))}const Wi={name:"A12K45",slogan:"Niên khóa 2022 - 2025"},Zf=[{id:1,name:"Nguyễn Công Phong",nickname:"Phong",avatar:"/phong.png",bio:"Cây hài của lớp, luôn mang lại tiếng cười cho mọi người bằng những câu chuyện dí dỏm.",quote:"Một nụ cười bằng mười thang thuốc bổ.",social:{facebook:"",instagram:"https://instagram.com",tiktok:"https://tiktok.com"}},{id:2,name:"Nguyễn Hữu Đương",nickname:"Đương",avatar:"/nguyenhuuduong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách  nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:3,name:"Nguyễn Hữu Huy",nickname:"Phật",avatar:"/huuhuy.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:4,name:"Bùi Tuấn Phong",nickname:"Phong",avatar:"/tuanphong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:5,name:"Nguyễn Đức Nhân",nickname:"Nhân thể",avatar:"/nhan.png",bio:"Lớp trưởng gương mẫu, luôn là người khuấy động phong trào và giúp đỡ bạn bè. Thích đọc sách và tham gia các hoạt động ngoại khóa.",quote:"Không có gì là không thể với một người luôn biết cố gắng.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:6,name:"Nguyễn Xuân Bắc",nickname:"Nhà báo",avatar:"/bac.png",bio:"Ngôi sao thể thao của lớp, đặc biệt giỏi môn bóng rổ. Luôn tràn đầy năng lượng và tinh thần lạc quan.",quote:"Thất bại không phải là kết thúc, mà là cơ hội để bắt đầu lại một cách thông minh hơn.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:"https://tiktok.com"}},{id:7,name:"Ngô Văn Chiến",nickname:"Chiến",avatar:"/chien.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:8,name:"Vũ Xuân Khánh",nickname:"Khánh",avatar:"/xuankhanh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:9,name:"Nguyễn Văn Tài",nickname:"Tài",avatar:"/tai.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:10,name:"Nguyễn Đình Thưởng",nickname:"Thưởng",avatar:"/thuong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:11,name:"Trần Văn Trường",nickname:"Trường",avatar:"/truongtru.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:12,name:"Bùi Đức Thành",nickname:"Nợn",avatar:"/buithanh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:13,name:"Nguyễn Thảo Nguyên",nickname:"Nguyn",avatar:"/nguyen.png",bio:"Có giọng hát truyền cảm và là tâm hồn của đội văn nghệ. Rất yêu thích âm nhạc và nghệ thuật.",quote:"Âm nhạc là cách để tâm hồn cất tiếng.",social:{facebook:"https://facebook.com",instagram:"",tiktok:"https://tiktok.com"}},{id:14,name:"Mai Thị Ngọc Trà",nickname:"Trà",avatar:"/tra.png",bio:"Chuyên gia tin học của lớp, có thể giải quyết mọi vấn đề về máy tính. Ước mơ trở thành kỹ sư phần mềm tại Google.",quote:"Clean code always looks like it was written by someone who cares.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:15,name:"Nguyễn Hoàng Anh",nickname:"Bốn",avatar:"/hoanganh.png",bio:"Lớp phó học tập, luôn đạt thành tích cao và sẵn sàng giảng bài cho các bạn trong lớp.",quote:"Kiến thức là kho báu vô tận.",social:{facebook:"https://facebook.com",instagram:"",tiktok:""}},{id:16,name:"Hoàng Danh Khang",nickname:"Ông trùm A12",avatar:"/dkhang.png",bio:"Tay máy chính của lớp, lưu giữ mọi khoảnh khắc đáng nhớ qua ống kính của mình. Đam mê nhiếp ảnh và du lịch.",quote:"Mỗi bức ảnh là một câu chuyện.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:17,name:"Nguyễn Thành Vinh",nickname:"Vinh",avatar:"/vinh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tỉ mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:18,name:"Đỗ Văn Cương",nickname:"29s6",avatar:"/cuong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:19,name:"Nguyễn Thành Công",nickname:"Công",avatar:"/cong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:20,name:"Lê Văn Đức",nickname:"Lee",avatar:"/leduc.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:21,name:"Nguyễn Bảo Minh",nickname:"Minh",avatar:"/baominh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:22,name:"Ngọ Minh Hoàng",nickname:"Ngọ",avatar:"/ngo.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:23,name:"Nguyễn Nhật Khánh",nickname:"Khánh",avatar:"/nkhanh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:24,name:"Nguyễn Văn Đức",nickname:"nvd",avatar:"/nduc.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:25,name:"Nguyễn Bá Huy",nickname:"Bá Xe",avatar:"/huyba.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:26,name:"Phó Đình Khương Duy",nickname:"Duy",avatar:"/duy.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:27,name:"Đinh Trọng Khang",nickname:"Khang ghẻ",avatar:"/dinhtrongkhang.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:46,name:"Đặng Trần Quốc Huy",nickname:"Giáo Sư",avatar:"/qhuy.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:28,name:"Tạ Thị Khánh Vy",nickname:"Vy",avatar:"/vy.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:27,name:"Nguyễn Thị Uyển Nhi",nickname:"Uyển Nhi",avatar:"/nhi2.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:30,name:"Nguyễn Như Vân",nickname:"Vân",avatar:"/van.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:31,name:"Nguyễn Thị Huyền",nickname:"Huyền",avatar:"/huyen.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:32,name:"Đào An Duyên",nickname:"Duyên",avatar:"/duyen.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:33,name:"Vũ Thị Trà Mi",nickname:"Mi",avatar:"/mi.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:34,name:"Phạm Thị Ngọc Linh",nickname:"Linh",avatar:"/linh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:35,name:"Cao Thị Ánh",nickname:"Lớp Trưởng",avatar:"/anh2.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:36,name:"Hoàng Thùy Dương",nickname:"Dương",avatar:"/duongchien.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:37,name:"Phạm Nguyên Hưng",nickname:"Hưng",avatar:"/hungkt.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:38,name:"Nguyễn Viết Nhật Minh",nickname:"Bác Sĩ",avatar:"/nminh.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:39,name:"Bùi Hữu Hùng",nickname:"Goat",avatar:"/goat.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:40,name:"Nguyễn Thị Thu Hường",nickname:"Hường",avatar:"/huong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:41,name:"Bùi Văn Cường",nickname:"Cừ",avatar:"/buivancuong.png",bio:"Người quản lý tài chính đáng tin cậy của lớp. Cẩn thận, tì mỉ và rất có trách nhiệm.",quote:"Chi tiêu hợp lý là chìa khóa của sự tự do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:42,name:"Nguyễn Duy Học",nickname:"Học",avatar:"/hoc.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}},{id:43,name:"Lê Khoa Vũ",nickname:"Rất Tiếc Vì Không Có Ảnh",avatar:"/clone1.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}},{id:44,name:"Nguyễn Minh Đức",nickname:"Rất Tiếc Vì Không Có Ảnh",avatar:"/clone1.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}}];function ww(){const[t,e]=y.useState(null);return l.createElement("div",{className:"min-h-screen flex flex-col"},l.createElement("div",{className:"hero-block relative"},l.createElement("div",{className:"container mx-auto px-6 py-24 text-center relative z-[1]"},l.createElement(iu,{text:Wi.name}),l.createElement("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg"},"Trường THPT Hoài Đức B"),l.createElement("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan"},Wi.slogan))),l.createElement("main",{className:"container mx-auto px-6 py-12 flex-1"},l.createElement("section",{className:"mb-20"},l.createElement("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl shadow-xl p-8 md:p-12 lg:flex lg:items-center lg:gap-12 transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]"},l.createElement("div",{className:"lg:w-1/3 mb-8 lg:mb-0 flex justify-center"},l.createElement("div",{className:"teacher-portrait-wrapper parallelogram-shape mx-auto"},l.createElement("img",{src:"/GVN.png",alt:"Ảnh Giáo viên chủ nhiệm",className:"teacher-portrait object-cover"}))),l.createElement("div",{className:"lg:w-2/3 text-center lg:text-left"},l.createElement("h2",{className:"text-3xl font-bold mb-2 text-green-600 dark:text-green-400"},"Giáo Viên Chủ Nhiệm"),l.createElement("h3",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4"},"Cô Phùng Thị Thanh Huyền"),l.createElement("blockquote",{className:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed border-l-4 border-green-200 dark:border-green-700 pl-4 italic"},'"Với tất cả tình yêu thương và tâm huyết, cô mong rằng A12K45 sẽ là một tập thể đoàn kết, luôn giúp đỡ nhau trong học tập và cùng nhau tạo nên những kỷ niệm đẹp đẽ nhất của tuổi học trò. Hãy luôn tự tin, vững bước trên con đường chinh phục tri thức và thực hiện ước mơ của mình nhé!"'),l.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"— Lời nhắn từ cô chủ nhiệm")))),l.createElement("h2",{className:"text-3xl font-bold text-center mb-12"},"Gặp Gỡ Các Thành Viên"),l.createElement(vw,{members:Zf,onSelect:n=>e(n)})),l.createElement(yw,{member:t,onClose:()=>e(null)}))}function Qs({target:t,delayFirst:e=!1}){const[n,r]=y.useState(0);return y.useEffect(()=>{let a,i;const s=e?1400:1e3;function o(u){i||(i=u);const c=Math.min(u-i,s),d=c/s,h=Math.round(t*d);r(h),c<s?a=requestAnimationFrame(o):r(t)}return a=requestAnimationFrame(o),()=>cancelAnimationFrame(a)},[t,e]),l.createElement("div",{className:"text-4xl font-extrabold text-green-600"},n,"%")}const kw=[33,2,35],bw={2:"Top 1",33:"Top 2",35:"Top 3"},xw={2:"27,5",33:"27,25",35:"27"},Ew={2:"HUST.png",33:"HUP.webp",35:"NEU.png"};function _w(){return kw.map(t=>{const e=Zf.find(i=>i.id===t)||{},n=bw[t],r=xw[t],a=Ew[t];return{m:e,label:n,score:r,logo:a,id:t}})}function Sw(){const[t,e]=y.useState(null),[n,r]=y.useState(null),[a,i]=y.useState(!1),s=y.useCallback(async()=>{try{const f=await(await fetch("https://docs.google.com/spreadsheets/d/1GtkKf1O_c0Nt6rIdDJE3BgOM2nEPni6leT9Oa0orFqM/gviz/tq?tqx=out:json&gid=1086408627",{cache:"no-cache"})).text(),v=f.substring(f.indexOf("{"),f.lastIndexOf("}")+1),w=JSON.parse(v),k=w.table&&w.table.cols||[],x=w.table&&w.table.rows||[],p=k.map((C,P)=>P).filter(C=>C<5),m=k.filter((C,P)=>p.includes(P)),g=C=>C==null?"":String(C).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");let E=`<thead class="bg-amber-50 dark:bg-amber-900/30 sticky top-0 z-10">
<tr>`+m.map(C=>`<th class="px-4 py-2 text-left text-xs font-semibold text-amber-800 dark:text-amber-200 tracking-wide uppercase">${g(C.label||C.id)}</th>`).join("")+`</tr>
</thead>`,_='<tbody class="divide-y divide-gray-100 dark:divide-gray-700">';x.forEach((C,P)=>{const A=C.c||[],O=P%2===0?"bg-white dark:bg-gray-900/40":"bg-gray-50 dark:bg-gray-900/20";_+=`<tr class="${O} hover:bg-amber-50/60 dark:hover:bg-amber-900/40 transition-colors">`+p.map(j=>{const D=A[j],F=D&&(D.f||D.v)?D.f||D.v:"";return`<td class="px-4 py-2 text-sm text-gray-700 dark:text-gray-200 whitespace-pre-line">${g(F)}</td>`}).join("")+"</tr>"}),x.length===0?_=`<tbody><tr><td class="px-4 py-6 text-center text-sm text-gray-500" colspan="${m.length}">Không có dữ liệu</td></tr></tbody>`:_+="</tbody>",e(`<table class="min-w-full text-sm align-top">${E}${_}</table>`)}catch(u){console.error(u),r("Không tải được dữ liệu. Vui lòng thử lại sau.")}},[]);y.useEffect(()=>{s()},[s]),y.useEffect(()=>{const u=document.getElementById("counters-section");if(!u)return;if(!("IntersectionObserver"in window)){i(!0);return}const c=new IntersectionObserver((d,h)=>{d.forEach(f=>{f.isIntersecting&&(i(!0),h.disconnect())})},{threshold:.35});return c.observe(u),()=>c.disconnect()},[]);const o=_w();return y.useEffect(()=>{const u=document.getElementById("top3-wrapper");if(!u)return;const c=u.querySelectorAll(".top3-card");return c.forEach(d=>{const h=d.querySelector(".rank-text");if(!h)return;const f=h.dataset.label,w=h.dataset.score.replace(/,/g,".");function k(x){h.textContent!==x&&(h.style.opacity="0",h.style.transform="scale(0.82)",setTimeout(()=>{h.textContent=x,h.style.opacity="1",h.style.transform="scale(1.08)",setTimeout(()=>{h.style.transform="scale(1)"},240)},150))}d.addEventListener("mouseenter",()=>{h.textContent===f&&k(w)}),d.addEventListener("mouseleave",()=>{h.textContent!==f&&k(f)})}),()=>{c.forEach(d=>{d.replaceWith(d)})}},[o]),l.createElement("div",{className:"min-h-screen flex flex-col"},l.createElement("div",{className:"hero-block relative"},l.createElement("div",{className:"container mx-auto px-6 py-24 text-center relative z-[1]"},l.createElement(iu,{text:Wi.name}),l.createElement("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg"},"Trường THPT Hoài Đức B"),l.createElement("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan"},Wi.slogan))),l.createElement("main",{className:"container mx-auto px-6 py-12 flex-1"},l.createElement("section",{id:"counters-section",className:"mb-20"},l.createElement("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl shadow-xl p-8 md:p-12 text-center"},l.createElement("h2",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400"},"Thành Tích"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-center"},l.createElement("div",{className:"p-6 bg-gradient-to-br from-green-50 to-white rounded-xl"},a?l.createElement(Qs,{target:100,delayFirst:!0}):l.createElement("div",{className:"text-4xl font-extrabold text-green-600"},"0%"),l.createElement("p",{className:"mt-2 text-gray-600"},"Số Lượng Học Sinh Trúng Tuyển")),l.createElement("div",{className:"p-6 bg-gradient-to-br from-white to-green-50 rounded-xl"},a?l.createElement(Qs,{target:76}):l.createElement("div",{className:"text-4xl font-extrabold text-green-600"},"0%"),l.createElement("p",{className:"mt-2 text-gray-600"},"Công lập")),l.createElement("div",{className:"p-6 bg-gradient-to-br from-white to-green-50 rounded-xl"},a?l.createElement(Qs,{target:24}):l.createElement("div",{className:"text-4xl font-extrabold text-green-600"},"0%"),l.createElement("p",{className:"mt-2 text-gray-600"},"Dân Lập"))))),l.createElement("h2",{className:"text-3xl font-bold text-center mb-12"},"Top 3 Học Sinh Xuất Sắc Nhất kì thi THPT quốc gia 2025"),l.createElement("div",{id:"top3-wrapper",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-8 mb-16"},o.map(({m:u,label:c,score:d,logo:h,id:f})=>l.createElement("div",{key:f,className:"top3-card member-card visible group relative parallelogram-shape cursor-pointer aspect-[2/3]"},l.createElement("div",{className:"image-container absolute inset-0 z-[2]"},l.createElement("img",{src:u.avatar,alt:u.name,onLoad:v=>{v.currentTarget.classList.add("loaded");const w=v.currentTarget.closest(".image-container");w&&w.classList.add("loaded")},className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out"})),c&&l.createElement("div",{className:"rank-overlay absolute inset-0 flex items-center justify-center z-[3] pointer-events-none transition-opacity"},l.createElement("span",{className:"rank-text text-6xl md:text-7xl font-black text-gray-100/90 select-none tracking-tight transition-transform duration-300","data-label":c,"data-score":d,style:{textShadow:"0 3px 6px rgba(0,0,0,.55),0 0 14px rgba(0,0,0,.35)"}},c)),h&&l.createElement("div",{className:"uni-logo absolute top-2 left-1/2 -translate-x-1/2 z-[5] pointer-events-none"},l.createElement("img",{src:`/${h}`,alt:"Logo",className:"mx-auto object-contain",style:{maxWidth:"120px",filter:"drop-shadow(0 4px 8px rgba(0,0,0,.5))"}})),l.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-[1]"}),l.createElement("div",{className:"absolute bottom-0 left-0 w-full p-5 z-[4]"},l.createElement("h3",{className:"text-2xl font-bold text-white image-text-effect tracking-wide"},u.name),l.createElement("p",{className:"text-gray-200 image-text-effect font-medium"},u.nickname))))),l.createElement("section",{className:"mt-20 mb-12",id:"bang-vang-section"},l.createElement("div",{className:"bg-white dark:bg-gray-800/60 rounded-2xl shadow-xl p-6 md:p-10"},l.createElement("h2",{className:"text-3xl font-extrabold text-center mb-6 text-amber-600 dark:text-amber-400 drop-shadow"},"Bảng vàng A12K45"),l.createElement("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4"},"Tự động đồng bộ dữ liệu trực tiếp từ Google Sheets."),l.createElement("div",{id:"goldenBoard",className:"relative"},!t&&!n&&l.createElement("div",{id:"goldenBoardLoading",className:"flex flex-col items-center justify-center py-16"},l.createElement("div",{className:"w-12 h-12 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mb-4"}),l.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Đang tải dữ liệu...")),n&&l.createElement("div",{id:"goldenBoardError",className:"text-center text-red-600 dark:text-red-400 text-sm py-6"},n),t&&l.createElement("div",{id:"goldenBoardTableWrapper",className:"overflow-auto max-h-[70vh] ring-1 ring-gray-200 dark:ring-gray-700 rounded-xl",dangerouslySetInnerHTML:{__html:t}})),l.createElement("div",{className:"mt-4 text-center text-xs text-gray-400"},"Nguồn: Google Sheets (cập nhật mỗi lần tải trang)")))))}function Nw(){const{login:t}=Fe(),e=Or(),[n,r]=y.useState(""),[a,i]=y.useState(""),[s,o]=y.useState(!1),[u,c]=y.useState(null);async function d(h){h.preventDefault(),c(null),o(!0);try{if((await t({email:n,password:a})).isAdmin){c("Tài khoản admin: hãy đăng nhập tại /admin");return}e("/")}catch(f){c(f.message)}finally{o(!1)}}return l.createElement("div",{className:"max-w-md mx-auto py-16 px-6"},l.createElement("h1",{className:"text-3xl font-bold mb-2 text-green-600 dark:text-green-400"},"Đăng nhập"),l.createElement("p",{className:"text-xs mb-4 text-gray-500 dark:text-gray-400"},"Admin? dùng đường dẫn ",l.createElement("span",{className:"font-mono bg-gray-100 dark:bg-gray-700 px-1 rounded"},"/admin")),l.createElement("form",{onSubmit:d,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Email"),l.createElement("input",{type:"email",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:n,onChange:h=>r(h.target.value),required:!0})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Mật khẩu"),l.createElement("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:a,onChange:h=>i(h.target.value),required:!0})),u&&l.createElement("div",{className:"text-sm text-red-500"},u),l.createElement("button",{disabled:s,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition"},s?"Đang xử lý...":"Đăng nhập"),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Chưa có tài khoản? ",l.createElement(In,{to:"/register",className:"text-green-600 dark:text-green-400 font-medium"},"Đăng ký"))))}function Cw(){const{register:t}=Fe(),e=Or(),[n,r]=y.useState(""),[a,i]=y.useState(""),[s,o]=y.useState(""),[u,c]=y.useState(""),[d,h]=y.useState(!1),[f,v]=y.useState(null);async function w(k){if(k.preventDefault(),v(null),s!==u){v("Mật khẩu nhập lại không khớp");return}h(!0);try{await t({email:n,password:s,name:a}),e("/")}catch(x){v(x.message)}finally{h(!1)}}return l.createElement("div",{className:"max-w-md mx-auto py-16 px-6"},l.createElement("h1",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400"},"Đăng ký"),l.createElement("form",{onSubmit:w,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Họ tên"),l.createElement("input",{type:"text",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:a,onChange:k=>i(k.target.value),placeholder:"Tuỳ chọn"})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Email"),l.createElement("input",{type:"email",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:n,onChange:k=>r(k.target.value),required:!0})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Mật khẩu"),l.createElement("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:s,onChange:k=>o(k.target.value),required:!0})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Nhập lại mật khẩu"),l.createElement("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:u,onChange:k=>c(k.target.value),required:!0})),f&&l.createElement("div",{className:"text-sm text-red-500"},f),l.createElement("button",{disabled:d,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition"},d?"Đang xử lý...":"Tạo tài khoản"),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Đã có tài khoản? ",l.createElement(In,{to:"/login",className:"text-green-600 dark:text-green-400 font-medium"},"Đăng nhập"))))}function qc(){const{id:t}=Zp(),e=Or(),{user:n,updateProfile:r,updateCover:a,changePassword:i,loading:s}=Fe(),{posts:o,usersMap:u}=It(),c=t?u[t]:n;y.useEffect(()=>{!s&&t&&!c&&e("/profile")},[t,c,s,e]);const d=c&&n&&c.id===n.id,[h,f]=y.useState("posts"),[v,w]=y.useState(!1),[k,x]=y.useState((c==null?void 0:c.bio)||""),[p,m]=y.useState((c==null?void 0:c.name)||""),[g,E]=y.useState(!1),[_,C]=y.useState(!1),[P,A]=y.useState(""),[O,j]=y.useState(""),[D,F]=y.useState(""),[Y,se]=y.useState(null),[q,ie]=y.useState(null),Ce=y.useRef(null),M=y.useRef(null),[B,G]=y.useState(!1),[re,ne]=y.useState(!1);y.useEffect(()=>{x((c==null?void 0:c.bio)||""),m((c==null?void 0:c.name)||"")},[c==null?void 0:c.bio,c==null?void 0:c.name]);function nt(N){var b;(b=N.current)==null||b.click()}function Te(N,b){if(!N||N.size>2*1024*1024)return;const S=new FileReader;S.onload=T=>b(T.target.result),S.readAsDataURL(N)}function St(N){var S;const b=(S=N.target.files)==null?void 0:S[0];b&&(G(!0),Te(b,async T=>{await r({avatar:T}),G(!1)}))}function Le(N){var S;const b=(S=N.target.files)==null?void 0:S[0];b&&(ne(!0),Te(b,async T=>{await a(T),ne(!1)}))}async function Ke(){await r({bio:k}),w(!1)}async function Rr(){E(!0),await r({name:p||c.email}),E(!1)}async function Ua(N){if(N.preventDefault(),se(null),ie(null),O.length<4){se("Mật khẩu quá ngắn");return}if(O!==D){se("Nhập lại không khớp");return}try{await i({oldPassword:P,newPassword:O}),ie("Đổi mật khẩu thành công"),A(""),j(""),F("")}catch(b){se(b.message)}}const Lt=o.filter(N=>N.authorId===(c==null?void 0:c.id)),I=Lt.flatMap(N=>N.images.map((b,S)=>({src:b,postId:N.id,idx:S})));return c?l.createElement("div",{className:"min-h-screen"},l.createElement("div",{className:"relative w-full bg-gray-300 dark:bg-gray-700 aspect-[3/1] md:aspect-[3.5/1] overflow-hidden"},c.cover?l.createElement("img",{src:c.cover,alt:"cover",className:"w-full h-full object-cover"}):l.createElement("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-sm"},"Chưa có ảnh bìa"),d&&l.createElement("button",{onClick:()=>nt(M),className:"absolute bottom-3 right-3 px-3 py-2 rounded-md text-xs font-medium bg-black/60 text-white hover:bg-black/70 backdrop-blur-sm flex items-center gap-1"},re?"Đang tải...":"Đổi ảnh bìa"),l.createElement("input",{ref:M,onChange:Le,type:"file",accept:"image/*",className:"hidden"})),l.createElement("div",{className:"max-w-5xl mx-auto px-4 md:px-6 -mt-20 relative z-10"},l.createElement("div",{className:"flex flex-col md:flex-row gap-6 md:gap-10 bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 shadow-xl backdrop-blur-sm"},l.createElement("div",{className:"relative group w-40 h-40 rounded-full ring-4 ring-white dark:ring-black shadow-lg overflow-hidden flex-shrink-0 bg-gradient-to-br from-green-500 to-green-600 text-white text-4xl font-bold flex items-center justify-center"},c.avatar?l.createElement("img",{src:c.avatar,alt:"avatar",className:"w-full h-full object-cover"}):(c.name||c.email||"?").charAt(0).toUpperCase(),d&&l.createElement("button",{onClick:()=>nt(Ce),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-xs font-semibold transition"},"Đổi ảnh"),l.createElement("input",{ref:Ce,onChange:St,type:"file",accept:"image/*",className:"hidden"})),l.createElement("div",{className:"flex-1 min-w-0 space-y-3"},l.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-6"},l.createElement("div",{className:"flex items-center gap-3"},l.createElement("input",{disabled:!d,value:p,onChange:N=>m(N.target.value),className:`text-2xl md:text-3xl font-bold bg-transparent border-b focus:outline-none focus:border-green-500 ${d?"border-gray-300 dark:border-gray-600":"border-transparent"} pb-1`}),d&&l.createElement("button",{onClick:Rr,disabled:g,className:"text-xs px-3 py-1.5 rounded-md bg-green-600 text-white disabled:opacity-50"},g?"Lưu...":"Lưu")),l.createElement("div",{className:"text-xs text-gray-500"},"Tham gia ",Sr(c.createdAt))),l.createElement("div",{className:"text-sm text-gray-700 dark:text-gray-300"},v?l.createElement("div",{className:"space-y-2"},l.createElement("textarea",{value:k,onChange:N=>x(N.target.value),rows:3,className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Viết đôi lời giới thiệu..."}),l.createElement("div",{className:"flex gap-2"},l.createElement("button",{onClick:Ke,className:"px-4 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white text-xs font-semibold"},"Lưu"),l.createElement("button",{onClick:()=>{w(!1),x(c.bio||"")},className:"px-4 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-xs"},"Hủy"))):l.createElement("div",null,c.bio?l.createElement("p",{className:"leading-relaxed whitespace-pre-wrap break-words"},c.bio):l.createElement("p",{className:"text-gray-400 text-sm italic"},"Chưa có giới thiệu."),d&&l.createElement("button",{onClick:()=>w(!0),className:"mt-2 text-xs font-medium text-green-600 hover:underline"},"Chỉnh sửa giới thiệu"))),l.createElement("div",{className:"flex gap-2 flex-wrap"},d&&l.createElement("button",{onClick:()=>C(N=>!N),className:"px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-xs font-medium"},"Đổi mật khẩu"),!d&&l.createElement("button",{className:"px-4 py-2 rounded-md bg-green-600 text-white text-xs font-medium"},"Nhắn tin"))))),l.createElement("div",{className:"max-w-5xl mx-auto px-4 md:px-6 mt-8"},l.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700 flex gap-6 overflow-x-auto"},["posts","about","photos"].map(N=>l.createElement("button",{key:N,onClick:()=>f(N),className:`py-3 -mb-px px-1 border-b-2 text-sm font-medium transition ${h===N?"border-green-600 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-green-600"} capitalize`},N==="posts"?"Bài viết":N==="about"?"Giới thiệu":"Ảnh"))),l.createElement("div",{className:"mt-6"},h==="posts"&&l.createElement("div",{className:"space-y-6"},d&&l.createElement(Qf,null),Lt.length?Lt.map(N=>l.createElement(Yf,{key:N.id,post:N})):l.createElement("div",{className:"text-sm text-gray-500"},"Chưa có bài viết.")),h==="about"&&l.createElement("div",{className:"grid md:grid-cols-2 gap-6"},l.createElement("div",{className:"bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5 space-y-2"},l.createElement("h3",{className:"text-sm font-semibold mb-3"},"Thông tin cơ bản"),l.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-300"},"Email: ",l.createElement("span",{className:"font-medium"},c.email)),l.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-300"},"Tham gia: ",l.createElement("span",{className:"font-medium"},new Date(c.createdAt).toLocaleDateString())),l.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-300"},"Bài viết: ",l.createElement("span",{className:"font-medium"},Lt.length))),l.createElement("div",{className:"bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5 space-y-3"},l.createElement("h3",{className:"text-sm font-semibold"},"Giới thiệu"),!v&&c.bio&&l.createElement("p",{className:"text-sm whitespace-pre-wrap break-words"},c.bio),d&&!v&&l.createElement("button",{onClick:()=>w(!0),className:"text-xs text-green-600 hover:underline"},"Chỉnh sửa"),v&&l.createElement("div",{className:"space-y-2"},l.createElement("textarea",{value:k,onChange:N=>x(N.target.value),rows:4,className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("div",{className:"flex gap-2"},l.createElement("button",{onClick:Ke,className:"px-4 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white text-xs font-semibold"},"Lưu"),l.createElement("button",{onClick:()=>{w(!1),x(c.bio||"")},className:"px-4 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-xs"},"Hủy")))),d&&l.createElement("div",{className:"md:col-span-2 bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5"},l.createElement("button",{onClick:()=>C(N=>!N),className:"text-xs font-medium text-green-600 hover:underline"},_?"Ẩn đổi mật khẩu":"Đổi mật khẩu"),_&&l.createElement("form",{onSubmit:Ua,className:"mt-4 grid md:grid-cols-3 gap-4 text-sm"},l.createElement("input",{type:"password",value:P,onChange:N=>A(N.target.value),placeholder:"Mật khẩu hiện tại",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("input",{type:"password",value:O,onChange:N=>j(N.target.value),placeholder:"Mật khẩu mới",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("input",{type:"password",value:D,onChange:N=>F(N.target.value),placeholder:"Nhập lại",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),Y&&l.createElement("div",{className:"text-xs text-red-500 md:col-span-3"},Y),q&&l.createElement("div",{className:"text-xs text-green-600 md:col-span-3"},q),l.createElement("div",{className:"md:col-span-3"},l.createElement("button",{className:"px-5 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold"},"Đổi mật khẩu"))))),h==="photos"&&l.createElement("div",null,I.length?l.createElement("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2"},I.map((N,b)=>l.createElement("div",{key:b,className:"relative aspect-square overflow-hidden rounded-lg group bg-black/5"},l.createElement("img",{src:N.src,alt:"pimg"+b,className:"w-full h-full object-cover group-hover:scale-110 transition"})))):l.createElement("div",{className:"text-sm text-gray-500"},"Chưa có ảnh."))))):l.createElement("div",{className:"max-w-5xl mx-auto px-4 py-16 text-center text-sm text-gray-500"},"Không tìm thấy người dùng")}function Tw(){const{posts:t}=It(),{user:e}=Fe(),[n,r]=y.useState(""),a=y.useMemo(()=>t.filter(i=>n?(i.content||"").toLowerCase().includes(n.toLowerCase())||i.id.includes(n):!0),[t,n]);return e!=null&&e.isAdmin?l.createElement("div",{className:"mt-12"},l.createElement("h2",{className:"text-lg font-semibold mb-4"},"Tất cả bài viết (kể cả đã xoá)"),l.createElement("div",{className:"flex gap-3 mb-4"},l.createElement("input",{value:n,onChange:i=>r(i.target.value),placeholder:"Tìm nội dung hoặc ID...",className:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})),l.createElement("div",{className:"overflow-x-auto"},l.createElement("table",{className:"w-full text-xs border-collapse"},l.createElement("thead",null,l.createElement("tr",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300"},l.createElement("th",{className:"p-2 text-left"},"ID"),l.createElement("th",{className:"p-2 text-left"},"Tác giả"),l.createElement("th",{className:"p-2 text-left"},"Trạng thái"),l.createElement("th",{className:"p-2 text-left"},"Ngày tạo"),l.createElement("th",{className:"p-2 text-left"},"Sửa cuối"),l.createElement("th",{className:"p-2 text-left"},"Ảnh"),l.createElement("th",{className:"p-2 text-left"},"Nội dung (rút gọn)"))),l.createElement("tbody",null,a.map(i=>{var s;return l.createElement("tr",{key:i.id,className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"},l.createElement("td",{className:"p-2 font-mono max-w-[120px] truncate",title:i.id},i.id),l.createElement("td",{className:"p-2"},i.authorId),l.createElement("td",{className:"p-2"},i.deleted?"Đã xoá":"Hiển thị"),l.createElement("td",{className:"p-2"},Sr(i.createdAt)),l.createElement("td",{className:"p-2"},i.updatedAt?Sr(i.updatedAt):"-"),l.createElement("td",{className:"p-2"},((s=i.images)==null?void 0:s.length)||0),l.createElement("td",{className:"p-2 max-w-[260px] truncate",title:i.content},i.content||""))}))))):null}function Pw(){const{listUsers:t,adminUpdateUser:e,adminDeleteUser:n,user:r,getActivity:a}=Fe(),{posts:i}=It(),[s,o]=y.useState([]),[u,c]=y.useState(!0);y.useEffect(()=>{let _=!1;return(async()=>{try{const C=await t();_||o(Array.isArray(C)?C:[])}finally{_||c(!1)}})(),()=>{_=!0}},[t]);const[d,h]=y.useState(""),[f,v]=y.useState("users");async function w(){c(!0);const _=await t();o(Array.isArray(_)?_:[]),c(!1)}function k(_){e(_.id,{suspended:!_.suspended}),w()}function x(_){confirm("Xóa user và toàn bộ nội dung?")&&(n(_.id),w())}function p(_){return i.filter(C=>C.authorId===_).reduce((C,P)=>{var A;return C+(((A=P.images)==null?void 0:A.length)||0)},0)}function m(_){return i.filter(C=>C.authorId===_).length}const g=(Array.isArray(s)?s:[]).filter(_=>{if(!d)return!0;const C=d.toLowerCase();return(_.email||"").toLowerCase().includes(C)||(_.name||"").toLowerCase().includes(C)}),E=y.useMemo(()=>({users:Array.isArray(s)?s.length:0,posts:i.length}),[s,i]);return l.createElement("div",{className:"max-w-7xl mx-auto px-6 py-10"},l.createElement("h1",{className:"text-2xl font-bold mb-6"},"Bảng điều khiển Admin"),l.createElement("div",{className:"flex gap-4 border-b border-gray-200 dark:border-gray-700 mb-6 text-sm"},["users","posts","security","server"].map(_=>l.createElement("button",{key:_,onClick:()=>v(_),className:`py-2 px-3 -mb-px border-b-2 ${f===_?"border-green-600 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-green-600"}`},_==="users"?"Người dùng":_==="posts"?"Bài viết":_==="security"?"Bảo mật":"Server"))),l.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-sm"},l.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow"},l.createElement("div",{className:"text-gray-500 text-[11px]"},"Người dùng"),l.createElement("div",{className:"text-lg font-semibold"},E.users)),l.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow"},l.createElement("div",{className:"text-gray-500 text-[11px]"},"Bài viết"),l.createElement("div",{className:"text-lg font-semibold"},E.posts))),f==="users"&&l.createElement("div",null,u&&l.createElement("div",{className:"text-xs text-gray-500 mb-2"},"Đang tải người dùng..."),l.createElement("div",{className:"flex items-center gap-3 mb-4"},l.createElement("input",{value:d,onChange:_=>h(_.target.value),placeholder:"Tìm người dùng...",className:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.createElement("button",{onClick:w,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-xs"},"Tải lại")),l.createElement("div",{className:"overflow-x-auto"},l.createElement("table",{className:"w-full text-xs border-collapse"},l.createElement("thead",null,l.createElement("tr",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300"},l.createElement("th",{className:"p-2 text-left"},"Tên"),l.createElement("th",{className:"p-2 text-left"},"Email"),l.createElement("th",{className:"p-2"},"Admin"),l.createElement("th",{className:"p-2"},"Khóa"),l.createElement("th",{className:"p-2"},"Bài viết"),l.createElement("th",{className:"p-2"},"Ảnh"),l.createElement("th",{className:"p-2"},"Upload (KB)"),l.createElement("th",{className:"p-2"},"Lần đăng nhập"),l.createElement("th",{className:"p-2"},"Tần suất xem bài"),l.createElement("th",{className:"p-2"},"Thao tác"))),l.createElement("tbody",null,g.map(_=>{var O;const C=a(_.id),P=((O=C==null?void 0:C.logins)==null?void 0:O.length)||0;let A="-";if(C!=null&&C.viewedPosts){const j=Object.entries(C.viewedPosts).map(([D,F])=>({pid:D,...F})).sort((D,F)=>F.count-D.count).slice(0,2);A=j.length?j.map(D=>`${D.pid.substring(0,4)}…(${D.count})`).join(", "):"-"}return l.createElement("tr",{key:_.id,className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"},l.createElement("td",{className:"p-2 font-medium max-w-[140px] truncate"},_.name),l.createElement("td",{className:"p-2 max-w-[160px] truncate"},_.email),l.createElement("td",{className:"p-2 text-center"},_.isAdmin?"✓":""),l.createElement("td",{className:"p-2 text-center"},_.suspended?"🚫":""),l.createElement("td",{className:"p-2 text-center"},m(_.id)),l.createElement("td",{className:"p-2 text-center"},p(_.id)),l.createElement("td",{className:"p-2 text-center"},Math.round((_.uploadBytes||0)/1024)),l.createElement("td",{className:"p-2 text-center"},P),l.createElement("td",{className:"p-2 text-center"},A),l.createElement("td",{className:"p-2 flex gap-2 flex-wrap min-w-[140px]"},l.createElement("button",{onClick:()=>k(_),disabled:_.id===r.id,className:"px-2 py-1 rounded bg-yellow-100 dark:bg-yellow-700/40 text-yellow-700 dark:text-yellow-200"},_.suspended?"Mở khóa":"Khóa"),l.createElement("button",{onClick:()=>x(_),disabled:_.isAdmin,className:"px-2 py-1 rounded bg-red-100 dark:bg-red-700/40 text-red-700 dark:text-red-200 disabled:opacity-40"},"Xóa"),l.createElement("button",{onClick:()=>{try{e(_.id,{isAdmin:!_.isAdmin}),w()}catch(j){alert(j.message)}},disabled:_.id===r.id&&_.isAdmin,className:"px-2 py-1 rounded bg-blue-100 dark:bg-blue-700/40 text-blue-700 dark:text-blue-200 disabled:opacity-40"},_.isAdmin?"Gỡ":"Thêm")))})))),l.createElement("p",{className:"mt-3 text-[10px] text-gray-500"},"(*) IP/Vị trí và mật khẩu thực tế không thể lấy an toàn ở client. Cần backend + hashing.")),f==="posts"&&l.createElement("div",null,l.createElement(Tw,null)),f==="security"&&l.createElement("div",{className:"space-y-4 text-xs"},l.createElement("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},l.createElement("h2",{className:"font-semibold mb-2 text-sm"},"Tổng quan bảo mật (client)"),l.createElement("ul",{className:"list-disc ml-5 space-y-1"},l.createElement("li",null,"CSP cơ bản đã bật"),l.createElement("li",null,"Rate limit phía client (bài viết / bình luận)"),l.createElement("li",null,"Không thể hiển thị mật khẩu người dùng (đang hash base64) - cần thay Argon2"))),l.createElement("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},l.createElement("h3",{className:"font-semibold mb-2 text-sm"},"Hành động cần làm (server)"),l.createElement("ol",{className:"list-decimal ml-5 space-y-1"},l.createElement("li",null,"Dựng backend + JWT/Refresh"),l.createElement("li",null,"Hash Argon2id mật khẩu"),l.createElement("li",null,"Ghi log IP & User-Agent thực"),l.createElement("li",null,"Áp dụng WAF / CDN"),l.createElement("li",null,"Thêm audit log cho thay đổi quyền")))),f==="server"&&l.createElement("div",{className:"space-y-4 text-xs"},l.createElement("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},l.createElement("h2",{className:"font-semibold mb-2 text-sm"},"Tình trạng server (giả lập)"),l.createElement("p",null,"Chưa có backend thực. Gợi ý: Express/Nest + Postgres + Prisma.")),l.createElement("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},l.createElement("h3",{className:"font-semibold mb-2 text-sm"},"Kế hoạch triển khai"),l.createElement("p",null,"1. Khởi tạo repo server riêng. 2. Module auth. 3. Module posts. 4. Audit + monitoring."))))}function Ow(){const{user:t,login:e,loading:n}=Fe(),[r,a]=y.useState(""),[i,s]=y.useState(""),[o,u]=y.useState(null),[c,d]=y.useState(!1);if(n)return null;if(t!=null&&t.isAdmin)return l.createElement(Pw,null);if(t&&!t.isAdmin)return l.createElement("div",{className:"max-w-md mx-auto py-16 px-6 text-center space-y-6"},l.createElement("h1",{className:"text-2xl font-bold text-red-600 dark:text-red-400"},"Không có quyền"),l.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Bạn đã đăng nhập nhưng không phải admin. Hãy đăng xuất và đăng nhập bằng tài khoản admin."));async function h(f){f.preventDefault(),u(null),d(!0);try{(await e({email:r,password:i})).isAdmin||u("Tài khoản này không phải admin")}catch(v){u(v.message)}finally{d(!1)}}return l.createElement("div",{className:"max-w-md mx-auto py-16 px-6"},l.createElement("h1",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400"},"Admin Login"),l.createElement("form",{onSubmit:h,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow"},l.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400"},"Chỉ dành cho quản trị viên. Tài khoản thường hãy dùng trang đăng nhập bình thường."),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Email Admin"),l.createElement("input",{type:"email",value:r,onChange:f=>a(f.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium mb-1"},"Mật khẩu"),l.createElement("input",{type:"password",value:i,onChange:f=>s(f.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})),o&&l.createElement("div",{className:"text-sm text-red-500"},o),l.createElement("button",{disabled:c,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition"},c?"Đang xử lý...":"Đăng nhập admin")))}uf(document.getElementById("root")).render(l.createElement(ew,null,l.createElement(iw,null,l.createElement(_0,null,l.createElement(p0,null,l.createElement(Ct,{path:"/",element:l.createElement(tw,null)},l.createElement(Ct,{index:!0,element:l.createElement(gw,null)}),l.createElement(Ct,{path:"gioithieu",element:l.createElement(ww,null)}),l.createElement(Ct,{path:"thanhtich",element:l.createElement(Sw,null)}),l.createElement(Ct,{path:"profile",element:l.createElement(qc,null)}),l.createElement(Ct,{path:"profile/:id",element:l.createElement(qc,null)}),l.createElement(Ct,{path:"admin",element:l.createElement(Ow,null)}),l.createElement(Ct,{path:"login",element:l.createElement(Nw,null)}),l.createElement(Ct,{path:"register",element:l.createElement(Cw,null)})))))));
