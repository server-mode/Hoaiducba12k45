function sg(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ig(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ag(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ed={exports:{}},Vi={},td={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cs=Symbol.for("react.element"),og=Symbol.for("react.portal"),lg=Symbol.for("react.fragment"),ug=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),dg=Symbol.for("react.provider"),hg=Symbol.for("react.context"),fg=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),mg=Symbol.for("react.memo"),pg=Symbol.for("react.lazy"),lu=Symbol.iterator;function vg(t){return t===null||typeof t!="object"?null:(t=lu&&t[lu]||t["@@iterator"],typeof t=="function"?t:null)}var nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rd=Object.assign,sd={};function Er(t,e,n){this.props=t,this.context=e,this.refs=sd,this.updater=n||nd}Er.prototype.isReactComponent={};Er.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Er.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function id(){}id.prototype=Er.prototype;function ll(t,e,n){this.props=t,this.context=e,this.refs=sd,this.updater=n||nd}var ul=ll.prototype=new id;ul.constructor=ll;rd(ul,Er.prototype);ul.isPureReactComponent=!0;var uu=Array.isArray,ad=Object.prototype.hasOwnProperty,cl={current:null},od={key:!0,ref:!0,__self:!0,__source:!0};function ld(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ad.call(e,r)&&!od.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Cs,type:t,key:i,ref:a,props:s,_owner:cl.current}}function yg(t,e){return{$$typeof:Cs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cs}function xg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cu=/\/+/g;function pa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xg(""+t.key):e.toString(36)}function ii(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Cs:case og:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+pa(a,0):r,uu(s)?(n="",t!=null&&(n=t.replace(cu,"$&/")+"/"),ii(s,e,n,"",function(c){return c})):s!=null&&(dl(s)&&(s=yg(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(cu,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",uu(t))for(var o=0;o<t.length;o++){i=t[o];var u=r+pa(i,o);a+=ii(i,e,n,u,s)}else if(u=vg(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=r+pa(i,o++),a+=ii(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ms(t,e,n){if(t==null)return t;var r=[],s=0;return ii(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var He={current:null},ai={transition:null},kg={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ai,ReactCurrentOwner:cl};function ud(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Ms,forEach:function(t,e,n){Ms(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ms(t,function(){e++}),e},toArray:function(t){return Ms(t,function(e){return e})||[]},only:function(t){if(!dl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=Er;X.Fragment=lg;X.Profiler=cg;X.PureComponent=ll;X.StrictMode=ug;X.Suspense=gg;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kg;X.act=ud;X.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rd({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=cl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)ad.call(e,u)&&!od.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Cs,type:t.type,key:s,ref:i,props:r,_owner:a}};X.createContext=function(t){return t={$$typeof:hg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dg,_context:t},t.Consumer=t};X.createElement=ld;X.createFactory=function(t){var e=ld.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:fg,render:t}};X.isValidElement=dl;X.lazy=function(t){return{$$typeof:pg,_payload:{_status:-1,_result:t},_init:wg}};X.memo=function(t,e){return{$$typeof:mg,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=ai.transition;ai.transition={};try{t()}finally{ai.transition=e}};X.unstable_act=ud;X.useCallback=function(t,e){return He.current.useCallback(t,e)};X.useContext=function(t){return He.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return He.current.useDeferredValue(t)};X.useEffect=function(t,e){return He.current.useEffect(t,e)};X.useId=function(){return He.current.useId()};X.useImperativeHandle=function(t,e,n){return He.current.useImperativeHandle(t,e,n)};X.useInsertionEffect=function(t,e){return He.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return He.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return He.current.useMemo(t,e)};X.useReducer=function(t,e,n){return He.current.useReducer(t,e,n)};X.useRef=function(t){return He.current.useRef(t)};X.useState=function(t){return He.current.useState(t)};X.useSyncExternalStore=function(t,e,n){return He.current.useSyncExternalStore(t,e,n)};X.useTransition=function(){return He.current.useTransition()};X.version="18.3.1";td.exports=X;var y=td.exports;const bt=ig(y),bg=sg({__proto__:null,default:bt},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g=y,jg=Symbol.for("react.element"),Sg=Symbol.for("react.fragment"),Ng=Object.prototype.hasOwnProperty,Eg=_g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cg={key:!0,ref:!0,__self:!0,__source:!0};function cd(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ng.call(e,r)&&!Cg.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jg,type:t,key:i,ref:a,props:s,_owner:Eg.current}}Vi.Fragment=Sg;Vi.jsx=cd;Vi.jsxs=cd;ed.exports=Vi;var l=ed.exports,dd={exports:{}},ot={},hd={exports:{}},fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var G=M.length;M.push(B);e:for(;0<G;){var re=G-1>>>1,ne=M[re];if(0<s(ne,B))M[re]=B,M[G]=ne,G=re;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],G=M.pop();if(G!==B){M[0]=G;e:for(var re=0,ne=M.length,nt=ne>>>1;re<nt;){var Ce=2*(re+1)-1,Nt=M[Ce],Le=Ce+1,Ke=M[Le];if(0>s(Nt,G))Le<ne&&0>s(Ke,Nt)?(M[re]=Ke,M[Le]=G,re=Le):(M[re]=Nt,M[Ce]=G,re=Ce);else if(Le<ne&&0>s(Ke,G))M[re]=Ke,M[Le]=G,re=Le;else break e}}return B}function s(M,B){var G=M.sortIndex-B.sortIndex;return G!==0?G:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],c=[],d=1,h=null,f=3,v=!1,x=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(M){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=M)r(c),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(c)}}function _(M){if(w=!1,m(M),!x)if(n(u)!==null)x=!0,ie(j);else{var B=n(c);B!==null&&Ee(_,B.startTime-M)}}function j(M,B){x=!1,w&&(w=!1,p(R),R=-1),v=!0;var G=f;try{for(m(B),h=n(u);h!==null&&(!(h.expirationTime>B)||M&&!D());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var ne=re(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(u)&&r(u),m(B)}else r(u);h=n(u)}if(h!==null)var nt=!0;else{var Ce=n(c);Ce!==null&&Ee(_,Ce.startTime-B),nt=!1}return nt}finally{h=null,f=G,v=!1}}var E=!1,T=null,R=-1,P=5,O=-1;function D(){return!(t.unstable_now()-O<P)}function F(){if(T!==null){var M=t.unstable_now();O=M;var B=!0;try{B=T(!0,M)}finally{B?Y():(E=!1,T=null)}}else E=!1}var Y;if(typeof g=="function")Y=function(){g(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,q=ae.port2;ae.port1.onmessage=F,Y=function(){q.postMessage(null)}}else Y=function(){b(F,0)};function ie(M){T=M,E||(E=!0,Y())}function Ee(M,B){R=b(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,ie(j))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var G=f;f=B;try{return M()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=f;f=M;try{return B()}finally{f=G}},t.unstable_scheduleCallback=function(M,B,G){var re=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?re+G:re):G=re,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,M={id:d++,callback:B,priorityLevel:M,startTime:G,expirationTime:ne,sortIndex:-1},G>re?(M.sortIndex=G,e(c,M),n(u)===null&&M===n(c)&&(w?(p(R),R=-1):w=!0,Ee(_,G-re))):(M.sortIndex=ne,e(u,M),x||v||(x=!0,ie(j))),M},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(M){var B=f;return function(){var G=f;f=B;try{return M.apply(this,arguments)}finally{f=G}}}})(fd);hd.exports=fd;var Tg=hd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=y,at=Tg;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,ls={};function Bn(t,e){vr(t,e),vr(t+"Capture",e)}function vr(t,e){for(ls[t]=e,t=0;t<e.length;t++)gd.add(e[t])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=Object.prototype.hasOwnProperty,Og=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,du={},hu={};function Rg(t){return Za.call(hu,t)?!0:Za.call(du,t)?!1:Og.test(t)?hu[t]=!0:(du[t]=!0,!1)}function Ag(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ig(t,e,n,r){if(e===null||typeof e>"u"||Ag(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ie[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ie[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ie[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ie[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ie[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ie[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ie[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var hl=/[\-:]([a-z])/g;function fl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hl,fl);Ie[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hl,fl);Ie[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hl,fl);Ie[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function gl(t,e,n,r){var s=Ie.hasOwnProperty(e)?Ie[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ig(e,n,s,r)&&(n=null),r||s===null?Rg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kt=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zs=Symbol.for("react.element"),Yn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),eo=Symbol.for("react.profiler"),md=Symbol.for("react.provider"),pd=Symbol.for("react.context"),pl=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),no=Symbol.for("react.suspense_list"),vl=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),vd=Symbol.for("react.offscreen"),fu=Symbol.iterator;function Lr(t){return t===null||typeof t!="object"?null:(t=fu&&t[fu]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,va;function Hr(t){if(va===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);va=e&&e[1]||""}return`
`+va+t}var ya=!1;function xa(t,e){if(!t||ya)return"";ya=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{ya=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hr(t):""}function Lg(t){switch(t.tag){case 5:return Hr(t.type);case 16:return Hr("Lazy");case 13:return Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 2:case 15:return t=xa(t.type,!1),t;case 11:return t=xa(t.type.render,!1),t;case 1:return t=xa(t.type,!0),t;default:return""}}function ro(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Yn:return"Portal";case eo:return"Profiler";case ml:return"StrictMode";case to:return"Suspense";case no:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pd:return(t.displayName||"Context")+".Consumer";case md:return(t._context.displayName||"Context")+".Provider";case pl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vl:return e=t.displayName||null,e!==null?e:ro(t.type)||"Memo";case Yt:e=t._payload,t=t._init;try{return ro(t(e))}catch{}}return null}function $g(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ro(e);case 8:return e===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ug(t){var e=yd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bs(t){t._valueTracker||(t._valueTracker=Ug(t))}function xd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function so(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wd(t,e){e=e.checked,e!=null&&gl(t,"checked",e,!1)}function io(t,e){wd(t,e);var n=pn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ao(t,e.type,n):e.hasOwnProperty("defaultValue")&&ao(t,e.type,pn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ao(t,e,n){(e!=="number"||vi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vr=Array.isArray;function dr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function oo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Vr(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pn(n)}}function kd(t,e){var n=pn(e.value),r=pn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fs,_d=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function us(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dg=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(t){Dg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qr[e]=Qr[t]})});function jd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qr.hasOwnProperty(t)&&Qr[t]?(""+e).trim():e+"px"}function Sd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Mg=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(t,e){if(e){if(Mg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function co(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function yl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fo=null,hr=null,fr=null;function yu(t){if(t=Os(t)){if(typeof fo!="function")throw Error($(280));var e=t.stateNode;e&&(e=Xi(e),fo(t.stateNode,t.type,e))}}function Nd(t){hr?fr?fr.push(t):fr=[t]:hr=t}function Ed(){if(hr){var t=hr,e=fr;if(fr=hr=null,yu(t),e)for(t=0;t<e.length;t++)yu(e[t])}}function Cd(t,e){return t(e)}function Td(){}var wa=!1;function Pd(t,e,n){if(wa)return t(e,n);wa=!0;try{return Cd(t,e,n)}finally{wa=!1,(hr!==null||fr!==null)&&(Td(),Ed())}}function cs(t,e){var n=t.stateNode;if(n===null)return null;var r=Xi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var go=!1;if(qt)try{var $r={};Object.defineProperty($r,"passive",{get:function(){go=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{go=!1}function zg(t,e,n,r,s,i,a,o,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xr=!1,yi=null,xi=!1,mo=null,Bg={onError:function(t){Xr=!0,yi=t}};function Fg(t,e,n,r,s,i,a,o,u){Xr=!1,yi=null,zg.apply(Bg,arguments)}function qg(t,e,n,r,s,i,a,o,u){if(Fg.apply(this,arguments),Xr){if(Xr){var c=yi;Xr=!1,yi=null}else throw Error($(198));xi||(xi=!0,mo=c)}}function Fn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Od(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xu(t){if(Fn(t)!==t)throw Error($(188))}function Wg(t){var e=t.alternate;if(!e){if(e=Fn(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xu(s),t;if(i===r)return xu(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Rd(t){return t=Wg(t),t!==null?Ad(t):null}function Ad(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ad(t);if(e!==null)return e;t=t.sibling}return null}var Id=at.unstable_scheduleCallback,wu=at.unstable_cancelCallback,Hg=at.unstable_shouldYield,Vg=at.unstable_requestPaint,ye=at.unstable_now,Kg=at.unstable_getCurrentPriorityLevel,xl=at.unstable_ImmediatePriority,Ld=at.unstable_UserBlockingPriority,wi=at.unstable_NormalPriority,Gg=at.unstable_LowPriority,$d=at.unstable_IdlePriority,Ki=null,At=null;function Jg(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Ki,t,void 0,(t.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Yg,Qg=Math.log,Xg=Math.LN2;function Yg(t){return t>>>=0,t===0?32:31-(Qg(t)/Xg|0)|0}var qs=64,Ws=4194304;function Kr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ki(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Kr(o):(i&=a,i!==0&&(r=Kr(i)))}else a=n&~s,a!==0?r=Kr(a):i!==0&&(r=Kr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_t(e),s=1<<n,r|=t[n],e&=~s;return r}function Zg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function em(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-_t(i),o=1<<a,u=s[a];u===-1?(!(o&n)||o&r)&&(s[a]=Zg(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function po(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ud(){var t=qs;return qs<<=1,!(qs&4194240)&&(qs=64),t}function ka(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_t(e),t[e]=n}function tm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_t(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function wl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_t(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var se=0;function Dd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Md,kl,zd,Bd,Fd,vo=!1,Hs=[],on=null,ln=null,un=null,ds=new Map,hs=new Map,en=[],nm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(t,e){switch(t){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":ds.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function Ur(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Os(e),e!==null&&kl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rm(t,e,n,r,s){switch(e){case"focusin":return on=Ur(on,t,e,n,r,s),!0;case"dragenter":return ln=Ur(ln,t,e,n,r,s),!0;case"mouseover":return un=Ur(un,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ds.set(i,Ur(ds.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,hs.set(i,Ur(hs.get(i)||null,t,e,n,r,s)),!0}return!1}function qd(t){var e=Pn(t.target);if(e!==null){var n=Fn(e);if(n!==null){if(e=n.tag,e===13){if(e=Od(n),e!==null){t.blockedOn=e,Fd(t.priority,function(){zd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ho=r,n.target.dispatchEvent(r),ho=null}else return e=Os(n),e!==null&&kl(e),t.blockedOn=n,!1;e.shift()}return!0}function bu(t,e,n){oi(t)&&n.delete(e)}function sm(){vo=!1,on!==null&&oi(on)&&(on=null),ln!==null&&oi(ln)&&(ln=null),un!==null&&oi(un)&&(un=null),ds.forEach(bu),hs.forEach(bu)}function Dr(t,e){t.blockedOn===e&&(t.blockedOn=null,vo||(vo=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,sm)))}function fs(t){function e(s){return Dr(s,t)}if(0<Hs.length){Dr(Hs[0],t);for(var n=1;n<Hs.length;n++){var r=Hs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(on!==null&&Dr(on,t),ln!==null&&Dr(ln,t),un!==null&&Dr(un,t),ds.forEach(e),hs.forEach(e),n=0;n<en.length;n++)r=en[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)qd(n),n.blockedOn===null&&en.shift()}var gr=Kt.ReactCurrentBatchConfig,bi=!0;function im(t,e,n,r){var s=se,i=gr.transition;gr.transition=null;try{se=1,bl(t,e,n,r)}finally{se=s,gr.transition=i}}function am(t,e,n,r){var s=se,i=gr.transition;gr.transition=null;try{se=4,bl(t,e,n,r)}finally{se=s,gr.transition=i}}function bl(t,e,n,r){if(bi){var s=yo(t,e,n,r);if(s===null)Oa(t,e,r,_i,n),ku(t,r);else if(rm(s,t,e,n,r))r.stopPropagation();else if(ku(t,r),e&4&&-1<nm.indexOf(t)){for(;s!==null;){var i=Os(s);if(i!==null&&Md(i),i=yo(t,e,n,r),i===null&&Oa(t,e,r,_i,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Oa(t,e,r,null,n)}}var _i=null;function yo(t,e,n,r){if(_i=null,t=yl(r),t=Pn(t),t!==null)if(e=Fn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Od(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _i=t,null}function Wd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kg()){case xl:return 1;case Ld:return 4;case wi:case Gg:return 16;case $d:return 536870912;default:return 16}default:return 16}}var rn=null,_l=null,li=null;function Hd(){if(li)return li;var t,e=_l,n=e.length,r,s="value"in rn?rn.value:rn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return li=s.slice(t,1<r?1-r:void 0)}function ui(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vs(){return!0}function _u(){return!1}function lt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vs:_u,this.isPropagationStopped=_u,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),e}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=lt(Cr),Ps=ge({},Cr,{view:0,detail:0}),om=lt(Ps),ba,_a,Mr,Gi=ge({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mr&&(Mr&&t.type==="mousemove"?(ba=t.screenX-Mr.screenX,_a=t.screenY-Mr.screenY):_a=ba=0,Mr=t),ba)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),ju=lt(Gi),lm=ge({},Gi,{dataTransfer:0}),um=lt(lm),cm=ge({},Ps,{relatedTarget:0}),ja=lt(cm),dm=ge({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),hm=lt(dm),fm=ge({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gm=lt(fm),mm=ge({},Cr,{data:0}),Su=lt(mm),pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ym={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ym[t])?!!e[t]:!1}function Sl(){return xm}var wm=ge({},Ps,{key:function(t){if(t.key){var e=pm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(t){return t.type==="keypress"?ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),km=lt(wm),bm=ge({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nu=lt(bm),_m=ge({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),jm=lt(_m),Sm=ge({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nm=lt(Sm),Em=ge({},Gi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cm=lt(Em),Tm=[9,13,27,32],Nl=qt&&"CompositionEvent"in window,Yr=null;qt&&"documentMode"in document&&(Yr=document.documentMode);var Pm=qt&&"TextEvent"in window&&!Yr,Vd=qt&&(!Nl||Yr&&8<Yr&&11>=Yr),Eu=" ",Cu=!1;function Kd(t,e){switch(t){case"keyup":return Tm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function Om(t,e){switch(t){case"compositionend":return Gd(e);case"keypress":return e.which!==32?null:(Cu=!0,Eu);case"textInput":return t=e.data,t===Eu&&Cu?null:t;default:return null}}function Rm(t,e){if(er)return t==="compositionend"||!Nl&&Kd(t,e)?(t=Hd(),li=_l=rn=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vd&&e.locale!=="ko"?null:e.data;default:return null}}var Am={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Am[t.type]:e==="textarea"}function Jd(t,e,n,r){Nd(r),e=ji(e,"onChange"),0<e.length&&(n=new jl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zr=null,gs=null;function Im(t){ah(t,0)}function Ji(t){var e=rr(t);if(xd(e))return t}function Lm(t,e){if(t==="change")return e}var Qd=!1;if(qt){var Sa;if(qt){var Na="oninput"in document;if(!Na){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Na=typeof Pu.oninput=="function"}Sa=Na}else Sa=!1;Qd=Sa&&(!document.documentMode||9<document.documentMode)}function Ou(){Zr&&(Zr.detachEvent("onpropertychange",Xd),gs=Zr=null)}function Xd(t){if(t.propertyName==="value"&&Ji(gs)){var e=[];Jd(e,gs,t,yl(t)),Pd(Im,e)}}function $m(t,e,n){t==="focusin"?(Ou(),Zr=e,gs=n,Zr.attachEvent("onpropertychange",Xd)):t==="focusout"&&Ou()}function Um(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ji(gs)}function Dm(t,e){if(t==="click")return Ji(e)}function Mm(t,e){if(t==="input"||t==="change")return Ji(e)}function zm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:zm;function ms(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Za.call(e,s)||!St(t[s],e[s]))return!1}return!0}function Ru(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Au(t,e){var n=Ru(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ru(n)}}function Yd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zd(){for(var t=window,e=vi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vi(t.document)}return e}function El(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bm(t){var e=Zd(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yd(n.ownerDocument.documentElement,n)){if(r!==null&&El(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Au(n,i);var a=Au(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fm=qt&&"documentMode"in document&&11>=document.documentMode,tr=null,xo=null,es=null,wo=!1;function Iu(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wo||tr==null||tr!==vi(r)||(r=tr,"selectionStart"in r&&El(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&ms(es,r)||(es=r,r=ji(xo,"onSelect"),0<r.length&&(e=new jl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tr)))}function Ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Ea={},eh={};qt&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function Qi(t){if(Ea[t])return Ea[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eh)return Ea[t]=e[n];return t}var th=Qi("animationend"),nh=Qi("animationiteration"),rh=Qi("animationstart"),sh=Qi("transitionend"),ih=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(t,e){ih.set(t,e),Bn(e,[t])}for(var Ca=0;Ca<Lu.length;Ca++){var Ta=Lu[Ca],qm=Ta.toLowerCase(),Wm=Ta[0].toUpperCase()+Ta.slice(1);yn(qm,"on"+Wm)}yn(th,"onAnimationEnd");yn(nh,"onAnimationIteration");yn(rh,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(sh,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gr));function $u(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qg(r,e,void 0,t),t.currentTarget=null}function ah(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;$u(s,o,c),i=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;$u(s,o,c),i=u}}}if(xi)throw t=mo,xi=!1,mo=null,t}function ue(t,e){var n=e[So];n===void 0&&(n=e[So]=new Set);var r=t+"__bubble";n.has(r)||(oh(e,t,2,!1),n.add(r))}function Pa(t,e,n){var r=0;e&&(r|=4),oh(n,t,r,e)}var Gs="_reactListening"+Math.random().toString(36).slice(2);function ps(t){if(!t[Gs]){t[Gs]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Hm.has(n)||Pa(n,!1,t),Pa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gs]||(e[Gs]=!0,Pa("selectionchange",!1,e))}}function oh(t,e,n,r){switch(Wd(e)){case 1:var s=im;break;case 4:s=am;break;default:s=bl}n=s.bind(null,e,n,t),s=void 0,!go||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Oa(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Pn(o),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Pd(function(){var c=i,d=yl(n),h=[];e:{var f=ih.get(t);if(f!==void 0){var v=jl,x=t;switch(t){case"keypress":if(ui(n)===0)break e;case"keydown":case"keyup":v=km;break;case"focusin":x="focus",v=ja;break;case"focusout":x="blur",v=ja;break;case"beforeblur":case"afterblur":v=ja;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=jm;break;case th:case nh:case rh:v=hm;break;case sh:v=Nm;break;case"scroll":v=om;break;case"wheel":v=Cm;break;case"copy":case"cut":case"paste":v=gm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Nu}var w=(e&4)!==0,b=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var g=c,m;g!==null;){m=g;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,p!==null&&(_=cs(g,p),_!=null&&w.push(vs(g,_,m)))),b)break;g=g.return}0<w.length&&(f=new v(f,x,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==ho&&(x=n.relatedTarget||n.fromElement)&&(Pn(x)||x[Wt]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?Pn(x):null,x!==null&&(b=Fn(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=c),v!==x)){if(w=ju,_="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Nu,_="onPointerLeave",p="onPointerEnter",g="pointer"),b=v==null?f:rr(v),m=x==null?f:rr(x),f=new w(_,g+"leave",v,n,d),f.target=b,f.relatedTarget=m,_=null,Pn(d)===c&&(w=new w(p,g+"enter",x,n,d),w.target=m,w.relatedTarget=b,_=w),b=_,v&&x)t:{for(w=v,p=x,g=0,m=w;m;m=Wn(m))g++;for(m=0,_=p;_;_=Wn(_))m++;for(;0<g-m;)w=Wn(w),g--;for(;0<m-g;)p=Wn(p),m--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=Wn(w),p=Wn(p)}w=null}else w=null;v!==null&&Uu(h,f,v,w,!1),x!==null&&b!==null&&Uu(h,b,x,w,!0)}}e:{if(f=c?rr(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var j=Lm;else if(Tu(f))if(Qd)j=Mm;else{j=Um;var E=$m}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Dm);if(j&&(j=j(t,c))){Jd(h,j,n,d);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&ao(f,"number",f.value)}switch(E=c?rr(c):window,t){case"focusin":(Tu(E)||E.contentEditable==="true")&&(tr=E,xo=c,es=null);break;case"focusout":es=xo=tr=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,Iu(h,n,d);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":Iu(h,n,d)}var T;if(Nl)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else er?Kd(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Vd&&n.locale!=="ko"&&(er||R!=="onCompositionStart"?R==="onCompositionEnd"&&er&&(T=Hd()):(rn=d,_l="value"in rn?rn.value:rn.textContent,er=!0)),E=ji(c,R),0<E.length&&(R=new Su(R,t,null,n,d),h.push({event:R,listeners:E}),T?R.data=T:(T=Gd(n),T!==null&&(R.data=T)))),(T=Pm?Om(t,n):Rm(t,n))&&(c=ji(c,"onBeforeInput"),0<c.length&&(d=new Su("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=T))}ah(h,e)})}function vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ji(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=cs(t,n),i!=null&&r.unshift(vs(t,i,s)),i=cs(t,e),i!=null&&r.push(vs(t,i,s))),t=t.return}return r}function Wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uu(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,s?(u=cs(n,i),u!=null&&a.unshift(vs(n,u,o))):s||(u=cs(n,i),u!=null&&a.push(vs(n,u,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Vm=/\r\n?/g,Km=/\u0000|\uFFFD/g;function Du(t){return(typeof t=="string"?t:""+t).replace(Vm,`
`).replace(Km,"")}function Js(t,e,n){if(e=Du(e),Du(t)!==e&&n)throw Error($(425))}function Si(){}var ko=null,bo=null;function _o(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jo=typeof setTimeout=="function"?setTimeout:void 0,Gm=typeof clearTimeout=="function"?clearTimeout:void 0,Mu=typeof Promise=="function"?Promise:void 0,Jm=typeof queueMicrotask=="function"?queueMicrotask:typeof Mu<"u"?function(t){return Mu.resolve(null).then(t).catch(Qm)}:jo;function Qm(t){setTimeout(function(){throw t})}function Ra(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fs(e)}function cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Tr,ys="__reactProps$"+Tr,Wt="__reactContainer$"+Tr,So="__reactEvents$"+Tr,Xm="__reactListeners$"+Tr,Ym="__reactHandles$"+Tr;function Pn(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wt]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zu(t);t!==null;){if(n=t[Rt])return n;t=zu(t)}return e}t=n,n=t.parentNode}return null}function Os(t){return t=t[Rt]||t[Wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Xi(t){return t[ys]||null}var No=[],sr=-1;function xn(t){return{current:t}}function ce(t){0>sr||(t.current=No[sr],No[sr]=null,sr--)}function le(t,e){sr++,No[sr]=t.current,t.current=e}var vn={},Be=xn(vn),Ze=xn(!1),$n=vn;function yr(t,e){var n=t.type.contextTypes;if(!n)return vn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function Ni(){ce(Ze),ce(Be)}function Bu(t,e,n){if(Be.current!==vn)throw Error($(168));le(Be,e),le(Ze,n)}function lh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,$g(t)||"Unknown",s));return ge({},n,r)}function Ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vn,$n=Be.current,le(Be,t),le(Ze,Ze.current),!0}function Fu(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=lh(t,e,$n),r.__reactInternalMemoizedMergedChildContext=t,ce(Ze),ce(Be),le(Be,t)):ce(Ze),le(Ze,n)}var Mt=null,Yi=!1,Aa=!1;function uh(t){Mt===null?Mt=[t]:Mt.push(t)}function Zm(t){Yi=!0,uh(t)}function wn(){if(!Aa&&Mt!==null){Aa=!0;var t=0,e=se;try{var n=Mt;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mt=null,Yi=!1}catch(s){throw Mt!==null&&(Mt=Mt.slice(t+1)),Id(xl,wn),s}finally{se=e,Aa=!1}}return null}var ir=[],ar=0,Ci=null,Ti=0,ct=[],dt=0,Un=null,zt=1,Bt="";function Nn(t,e){ir[ar++]=Ti,ir[ar++]=Ci,Ci=t,Ti=e}function ch(t,e,n){ct[dt++]=zt,ct[dt++]=Bt,ct[dt++]=Un,Un=t;var r=zt;t=Bt;var s=32-_t(r)-1;r&=~(1<<s),n+=1;var i=32-_t(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,zt=1<<32-_t(e)+s|n<<s|r,Bt=i+t}else zt=1<<i|n<<s|r,Bt=t}function Cl(t){t.return!==null&&(Nn(t,1),ch(t,1,0))}function Tl(t){for(;t===Ci;)Ci=ir[--ar],ir[ar]=null,Ti=ir[--ar],ir[ar]=null;for(;t===Un;)Un=ct[--dt],ct[dt]=null,Bt=ct[--dt],ct[dt]=null,zt=ct[--dt],ct[dt]=null}var it=null,st=null,de=!1,kt=null;function dh(t,e){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,st=cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Un!==null?{id:zt,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,st=null,!0):!1;default:return!1}}function Eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Co(t){if(de){var e=st;if(e){var n=e;if(!qu(t,e)){if(Eo(t))throw Error($(418));e=cn(n.nextSibling);var r=it;e&&qu(t,e)?dh(r,n):(t.flags=t.flags&-4097|2,de=!1,it=t)}}else{if(Eo(t))throw Error($(418));t.flags=t.flags&-4097|2,de=!1,it=t}}}function Wu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function Qs(t){if(t!==it)return!1;if(!de)return Wu(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_o(t.type,t.memoizedProps)),e&&(e=st)){if(Eo(t))throw hh(),Error($(418));for(;e;)dh(t,e),e=cn(e.nextSibling)}if(Wu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){st=cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}st=null}}else st=it?cn(t.stateNode.nextSibling):null;return!0}function hh(){for(var t=st;t;)t=cn(t.nextSibling)}function xr(){st=it=null,de=!1}function Pl(t){kt===null?kt=[t]:kt.push(t)}var ep=Kt.ReactCurrentBatchConfig;function zr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Xs(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hu(t){var e=t._init;return e(t._payload)}function fh(t){function e(p,g){if(t){var m=p.deletions;m===null?(p.deletions=[g],p.flags|=16):m.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=gn(p,g),p.index=0,p.sibling=null,p}function i(p,g,m){return p.index=m,t?(m=p.alternate,m!==null?(m=m.index,m<g?(p.flags|=2,g):m):(p.flags|=2,g)):(p.flags|=1048576,g)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,m,_){return g===null||g.tag!==6?(g=za(m,p.mode,_),g.return=p,g):(g=s(g,m),g.return=p,g)}function u(p,g,m,_){var j=m.type;return j===Zn?d(p,g,m.props.children,_,m.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yt&&Hu(j)===g.type)?(_=s(g,m.props),_.ref=zr(p,g,m),_.return=p,_):(_=pi(m.type,m.key,m.props,null,p.mode,_),_.ref=zr(p,g,m),_.return=p,_)}function c(p,g,m,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Ba(m,p.mode,_),g.return=p,g):(g=s(g,m.children||[]),g.return=p,g)}function d(p,g,m,_,j){return g===null||g.tag!==7?(g=In(m,p.mode,_,j),g.return=p,g):(g=s(g,m),g.return=p,g)}function h(p,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=za(""+g,p.mode,m),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zs:return m=pi(g.type,g.key,g.props,null,p.mode,m),m.ref=zr(p,null,g),m.return=p,m;case Yn:return g=Ba(g,p.mode,m),g.return=p,g;case Yt:var _=g._init;return h(p,_(g._payload),m)}if(Vr(g)||Lr(g))return g=In(g,p.mode,m,null),g.return=p,g;Xs(p,g)}return null}function f(p,g,m,_){var j=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:o(p,g,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case zs:return m.key===j?u(p,g,m,_):null;case Yn:return m.key===j?c(p,g,m,_):null;case Yt:return j=m._init,f(p,g,j(m._payload),_)}if(Vr(m)||Lr(m))return j!==null?null:d(p,g,m,_,null);Xs(p,m)}return null}function v(p,g,m,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(m)||null,o(g,p,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zs:return p=p.get(_.key===null?m:_.key)||null,u(g,p,_,j);case Yn:return p=p.get(_.key===null?m:_.key)||null,c(g,p,_,j);case Yt:var E=_._init;return v(p,g,m,E(_._payload),j)}if(Vr(_)||Lr(_))return p=p.get(m)||null,d(g,p,_,j,null);Xs(g,_)}return null}function x(p,g,m,_){for(var j=null,E=null,T=g,R=g=0,P=null;T!==null&&R<m.length;R++){T.index>R?(P=T,T=null):P=T.sibling;var O=f(p,T,m[R],_);if(O===null){T===null&&(T=P);break}t&&T&&O.alternate===null&&e(p,T),g=i(O,g,R),E===null?j=O:E.sibling=O,E=O,T=P}if(R===m.length)return n(p,T),de&&Nn(p,R),j;if(T===null){for(;R<m.length;R++)T=h(p,m[R],_),T!==null&&(g=i(T,g,R),E===null?j=T:E.sibling=T,E=T);return de&&Nn(p,R),j}for(T=r(p,T);R<m.length;R++)P=v(T,p,R,m[R],_),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?R:P.key),g=i(P,g,R),E===null?j=P:E.sibling=P,E=P);return t&&T.forEach(function(D){return e(p,D)}),de&&Nn(p,R),j}function w(p,g,m,_){var j=Lr(m);if(typeof j!="function")throw Error($(150));if(m=j.call(m),m==null)throw Error($(151));for(var E=j=null,T=g,R=g=0,P=null,O=m.next();T!==null&&!O.done;R++,O=m.next()){T.index>R?(P=T,T=null):P=T.sibling;var D=f(p,T,O.value,_);if(D===null){T===null&&(T=P);break}t&&T&&D.alternate===null&&e(p,T),g=i(D,g,R),E===null?j=D:E.sibling=D,E=D,T=P}if(O.done)return n(p,T),de&&Nn(p,R),j;if(T===null){for(;!O.done;R++,O=m.next())O=h(p,O.value,_),O!==null&&(g=i(O,g,R),E===null?j=O:E.sibling=O,E=O);return de&&Nn(p,R),j}for(T=r(p,T);!O.done;R++,O=m.next())O=v(T,p,R,O.value,_),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?R:O.key),g=i(O,g,R),E===null?j=O:E.sibling=O,E=O);return t&&T.forEach(function(F){return e(p,F)}),de&&Nn(p,R),j}function b(p,g,m,_){if(typeof m=="object"&&m!==null&&m.type===Zn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case zs:e:{for(var j=m.key,E=g;E!==null;){if(E.key===j){if(j=m.type,j===Zn){if(E.tag===7){n(p,E.sibling),g=s(E,m.props.children),g.return=p,p=g;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yt&&Hu(j)===E.type){n(p,E.sibling),g=s(E,m.props),g.ref=zr(p,E,m),g.return=p,p=g;break e}n(p,E);break}else e(p,E);E=E.sibling}m.type===Zn?(g=In(m.props.children,p.mode,_,m.key),g.return=p,p=g):(_=pi(m.type,m.key,m.props,null,p.mode,_),_.ref=zr(p,g,m),_.return=p,p=_)}return a(p);case Yn:e:{for(E=m.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){n(p,g.sibling),g=s(g,m.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Ba(m,p.mode,_),g.return=p,p=g}return a(p);case Yt:return E=m._init,b(p,g,E(m._payload),_)}if(Vr(m))return x(p,g,m,_);if(Lr(m))return w(p,g,m,_);Xs(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(n(p,g.sibling),g=s(g,m),g.return=p,p=g):(n(p,g),g=za(m,p.mode,_),g.return=p,p=g),a(p)):n(p,g)}return b}var wr=fh(!0),gh=fh(!1),Pi=xn(null),Oi=null,or=null,Ol=null;function Rl(){Ol=or=Oi=null}function Al(t){var e=Pi.current;ce(Pi),t._currentValue=e}function To(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mr(t,e){Oi=t,Ol=or=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ye=!0),t.firstContext=null)}function mt(t){var e=t._currentValue;if(Ol!==t)if(t={context:t,memoizedValue:e,next:null},or===null){if(Oi===null)throw Error($(308));or=t,Oi.dependencies={lanes:0,firstContext:t}}else or=or.next=t;return e}var On=null;function Il(t){On===null?On=[t]:On.push(t)}function mh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Il(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ht(t,r)}function Ht(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Ll(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ph(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ht(t,n)}return s=r.interleaved,s===null?(e.next=e,Il(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ht(t,n)}function ci(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wl(t,n)}}function Vu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ri(t,e,n,r){var s=t.updateQueue;Zt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;a=0,d=c=u=null,o=i;do{var f=o.lane,v=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,w=o;switch(f=e,v=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(v,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,f=typeof x=="function"?x.call(v,h,f):x,f==null)break e;h=ge({},h,f);break e;case 2:Zt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else v={eventTime:v,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Mn|=a,t.lanes=a,t.memoizedState=h}}function Ku(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Rs={},It=xn(Rs),xs=xn(Rs),ws=xn(Rs);function Rn(t){if(t===Rs)throw Error($(174));return t}function $l(t,e){switch(le(ws,e),le(xs,t),le(It,Rs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lo(e,t)}ce(It),le(It,e)}function kr(){ce(It),ce(xs),ce(ws)}function vh(t){Rn(ws.current);var e=Rn(It.current),n=lo(e,t.type);e!==n&&(le(xs,t),le(It,n))}function Ul(t){xs.current===t&&(ce(It),ce(xs))}var he=xn(0);function Ai(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ia=[];function Dl(){for(var t=0;t<Ia.length;t++)Ia[t]._workInProgressVersionPrimary=null;Ia.length=0}var di=Kt.ReactCurrentDispatcher,La=Kt.ReactCurrentBatchConfig,Dn=0,fe=null,_e=null,Se=null,Ii=!1,ts=!1,ks=0,tp=0;function $e(){throw Error($(321))}function Ml(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function zl(t,e,n,r,s,i){if(Dn=i,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,di.current=t===null||t.memoizedState===null?ip:ap,t=n(r,s),ts){i=0;do{if(ts=!1,ks=0,25<=i)throw Error($(301));i+=1,Se=_e=null,e.updateQueue=null,di.current=op,t=n(r,s)}while(ts)}if(di.current=Li,e=_e!==null&&_e.next!==null,Dn=0,Se=_e=fe=null,Ii=!1,e)throw Error($(300));return t}function Bl(){var t=ks!==0;return ks=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?fe.memoizedState=Se=t:Se=Se.next=t,Se}function pt(){if(_e===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=Se===null?fe.memoizedState:Se.next;if(e!==null)Se=e,_e=t;else{if(t===null)throw Error($(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Se===null?fe.memoizedState=Se=t:Se=Se.next=t}return Se}function bs(t,e){return typeof e=="function"?e(t):e}function $a(t){var e=pt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=_e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,u=null,c=i;do{var d=c.lane;if((Dn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=h,a=r):u=u.next=h,fe.lanes|=d,Mn|=d}c=c.next}while(c!==null&&c!==i);u===null?a=r:u.next=o,St(r,e.memoizedState)||(Ye=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,fe.lanes|=i,Mn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ua(t){var e=pt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);St(i,e.memoizedState)||(Ye=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yh(){}function xh(t,e){var n=fe,r=pt(),s=e(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Ye=!0),r=r.queue,Fl(bh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,_s(9,kh.bind(null,n,r,s,e),void 0,null),Ne===null)throw Error($(349));Dn&30||wh(n,e,s)}return s}function wh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kh(t,e,n,r){e.value=n,e.getSnapshot=r,_h(e)&&jh(t)}function bh(t,e,n){return n(function(){_h(e)&&jh(t)})}function _h(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function jh(t){var e=Ht(t,1);e!==null&&jt(e,t,1,-1)}function Gu(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e.queue=t,t=t.dispatch=sp.bind(null,fe,t),[e.memoizedState,t]}function _s(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sh(){return pt().memoizedState}function hi(t,e,n,r){var s=Pt();fe.flags|=t,s.memoizedState=_s(1|e,n,void 0,r===void 0?null:r)}function Zi(t,e,n,r){var s=pt();r=r===void 0?null:r;var i=void 0;if(_e!==null){var a=_e.memoizedState;if(i=a.destroy,r!==null&&Ml(r,a.deps)){s.memoizedState=_s(e,n,i,r);return}}fe.flags|=t,s.memoizedState=_s(1|e,n,i,r)}function Ju(t,e){return hi(8390656,8,t,e)}function Fl(t,e){return Zi(2048,8,t,e)}function Nh(t,e){return Zi(4,2,t,e)}function Eh(t,e){return Zi(4,4,t,e)}function Ch(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Th(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4,4,Ch.bind(null,e,t),n)}function ql(){}function Ph(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ml(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oh(t,e){var n=pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ml(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Rh(t,e,n){return Dn&21?(St(n,e)||(n=Ud(),fe.lanes|=n,Mn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ye=!0),t.memoizedState=n)}function np(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=La.transition;La.transition={};try{t(!1),e()}finally{se=n,La.transition=r}}function Ah(){return pt().memoizedState}function rp(t,e,n){var r=fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ih(t))Lh(e,n);else if(n=mh(t,e,n,r),n!==null){var s=We();jt(n,t,r,s),$h(n,e,r)}}function sp(t,e,n){var r=fn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ih(t))Lh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,St(o,a)){var u=e.interleaved;u===null?(s.next=s,Il(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=mh(t,e,s,r),n!==null&&(s=We(),jt(n,t,r,s),$h(n,e,r))}}function Ih(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function Lh(t,e){ts=Ii=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $h(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wl(t,n)}}var Li={readContext:mt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},ip={readContext:mt,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:mt,useEffect:Ju,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hi(4194308,4,Ch.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hi(4194308,4,t,e)},useInsertionEffect:function(t,e){return hi(4,2,t,e)},useMemo:function(t,e){var n=Pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rp.bind(null,fe,t),[r.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Gu,useDebugValue:ql,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Gu(!1),e=t[0];return t=np.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fe,s=Pt();if(de){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ne===null)throw Error($(349));Dn&30||wh(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ju(bh.bind(null,r,i,t),[t]),r.flags|=2048,_s(9,kh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pt(),e=Ne.identifierPrefix;if(de){var n=Bt,r=zt;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ks++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ap={readContext:mt,useCallback:Ph,useContext:mt,useEffect:Fl,useImperativeHandle:Th,useInsertionEffect:Nh,useLayoutEffect:Eh,useMemo:Oh,useReducer:$a,useRef:Sh,useState:function(){return $a(bs)},useDebugValue:ql,useDeferredValue:function(t){var e=pt();return Rh(e,_e.memoizedState,t)},useTransition:function(){var t=$a(bs)[0],e=pt().memoizedState;return[t,e]},useMutableSource:yh,useSyncExternalStore:xh,useId:Ah,unstable_isNewReconciler:!1},op={readContext:mt,useCallback:Ph,useContext:mt,useEffect:Fl,useImperativeHandle:Th,useInsertionEffect:Nh,useLayoutEffect:Eh,useMemo:Oh,useReducer:Ua,useRef:Sh,useState:function(){return Ua(bs)},useDebugValue:ql,useDeferredValue:function(t){var e=pt();return _e===null?e.memoizedState=t:Rh(e,_e.memoizedState,t)},useTransition:function(){var t=Ua(bs)[0],e=pt().memoizedState;return[t,e]},useMutableSource:yh,useSyncExternalStore:xh,useId:Ah,unstable_isNewReconciler:!1};function yt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Po(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ea={isMounted:function(t){return(t=t._reactInternals)?Fn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),s=fn(t),i=Ft(r,s);i.payload=e,n!=null&&(i.callback=n),e=dn(t,i,s),e!==null&&(jt(e,t,s,r),ci(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),s=fn(t),i=Ft(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dn(t,i,s),e!==null&&(jt(e,t,s,r),ci(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=fn(t),s=Ft(n,r);s.tag=2,e!=null&&(s.callback=e),e=dn(t,s,r),e!==null&&(jt(e,t,r,n),ci(e,t,r))}};function Qu(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ms(n,r)||!ms(s,i):!0}function Uh(t,e,n){var r=!1,s=vn,i=e.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=et(e)?$n:Be.current,r=e.contextTypes,i=(r=r!=null)?yr(t,s):vn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ea,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ea.enqueueReplaceState(e,e.state,null)}function Oo(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ll(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=et(e)?$n:Be.current,s.context=yr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Po(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ea.enqueueReplaceState(s,s.state,null),Ri(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var n="",r=e;do n+=Lg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Da(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ro(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lp=typeof WeakMap=="function"?WeakMap:Map;function Dh(t,e,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ui||(Ui=!0,Fo=r),Ro(t,e)},n}function Mh(t,e,n){n=Ft(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ro(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ro(t,e),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Yu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lp;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=bp.bind(null,t,e,n),e.then(t,t))}function Zu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ec(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ft(-1,1),e.tag=2,dn(n,e,1))),n.lanes|=1),t)}var up=Kt.ReactCurrentOwner,Ye=!1;function qe(t,e,n,r){e.child=t===null?gh(e,null,n,r):wr(e,t.child,n,r)}function tc(t,e,n,r,s){n=n.render;var i=e.ref;return mr(e,s),r=zl(t,e,n,r,i,s),n=Bl(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(de&&n&&Cl(e),e.flags|=1,qe(t,e,r,s),e.child)}function nc(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Xl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,zh(t,e,i,r,s)):(t=pi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ms,n(a,r)&&t.ref===e.ref)return Vt(t,e,s)}return e.flags|=1,t=gn(i,r),t.ref=e.ref,t.return=e,e.child=t}function zh(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ms(i,r)&&t.ref===e.ref)if(Ye=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ye=!0);else return e.lanes=t.lanes,Vt(t,e,s)}return Ao(t,e,n,r,s)}function Bh(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(ur,rt),rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(ur,rt),rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(ur,rt),rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,le(ur,rt),rt|=r;return qe(t,e,s,n),e.child}function Fh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ao(t,e,n,r,s){var i=et(n)?$n:Be.current;return i=yr(e,i),mr(e,s),n=zl(t,e,n,r,i,s),r=Bl(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(de&&r&&Cl(e),e.flags|=1,qe(t,e,n,s),e.child)}function rc(t,e,n,r,s){if(et(n)){var i=!0;Ei(e)}else i=!1;if(mr(e,s),e.stateNode===null)fi(t,e),Uh(e,n,r),Oo(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=mt(c):(c=et(n)?$n:Be.current,c=yr(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==c)&&Xu(e,a,r,c),Zt=!1;var f=e.memoizedState;a.state=f,Ri(e,r,a,s),u=e.memoizedState,o!==r||f!==u||Ze.current||Zt?(typeof d=="function"&&(Po(e,n,d,r),u=e.memoizedState),(o=Zt||Qu(e,n,o,r,f,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ph(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:yt(e.type,o),a.props=c,h=e.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=mt(u):(u=et(n)?$n:Be.current,u=yr(e,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==u)&&Xu(e,a,r,u),Zt=!1,f=e.memoizedState,a.state=f,Ri(e,r,a,s);var x=e.memoizedState;o!==h||f!==x||Ze.current||Zt?(typeof v=="function"&&(Po(e,n,v,r),x=e.memoizedState),(c=Zt||Qu(e,n,c,r,f,x,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Io(t,e,n,r,i,s)}function Io(t,e,n,r,s,i){Fh(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Fu(e,n,!1),Vt(t,e,i);r=e.stateNode,up.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=wr(e,t.child,null,i),e.child=wr(e,null,o,i)):qe(t,e,o,i),e.memoizedState=r.state,s&&Fu(e,n,!0),e.child}function qh(t){var e=t.stateNode;e.pendingContext?Bu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bu(t,e.context,!1),$l(t,e.containerInfo)}function sc(t,e,n,r,s){return xr(),Pl(s),e.flags|=256,qe(t,e,n,r),e.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function $o(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wh(t,e,n){var r=e.pendingProps,s=he.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),le(he,s&1),t===null)return Co(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ra(a,r,0,null),t=In(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$o(n),e.memoizedState=Lo,t):Wl(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return cp(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=gn(o,i):(i=In(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?$o(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Lo,r}return i=t.child,t=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wl(t,e){return e=ra({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ys(t,e,n,r){return r!==null&&Pl(r),wr(e,t.child,null,n),t=Wl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cp(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Da(Error($(422))),Ys(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ra({mode:"visible",children:r.children},s,0,null),i=In(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wr(e,t.child,null,a),e.child.memoizedState=$o(a),e.memoizedState=Lo,i);if(!(e.mode&1))return Ys(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error($(419)),r=Da(i,r,void 0),Ys(t,e,a,r)}if(o=(a&t.childLanes)!==0,Ye||o){if(r=Ne,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ht(t,s),jt(r,t,s,-1))}return Ql(),r=Da(Error($(421))),Ys(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_p.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,st=cn(s.nextSibling),it=e,de=!0,kt=null,t!==null&&(ct[dt++]=zt,ct[dt++]=Bt,ct[dt++]=Un,zt=t.id,Bt=t.overflow,Un=e),e=Wl(e,r.children),e.flags|=4096,e)}function ic(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),To(t.return,e,n)}function Ma(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Hh(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(qe(t,e,r.children,n),r=he.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ic(t,n,e);else if(t.tag===19)ic(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(he,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ai(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ma(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ai(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ma(e,!0,n,null,i);break;case"together":Ma(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dp(t,e,n){switch(e.tag){case 3:qh(e),xr();break;case 5:vh(e);break;case 1:et(e.type)&&Ei(e);break;case 4:$l(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;le(Pi,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?Wh(t,e,n):(le(he,he.current&1),t=Vt(t,e,n),t!==null?t.sibling:null);le(he,he.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hh(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(he,he.current),r)break;return null;case 22:case 23:return e.lanes=0,Bh(t,e,n)}return Vt(t,e,n)}var Vh,Uo,Kh,Gh;Vh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uo=function(){};Kh=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rn(It.current);var i=null;switch(n){case"input":s=so(t,s),r=so(t,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=oo(t,s),r=oo(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Si)}uo(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ls.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ls.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ue("scroll",t),i||o===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Gh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Br(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hp(t,e,n){var r=e.pendingProps;switch(Tl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return et(e.type)&&Ni(),Ue(e),null;case 3:return r=e.stateNode,kr(),ce(Ze),ce(Be),Dl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kt!==null&&(Ho(kt),kt=null))),Uo(t,e),Ue(e),null;case 5:Ul(e);var s=Rn(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)Kh(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Ue(e),null}if(t=Rn(It.current),Qs(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Rt]=e,r[ys]=i,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(s=0;s<Gr.length;s++)ue(Gr[s],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":gu(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":pu(r,i),ue("invalid",r)}uo(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Js(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Js(r.textContent,o,t),s=["children",""+o]):ls.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ue("scroll",r)}switch(n){case"input":Bs(r),mu(r,i,!0);break;case"textarea":Bs(r),vu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Si)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Rt]=e,t[ys]=r,Vh(t,e,!1,!1),e.stateNode=t;e:{switch(a=co(n,r),n){case"dialog":ue("cancel",t),ue("close",t),s=r;break;case"iframe":case"object":case"embed":ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<Gr.length;s++)ue(Gr[s],t);s=r;break;case"source":ue("error",t),s=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),s=r;break;case"details":ue("toggle",t),s=r;break;case"input":gu(t,r),s=so(t,r),ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),ue("invalid",t);break;case"textarea":pu(t,r),s=oo(t,r),ue("invalid",t);break;default:s=r}uo(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?Sd(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_d(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&us(t,u):typeof u=="number"&&us(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ls.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ue("scroll",t):u!=null&&gl(t,i,u,a))}switch(n){case"input":Bs(t),mu(t,r,!1);break;case"textarea":Bs(t),vu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?dr(t,!!r.multiple,i,!1):r.defaultValue!=null&&dr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Si)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)Gh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Rn(ws.current),Rn(It.current),Qs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rt]=e,(i=r.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Js(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Js(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=e,e.stateNode=r}return Ue(e),null;case 13:if(ce(he),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&st!==null&&e.mode&1&&!(e.flags&128))hh(),xr(),e.flags|=98560,i=!1;else if(i=Qs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Rt]=e}else xr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),i=!1}else kt!==null&&(Ho(kt),kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?je===0&&(je=3):Ql())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return kr(),Uo(t,e),t===null&&ps(e.stateNode.containerInfo),Ue(e),null;case 10:return Al(e.type._context),Ue(e),null;case 17:return et(e.type)&&Ni(),Ue(e),null;case 19:if(ce(he),i=e.memoizedState,i===null)return Ue(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Br(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ai(t),a!==null){for(e.flags|=128,Br(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(he,he.current&1|2),e.child}t=t.sibling}i.tail!==null&&ye()>_r&&(e.flags|=128,r=!0,Br(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ai(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Br(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!de)return Ue(e),null}else 2*ye()-i.renderingStartTime>_r&&n!==1073741824&&(e.flags|=128,r=!0,Br(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ye(),e.sibling=null,n=he.current,le(he,r?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return Jl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rt&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function fp(t,e){switch(Tl(e),e.tag){case 1:return et(e.type)&&Ni(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kr(),ce(Ze),ce(Be),Dl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ul(e),null;case 13:if(ce(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));xr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(he),null;case 4:return kr(),null;case 10:return Al(e.type._context),null;case 22:case 23:return Jl(),null;case 24:return null;default:return null}}var Zs=!1,Me=!1,gp=typeof WeakSet=="function"?WeakSet:Set,W=null;function lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function Do(t,e,n){try{n()}catch(r){pe(t,e,r)}}var ac=!1;function mp(t,e){if(ko=bi,t=Zd(),El(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(u=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=a),f===i&&++d===r&&(u=a),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bo={focusedElem:t,selectionRange:n},bi=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,b=x.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:yt(e.type,w),b);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(_){pe(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return x=ac,ac=!1,x}function ns(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Do(e,n,i)}s=s.next}while(s!==r)}}function ta(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jh(t){var e=t.alternate;e!==null&&(t.alternate=null,Jh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[ys],delete e[So],delete e[Xm],delete e[Ym])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qh(t){return t.tag===5||t.tag===3||t.tag===4}function oc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Si));else if(r!==4&&(t=t.child,t!==null))for(zo(t,e,n),t=t.sibling;t!==null;)zo(t,e,n),t=t.sibling}function Bo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bo(t,e,n),t=t.sibling;t!==null;)Bo(t,e,n),t=t.sibling}var Oe=null,xt=!1;function Jt(t,e,n){for(n=n.child;n!==null;)Xh(t,e,n),n=n.sibling}function Xh(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Ki,n)}catch{}switch(n.tag){case 5:Me||lr(n,e);case 6:var r=Oe,s=xt;Oe=null,Jt(t,e,n),Oe=r,xt=s,Oe!==null&&(xt?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(xt?(t=Oe,n=n.stateNode,t.nodeType===8?Ra(t.parentNode,n):t.nodeType===1&&Ra(t,n),fs(t)):Ra(Oe,n.stateNode));break;case 4:r=Oe,s=xt,Oe=n.stateNode.containerInfo,xt=!0,Jt(t,e,n),Oe=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Me&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Do(n,e,a),s=s.next}while(s!==r)}Jt(t,e,n);break;case 1:if(!Me&&(lr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){pe(n,e,o)}Jt(t,e,n);break;case 21:Jt(t,e,n);break;case 22:n.mode&1?(Me=(r=Me)||n.memoizedState!==null,Jt(t,e,n),Me=r):Jt(t,e,n);break;default:Jt(t,e,n)}}function lc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gp),e.forEach(function(r){var s=jp.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Oe=o.stateNode,xt=!1;break e;case 3:Oe=o.stateNode.containerInfo,xt=!0;break e;case 4:Oe=o.stateNode.containerInfo,xt=!0;break e}o=o.return}if(Oe===null)throw Error($(160));Xh(i,a,s),Oe=null,xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){pe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yh(e,t),e=e.sibling}function Yh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vt(e,t),Et(t),r&4){try{ns(3,t,t.return),ta(3,t)}catch(w){pe(t,t.return,w)}try{ns(5,t,t.return)}catch(w){pe(t,t.return,w)}}break;case 1:vt(e,t),Et(t),r&512&&n!==null&&lr(n,n.return);break;case 5:if(vt(e,t),Et(t),r&512&&n!==null&&lr(n,n.return),t.flags&32){var s=t.stateNode;try{us(s,"")}catch(w){pe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&wd(s,i),co(o,a);var c=co(o,i);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?Sd(s,h):d==="dangerouslySetInnerHTML"?_d(s,h):d==="children"?us(s,h):gl(s,d,h,c)}switch(o){case"input":io(s,i);break;case"textarea":kd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?dr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?dr(s,!!i.multiple,i.defaultValue,!0):dr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ys]=i}catch(w){pe(t,t.return,w)}}break;case 6:if(vt(e,t),Et(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){pe(t,t.return,w)}}break;case 3:if(vt(e,t),Et(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fs(e.containerInfo)}catch(w){pe(t,t.return,w)}break;case 4:vt(e,t),Et(t);break;case 13:vt(e,t),Et(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kl=ye())),r&4&&lc(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Me=(c=Me)||d,vt(e,t),Me=c):vt(e,t),Et(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(h=W=d;W!==null;){switch(f=W,v=f.child,f.tag){case 0:case 11:case 14:case 15:ns(4,f,f.return);break;case 1:lr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){pe(r,n,w)}}break;case 5:lr(f,f.return);break;case 22:if(f.memoizedState!==null){cc(h);continue}}v!==null?(v.return=f,W=v):cc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=jd("display",a))}catch(w){pe(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){pe(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vt(e,t),Et(t),r&4&&lc(t);break;case 21:break;default:vt(e,t),Et(t)}}function Et(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qh(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(us(s,""),r.flags&=-33);var i=oc(t);Bo(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=oc(t);zo(t,o,a);break;default:throw Error($(161))}}catch(u){pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pp(t,e,n){W=t,Zh(t)}function Zh(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Zs;if(!a){var o=s.alternate,u=o!==null&&o.memoizedState!==null||Me;o=Zs;var c=Me;if(Zs=a,(Me=u)&&!c)for(W=s;W!==null;)a=W,u=a.child,a.tag===22&&a.memoizedState!==null?dc(s):u!==null?(u.return=a,W=u):dc(s);for(;i!==null;)W=i,Zh(i),i=i.sibling;W=s,Zs=o,Me=c}uc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):uc(t)}}function uc(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||ta(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Me)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ku(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ku(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Me||e.flags&512&&Mo(e)}catch(f){pe(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function cc(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function dc(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ta(4,e)}catch(u){pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){pe(e,s,u)}}var i=e.return;try{Mo(e)}catch(u){pe(e,i,u)}break;case 5:var a=e.return;try{Mo(e)}catch(u){pe(e,a,u)}}}catch(u){pe(e,e.return,u)}if(e===t){W=null;break}var o=e.sibling;if(o!==null){o.return=e.return,W=o;break}W=e.return}}var vp=Math.ceil,$i=Kt.ReactCurrentDispatcher,Hl=Kt.ReactCurrentOwner,ft=Kt.ReactCurrentBatchConfig,te=0,Ne=null,we=null,Ae=0,rt=0,ur=xn(0),je=0,js=null,Mn=0,na=0,Vl=0,rs=null,Qe=null,Kl=0,_r=1/0,Ut=null,Ui=!1,Fo=null,hn=null,ei=!1,sn=null,Di=0,ss=0,qo=null,gi=-1,mi=0;function We(){return te&6?ye():gi!==-1?gi:gi=ye()}function fn(t){return t.mode&1?te&2&&Ae!==0?Ae&-Ae:ep.transition!==null?(mi===0&&(mi=Ud()),mi):(t=se,t!==0||(t=window.event,t=t===void 0?16:Wd(t.type)),t):1}function jt(t,e,n,r){if(50<ss)throw ss=0,qo=null,Error($(185));Ts(t,n,r),(!(te&2)||t!==Ne)&&(t===Ne&&(!(te&2)&&(na|=n),je===4&&tn(t,Ae)),tt(t,r),n===1&&te===0&&!(e.mode&1)&&(_r=ye()+500,Yi&&wn()))}function tt(t,e){var n=t.callbackNode;em(t,e);var r=ki(t,t===Ne?Ae:0);if(r===0)n!==null&&wu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wu(n),e===1)t.tag===0?Zm(hc.bind(null,t)):uh(hc.bind(null,t)),Jm(function(){!(te&6)&&wn()}),n=null;else{switch(Dd(r)){case 1:n=xl;break;case 4:n=Ld;break;case 16:n=wi;break;case 536870912:n=$d;break;default:n=wi}n=lf(n,ef.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ef(t,e){if(gi=-1,mi=0,te&6)throw Error($(327));var n=t.callbackNode;if(pr()&&t.callbackNode!==n)return null;var r=ki(t,t===Ne?Ae:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mi(t,r);else{e=r;var s=te;te|=2;var i=nf();(Ne!==t||Ae!==e)&&(Ut=null,_r=ye()+500,An(t,e));do try{wp();break}catch(o){tf(t,o)}while(!0);Rl(),$i.current=i,te=s,we!==null?e=0:(Ne=null,Ae=0,e=je)}if(e!==0){if(e===2&&(s=po(t),s!==0&&(r=s,e=Wo(t,s))),e===1)throw n=js,An(t,0),tn(t,r),tt(t,ye()),n;if(e===6)tn(t,r);else{if(s=t.current.alternate,!(r&30)&&!yp(s)&&(e=Mi(t,r),e===2&&(i=po(t),i!==0&&(r=i,e=Wo(t,i))),e===1))throw n=js,An(t,0),tn(t,r),tt(t,ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:En(t,Qe,Ut);break;case 3:if(tn(t,r),(r&130023424)===r&&(e=Kl+500-ye(),10<e)){if(ki(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){We(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=jo(En.bind(null,t,Qe,Ut),e);break}En(t,Qe,Ut);break;case 4:if(tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-_t(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vp(r/1960))-r,10<r){t.timeoutHandle=jo(En.bind(null,t,Qe,Ut),r);break}En(t,Qe,Ut);break;case 5:En(t,Qe,Ut);break;default:throw Error($(329))}}}return tt(t,ye()),t.callbackNode===n?ef.bind(null,t):null}function Wo(t,e){var n=rs;return t.current.memoizedState.isDehydrated&&(An(t,e).flags|=256),t=Mi(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&Ho(e)),t}function Ho(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function yp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tn(t,e){for(e&=~Vl,e&=~na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_t(e),r=1<<n;t[n]=-1,e&=~r}}function hc(t){if(te&6)throw Error($(327));pr();var e=ki(t,0);if(!(e&1))return tt(t,ye()),null;var n=Mi(t,e);if(t.tag!==0&&n===2){var r=po(t);r!==0&&(e=r,n=Wo(t,r))}if(n===1)throw n=js,An(t,0),tn(t,e),tt(t,ye()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,En(t,Qe,Ut),tt(t,ye()),null}function Gl(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(_r=ye()+500,Yi&&wn())}}function zn(t){sn!==null&&sn.tag===0&&!(te&6)&&pr();var e=te;te|=1;var n=ft.transition,r=se;try{if(ft.transition=null,se=1,t)return t()}finally{se=r,ft.transition=n,te=e,!(te&6)&&wn()}}function Jl(){rt=ur.current,ce(ur)}function An(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gm(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(Tl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ni();break;case 3:kr(),ce(Ze),ce(Be),Dl();break;case 5:Ul(r);break;case 4:kr();break;case 13:ce(he);break;case 19:ce(he);break;case 10:Al(r.type._context);break;case 22:case 23:Jl()}n=n.return}if(Ne=t,we=t=gn(t.current,null),Ae=rt=e,je=0,js=null,Vl=na=Mn=0,Qe=rs=null,On!==null){for(e=0;e<On.length;e++)if(n=On[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}On=null}return t}function tf(t,e){do{var n=we;try{if(Rl(),di.current=Li,Ii){for(var r=fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ii=!1}if(Dn=0,Se=_e=fe=null,ts=!1,ks=0,Hl.current=null,n===null||n.return===null){je=1,js=e,we=null;break}e:{var i=t,a=n.return,o=n,u=e;if(e=Ae,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Zu(a);if(v!==null){v.flags&=-257,ec(v,a,o,i,e),v.mode&1&&Yu(i,c,e),e=v,u=c;var x=e.updateQueue;if(x===null){var w=new Set;w.add(u),e.updateQueue=w}else x.add(u);break e}else{if(!(e&1)){Yu(i,c,e),Ql();break e}u=Error($(426))}}else if(de&&o.mode&1){var b=Zu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ec(b,a,o,i,e),Pl(br(u,o));break e}}i=u=br(u,o),je!==4&&(je=2),rs===null?rs=[i]:rs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Dh(i,u,e);Vu(i,p);break e;case 1:o=u;var g=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hn===null||!hn.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Mh(i,o,e);Vu(i,_);break e}}i=i.return}while(i!==null)}sf(n)}catch(j){e=j,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function nf(){var t=$i.current;return $i.current=Li,t===null?Li:t}function Ql(){(je===0||je===3||je===2)&&(je=4),Ne===null||!(Mn&268435455)&&!(na&268435455)||tn(Ne,Ae)}function Mi(t,e){var n=te;te|=2;var r=nf();(Ne!==t||Ae!==e)&&(Ut=null,An(t,e));do try{xp();break}catch(s){tf(t,s)}while(!0);if(Rl(),te=n,$i.current=r,we!==null)throw Error($(261));return Ne=null,Ae=0,je}function xp(){for(;we!==null;)rf(we)}function wp(){for(;we!==null&&!Hg();)rf(we)}function rf(t){var e=of(t.alternate,t,rt);t.memoizedProps=t.pendingProps,e===null?sf(t):we=e,Hl.current=null}function sf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fp(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,we=null;return}}else if(n=hp(n,e,rt),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);je===0&&(je=5)}function En(t,e,n){var r=se,s=ft.transition;try{ft.transition=null,se=1,kp(t,e,n,r)}finally{ft.transition=s,se=r}return null}function kp(t,e,n,r){do pr();while(sn!==null);if(te&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(tm(t,i),t===Ne&&(we=Ne=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ei||(ei=!0,lf(wi,function(){return pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var a=se;se=1;var o=te;te|=4,Hl.current=null,mp(t,n),Yh(n,t),Bm(bo),bi=!!ko,bo=ko=null,t.current=n,pp(n),Vg(),te=o,se=a,ft.transition=i}else t.current=n;if(ei&&(ei=!1,sn=t,Di=s),i=t.pendingLanes,i===0&&(hn=null),Jg(n.stateNode),tt(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ui)throw Ui=!1,t=Fo,Fo=null,t;return Di&1&&t.tag!==0&&pr(),i=t.pendingLanes,i&1?t===qo?ss++:(ss=0,qo=t):ss=0,wn(),null}function pr(){if(sn!==null){var t=Dd(Di),e=ft.transition,n=se;try{if(ft.transition=null,se=16>t?16:t,sn===null)var r=!1;else{if(t=sn,sn=null,Di=0,te&6)throw Error($(331));var s=te;for(te|=4,W=t.current;W!==null;){var i=W,a=i.child;if(W.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(W=c;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:ns(8,d,i)}var h=d.child;if(h!==null)h.return=d,W=h;else for(;W!==null;){d=W;var f=d.sibling,v=d.return;if(Jh(d),d===c){W=null;break}if(f!==null){f.return=v,W=f;break}W=v}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}W=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,W=a;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ns(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,W=p;break e}W=i.return}}var g=t.current;for(W=g;W!==null;){a=W;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,W=m;else e:for(a=g;W!==null;){if(o=W,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ta(9,o)}}catch(j){pe(o,o.return,j)}if(o===a){W=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,W=_;break e}W=o.return}}if(te=s,wn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Ki,t)}catch{}r=!0}return r}finally{se=n,ft.transition=e}}return!1}function fc(t,e,n){e=br(n,e),e=Dh(t,e,1),t=dn(t,e,1),e=We(),t!==null&&(Ts(t,1,e),tt(t,e))}function pe(t,e,n){if(t.tag===3)fc(t,t,n);else for(;e!==null;){if(e.tag===3){fc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){t=br(n,t),t=Mh(e,t,1),e=dn(e,t,1),t=We(),e!==null&&(Ts(e,1,t),tt(e,t));break}}e=e.return}}function bp(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ae&n)===n&&(je===4||je===3&&(Ae&130023424)===Ae&&500>ye()-Kl?An(t,0):Vl|=n),tt(t,e)}function af(t,e){e===0&&(t.mode&1?(e=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):e=1);var n=We();t=Ht(t,e),t!==null&&(Ts(t,e,n),tt(t,n))}function _p(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),af(t,n)}function jp(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),af(t,n)}var of;of=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Ye=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ye=!1,dp(t,e,n);Ye=!!(t.flags&131072)}else Ye=!1,de&&e.flags&1048576&&ch(e,Ti,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fi(t,e),t=e.pendingProps;var s=yr(e,Be.current);mr(e,n),s=zl(null,e,r,t,s,n);var i=Bl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,Ei(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ll(e),s.updater=ea,e.stateNode=s,s._reactInternals=e,Oo(e,r,t,n),e=Io(null,e,r,!0,i,n)):(e.tag=0,de&&i&&Cl(e),qe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Np(r),t=yt(r,t),s){case 0:e=Ao(null,e,r,t,n);break e;case 1:e=rc(null,e,r,t,n);break e;case 11:e=tc(null,e,r,t,n);break e;case 14:e=nc(null,e,r,yt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),Ao(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),rc(t,e,r,s,n);case 3:e:{if(qh(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ph(t,e),Ri(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=br(Error($(423)),e),e=sc(t,e,r,n,s);break e}else if(r!==s){s=br(Error($(424)),e),e=sc(t,e,r,n,s);break e}else for(st=cn(e.stateNode.containerInfo.firstChild),it=e,de=!0,kt=null,n=gh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xr(),r===s){e=Vt(t,e,n);break e}qe(t,e,r,n)}e=e.child}return e;case 5:return vh(e),t===null&&Co(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,_o(r,s)?a=null:i!==null&&_o(r,i)&&(e.flags|=32),Fh(t,e),qe(t,e,a,n),e.child;case 6:return t===null&&Co(e),null;case 13:return Wh(t,e,n);case 4:return $l(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wr(e,null,r,n):qe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),tc(t,e,r,s,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,le(Pi,r._currentValue),r._currentValue=a,i!==null)if(St(i.value,a)){if(i.children===s.children&&!Ze.current){e=Vt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ft(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),To(i.return,n,e),o.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),To(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}qe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,mr(e,n),s=mt(s),r=r(s),e.flags|=1,qe(t,e,r,n),e.child;case 14:return r=e.type,s=yt(r,e.pendingProps),s=yt(r.type,s),nc(t,e,r,s,n);case 15:return zh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),fi(t,e),e.tag=1,et(r)?(t=!0,Ei(e)):t=!1,mr(e,n),Uh(e,r,s),Oo(e,r,s,n),Io(null,e,r,!0,t,n);case 19:return Hh(t,e,n);case 22:return Bh(t,e,n)}throw Error($(156,e.tag))};function lf(t,e){return Id(t,e)}function Sp(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(t,e,n,r){return new Sp(t,e,n,r)}function Xl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Np(t){if(typeof t=="function")return Xl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pl)return 11;if(t===vl)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pi(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Xl(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Zn:return In(n.children,s,i,e);case ml:a=8,s|=8;break;case eo:return t=ht(12,n,e,s|2),t.elementType=eo,t.lanes=i,t;case to:return t=ht(13,n,e,s),t.elementType=to,t.lanes=i,t;case no:return t=ht(19,n,e,s),t.elementType=no,t.lanes=i,t;case vd:return ra(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case md:a=10;break e;case pd:a=9;break e;case pl:a=11;break e;case vl:a=14;break e;case Yt:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=ht(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function In(t,e,n,r){return t=ht(7,t,r,e),t.lanes=n,t}function ra(t,e,n,r){return t=ht(22,t,r,e),t.elementType=vd,t.lanes=n,t.stateNode={isHidden:!1},t}function za(t,e,n){return t=ht(6,t,null,e),t.lanes=n,t}function Ba(t,e,n){return e=ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ep(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ka(0),this.expirationTimes=ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yl(t,e,n,r,s,i,a,o,u){return t=new Ep(t,e,n,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ll(i),t}function Cp(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uf(t){if(!t)return vn;t=t._reactInternals;e:{if(Fn(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(et(n))return lh(t,n,e)}return e}function cf(t,e,n,r,s,i,a,o,u){return t=Yl(n,r,!0,t,s,i,a,o,u),t.context=uf(null),n=t.current,r=We(),s=fn(n),i=Ft(r,s),i.callback=e??null,dn(n,i,s),t.current.lanes=s,Ts(t,s,r),tt(t,r),t}function sa(t,e,n,r){var s=e.current,i=We(),a=fn(s);return n=uf(n),e.context===null?e.context=n:e.pendingContext=n,e=Ft(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dn(s,e,a),t!==null&&(jt(t,s,a,i),ci(t,s,a)),a}function zi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zl(t,e){gc(t,e),(t=t.alternate)&&gc(t,e)}function Tp(){return null}var df=typeof reportError=="function"?reportError:function(t){console.error(t)};function eu(t){this._internalRoot=t}ia.prototype.render=eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));sa(t,e,null,null)};ia.prototype.unmount=eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zn(function(){sa(null,t,null,null)}),e[Wt]=null}};function ia(t){this._internalRoot=t}ia.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<en.length&&e!==0&&e<en[n].priority;n++);en.splice(n,0,t),n===0&&qd(t)}};function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function aa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mc(){}function Pp(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=zi(a);i.call(c)}}var a=cf(e,r,t,0,null,!1,!1,"",mc);return t._reactRootContainer=a,t[Wt]=a.current,ps(t.nodeType===8?t.parentNode:t),zn(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=zi(u);o.call(c)}}var u=Yl(t,0,!1,null,null,!1,!1,"",mc);return t._reactRootContainer=u,t[Wt]=u.current,ps(t.nodeType===8?t.parentNode:t),zn(function(){sa(e,u,n,r)}),u}function oa(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var u=zi(a);o.call(u)}}sa(e,a,t,s)}else a=Pp(n,e,t,s,r);return zi(a)}Md=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kr(e.pendingLanes);n!==0&&(wl(e,n|1),tt(e,ye()),!(te&6)&&(_r=ye()+500,wn()))}break;case 13:zn(function(){var r=Ht(t,1);if(r!==null){var s=We();jt(r,t,1,s)}}),Zl(t,1)}};kl=function(t){if(t.tag===13){var e=Ht(t,134217728);if(e!==null){var n=We();jt(e,t,134217728,n)}Zl(t,134217728)}};zd=function(t){if(t.tag===13){var e=fn(t),n=Ht(t,e);if(n!==null){var r=We();jt(n,t,e,r)}Zl(t,e)}};Bd=function(){return se};Fd=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};fo=function(t,e,n){switch(e){case"input":if(io(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xi(r);if(!s)throw Error($(90));xd(r),io(r,s)}}}break;case"textarea":kd(t,n);break;case"select":e=n.value,e!=null&&dr(t,!!n.multiple,e,!1)}};Cd=Gl;Td=zn;var Op={usingClientEntryPoint:!1,Events:[Os,rr,Xi,Nd,Ed,Gl]},Fr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rp={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rd(t),t===null?null:t.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||Tp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ti=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ti.isDisabled&&ti.supportsFiber)try{Ki=ti.inject(Rp),At=ti}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(e))throw Error($(200));return Cp(t,e,null,n)};ot.createRoot=function(t,e){if(!tu(t))throw Error($(299));var n=!1,r="",s=df;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yl(t,1,!1,null,null,n,!1,r,s),t[Wt]=e.current,ps(t.nodeType===8?t.parentNode:t),new eu(e)};ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Rd(e),t=t===null?null:t.stateNode,t};ot.flushSync=function(t){return zn(t)};ot.hydrate=function(t,e,n){if(!aa(e))throw Error($(200));return oa(null,t,e,!0,n)};ot.hydrateRoot=function(t,e,n){if(!tu(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=df;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=cf(e,null,t,1,n??null,s,!1,i,a),t[Wt]=e.current,ps(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ia(e)};ot.render=function(t,e,n){if(!aa(e))throw Error($(200));return oa(null,t,e,!1,n)};ot.unmountComponentAtNode=function(t){if(!aa(t))throw Error($(40));return t._reactRootContainer?(zn(function(){oa(null,null,t,!1,function(){t._reactRootContainer=null,t[Wt]=null})}),!0):!1};ot.unstable_batchedUpdates=Gl;ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!aa(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return oa(t,e,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hf)}catch(t){console.error(t)}}hf(),dd.exports=ot;var Ap=dd.exports,ff,pc=Ap;ff=pc.createRoot,pc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ss(){return Ss=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ss.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const vc="popstate";function Ip(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return Vo("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bi(s)}return $p(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lp(){return Math.random().toString(36).substr(2,8)}function yc(t,e){return{usr:t.state,key:t.key,idx:e}}function Vo(t,e,n,r){return n===void 0&&(n=null),Ss({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pr(e):e,{state:n,key:e&&e.key||r||Lp()})}function Bi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $p(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=an.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(Ss({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=an.Pop;let b=d(),p=b==null?null:b-c;c=b,u&&u({action:o,location:w.location,delta:p})}function f(b,p){o=an.Push;let g=Vo(w.location,b,p);c=d()+1;let m=yc(g,c),_=w.createHref(g);try{a.pushState(m,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&u&&u({action:o,location:w.location,delta:1})}function v(b,p){o=an.Replace;let g=Vo(w.location,b,p);c=d();let m=yc(g,c),_=w.createHref(g);a.replaceState(m,"",_),i&&u&&u({action:o,location:w.location,delta:0})}function x(b){let p=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof b=="string"?b:Bi(b);return g=g.replace(/ $/,"%20"),ve(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let w={get action(){return o},get location(){return t(s,a)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(vc,h),u=b,()=>{s.removeEventListener(vc,h),u=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let p=x(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(b){return a.go(b)}};return w}var xc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xc||(xc={}));function Up(t,e,n){return n===void 0&&(n="/"),Dp(t,e,n)}function Dp(t,e,n,r){let s=typeof e=="string"?Pr(e):e,i=jr(s.pathname||"/",n);if(i==null)return null;let a=mf(t);Mp(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let c=Qp(i);o=Gp(a[u],c)}return o}function mf(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let u={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=mn([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mf(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Vp(c,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let u of pf(i.path))s(i,a,u)}),e}function pf(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=pf(r.join("/")),o=[];return o.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&o.push(...a),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function Mp(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kp(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zp=/^:[\w-]+$/,Bp=3,Fp=2,qp=1,Wp=10,Hp=-2,wc=t=>t==="*";function Vp(t,e){let n=t.split("/"),r=n.length;return n.some(wc)&&(r+=Hp),e&&(r+=Fp),n.filter(s=>!wc(s)).reduce((s,i)=>s+(zp.test(i)?Bp:i===""?qp:Wp),r)}function Kp(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Gp(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let u=r[o],c=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Ko({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:mn([i,h.pathname]),pathnameBase:e0(mn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=mn([i,h.pathnameBase]))}return a}function Ko(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Jp(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:v}=d;if(f==="*"){let w=o[h]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=o[h];return v&&!x?c[f]=void 0:c[f]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function Jp(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Qp(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Xp(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pr(t):t;return{pathname:n?n.startsWith("/")?n:Yp(n,e):e,search:t0(r),hash:n0(s)}}function Yp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fa(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zp(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vf(t,e){let n=Zp(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Pr(t):(s=Ss({},t),ve(!s.pathname||!s.pathname.includes("?"),Fa("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Fa("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Fa("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let u=Xp(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const mn=t=>t.join("/").replace(/\/\/+/g,"/"),e0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xf=["post","put","patch","delete"];new Set(xf);const s0=["get",...xf];new Set(s0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ns(){return Ns=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ns.apply(this,arguments)}const la=y.createContext(null),wf=y.createContext(null),kn=y.createContext(null),ua=y.createContext(null),Gt=y.createContext({outlet:null,matches:[],isDataRoute:!1}),kf=y.createContext(null);function i0(t,e){let{relative:n}=e===void 0?{}:e;As()||ve(!1);let{basename:r,navigator:s}=y.useContext(kn),{hash:i,pathname:a,search:o}=ca(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:mn([r,a])),s.createHref({pathname:u,search:o,hash:i})}function As(){return y.useContext(ua)!=null}function Is(){return As()||ve(!1),y.useContext(ua).location}function bf(t){y.useContext(kn).static||y.useLayoutEffect(t)}function Or(){let{isDataRoute:t}=y.useContext(Gt);return t?k0():a0()}function a0(){As()||ve(!1);let t=y.useContext(la),{basename:e,future:n,navigator:r}=y.useContext(kn),{matches:s}=y.useContext(Gt),{pathname:i}=Is(),a=JSON.stringify(vf(s,n.v7_relativeSplatPath)),o=y.useRef(!1);return bf(()=>{o.current=!0}),y.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=yf(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,i,t])}const o0=y.createContext(null);function l0(t){let e=y.useContext(Gt).outlet;return e&&y.createElement(o0.Provider,{value:t},e)}function u0(){let{matches:t}=y.useContext(Gt),e=t[t.length-1];return e?e.params:{}}function ca(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(kn),{matches:s}=y.useContext(Gt),{pathname:i}=Is(),a=JSON.stringify(vf(s,r.v7_relativeSplatPath));return y.useMemo(()=>yf(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function c0(t,e){return d0(t,e)}function d0(t,e,n,r){As()||ve(!1);let{navigator:s}=y.useContext(kn),{matches:i}=y.useContext(Gt),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Is(),d;if(e){var h;let b=typeof e=="string"?Pr(e):e;u==="/"||(h=b.pathname)!=null&&h.startsWith(u)||ve(!1),d=b}else d=c;let f=d.pathname||"/",v=f;if(u!=="/"){let b=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Up(t,{pathname:v}),w=p0(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:mn([u,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:mn([u,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&w?y.createElement(ua.Provider,{value:{location:Ns({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:an.Pop}},w):w}function h0(){let t=w0(),e=r0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,null)}const f0=y.createElement(h0,null);class g0 extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Gt.Provider,{value:this.props.routeContext},y.createElement(kf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m0(t){let{routeContext:e,match:n,children:r}=t,s=y.useContext(la);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Gt.Provider,{value:e},r)}function p0(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||ve(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:v}=n,x=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||x){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let v,x=!1,w=null,b=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,w=h.route.errorElement||f0,u&&(c<0&&f===0?(b0("route-fallback"),x=!0,b=null):c===f&&(x=!0,b=h.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,f+1)),g=()=>{let m;return v?m=w:x?m=b:h.route.Component?m=y.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,y.createElement(m0,{match:h,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:m})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(g0,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var _f=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_f||{}),jf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jf||{});function v0(t){let e=y.useContext(la);return e||ve(!1),e}function y0(t){let e=y.useContext(wf);return e||ve(!1),e}function x0(t){let e=y.useContext(Gt);return e||ve(!1),e}function Sf(t){let e=x0(),n=e.matches[e.matches.length-1];return n.route.id||ve(!1),n.route.id}function w0(){var t;let e=y.useContext(kf),n=y0(),r=Sf();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k0(){let{router:t}=v0(_f.UseNavigateStable),e=Sf(jf.UseNavigateStable),n=y.useRef(!1);return bf(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ns({fromRouteId:e},i)))},[t,e])}const kc={};function b0(t,e,n){kc[t]||(kc[t]=!0)}function _0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function j0(t){return l0(t.context)}function Ct(t){ve(!1)}function S0(t){let{basename:e="/",children:n=null,location:r,navigationType:s=an.Pop,navigator:i,static:a=!1,future:o}=t;As()&&ve(!1);let u=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:u,navigator:i,static:a,future:Ns({v7_relativeSplatPath:!1},o)}),[u,o,i,a]);typeof r=="string"&&(r=Pr(r));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:x="default"}=r,w=y.useMemo(()=>{let b=jr(d,u);return b==null?null:{location:{pathname:b,search:h,hash:f,state:v,key:x},navigationType:s}},[u,d,h,f,v,x,s]);return w==null?null:y.createElement(kn.Provider,{value:c},y.createElement(ua.Provider,{children:n,value:w}))}function N0(t){let{children:e,location:n}=t;return c0(Go(e),n)}new Promise(()=>{});function Go(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Go(r.props.children,i));return}r.type!==Ct&&ve(!1),!r.props.index||!r.props.children||ve(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Go(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fi(){return Fi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fi.apply(this,arguments)}function Nf(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function E0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C0(t,e){return t.button===0&&(!e||e==="_self")&&!E0(t)}const T0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],O0="6";try{window.__reactRouterVersion=O0}catch{}const R0=y.createContext({isTransitioning:!1}),A0="startTransition",bc=bg[A0];function I0(t){let{basename:e,children:n,future:r,window:s}=t,i=y.useRef();i.current==null&&(i.current=Ip({window:s,v5Compat:!0}));let a=i.current,[o,u]=y.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=y.useCallback(h=>{c&&bc?bc(()=>u(h)):u(h)},[u,c]);return y.useLayoutEffect(()=>a.listen(d),[a,d]),y.useEffect(()=>_0(r),[r]),y.createElement(S0,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const L0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ln=y.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:u,to:c,preventScrollReset:d,viewTransition:h}=e,f=Nf(e,T0),{basename:v}=y.useContext(kn),x,w=!1;if(typeof c=="string"&&$0.test(c)&&(x=c,L0))try{let m=new URL(window.location.href),_=c.startsWith("//")?new URL(m.protocol+c):new URL(c),j=jr(_.pathname,v);_.origin===m.origin&&j!=null?c=j+_.search+_.hash:w=!0}catch{}let b=i0(c,{relative:s}),p=D0(c,{replace:a,state:o,target:u,preventScrollReset:d,relative:s,viewTransition:h});function g(m){r&&r(m),m.defaultPrevented||p(m)}return y.createElement("a",Fi({},f,{href:x||b,onClick:w||i?r:g,ref:n,target:u}))}),_n=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:c,children:d}=e,h=Nf(e,P0),f=ca(u,{relative:h.relative}),v=Is(),x=y.useContext(wf),{navigator:w,basename:b}=y.useContext(kn),p=x!=null&&M0(f)&&c===!0,g=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,m=v.pathname,_=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(m=m.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&b&&(_=jr(_,b)||_);const j=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let E=m===g||!a&&m.startsWith(g)&&m.charAt(j)==="/",T=_!=null&&(_===g||!a&&_.startsWith(g)&&_.charAt(g.length)==="/"),R={isActive:E,isPending:T,isTransitioning:p},P=E?r:void 0,O;typeof i=="function"?O=i(R):O=[i,E?"active":null,T?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(R):o;return y.createElement(Ln,Fi({},h,{"aria-current":P,className:O,ref:n,style:D,to:u,viewTransition:c}),typeof d=="function"?d(R):d)});var Jo;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jo||(Jo={}));var _c;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_c||(_c={}));function U0(t){let e=y.useContext(la);return e||ve(!1),e}function D0(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,u=Or(),c=Is(),d=ca(t,{relative:a});return y.useCallback(h=>{if(C0(h,n)){h.preventDefault();let f=r!==void 0?r:Bi(c)===Bi(d);u(t,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,u,d,r,s,n,t,i,a,o])}function M0(t,e){e===void 0&&(e={});let n=y.useContext(R0);n==null&&ve(!1);let{basename:r}=U0(Jo.useViewTransitionState),s=ca(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=jr(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=jr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ko(s.pathname,a)!=null||Ko(s.pathname,i)!=null}function z0(){const[t,e]=y.useState(()=>typeof window>"u"?!0:localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches);return y.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme",t?"dark":"light")},[t]),{dark:t,toggle:()=>e(n=>!n)}}const B0="modulepreload",F0=function(t){return"/Hoaiducba12k45/"+t},jc={},Ls=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=F0(u),u in jc)return;jc[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":B0,c||(h.as="script"),h.crossOrigin="",h.href=u,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},q0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class nu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Sc extends nu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Nc extends nu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ec extends nu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qo||(Qo={}));var W0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class H0{constructor(e,{headers:n={},customFetch:r,region:s=Qo.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=q0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return W0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a,signal:o}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(u["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(u["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h,signal:o}).catch(b=>{throw b.name==="AbortError"?b:new Sc(b)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new Nc(f);if(!f.ok)throw new Ec(f);let x=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return x==="application/json"?w=yield f.json():x==="application/octet-stream"?w=yield f.blob():x==="text/event-stream"?w=f:x==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Sc(s)}:{data:null,error:s,response:s instanceof Ec||s instanceof Nc?s.context:void 0}}})}}var Xe={},ru={},da={},$s={},ha={},fa={},V0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sr=V0();const K0=Sr.fetch,Ef=Sr.fetch.bind(Sr),Cf=Sr.Headers,G0=Sr.Request,J0=Sr.Response,Rr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cf,Request:G0,Response:J0,default:Ef,fetch:K0},Symbol.toStringTag,{value:"Module"})),Q0=ag(Rr);var ga={};Object.defineProperty(ga,"__esModule",{value:!0});let X0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ga.default=X0;var Tf=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fa,"__esModule",{value:!0});const Y0=Tf(Q0),Z0=Tf(ga);let ev=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Y0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,u,c;let d=null,h=null,f=null,v=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const b=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");b&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,v=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(h=[],d=null,v=200,x="OK")}catch{i.status===404&&b===""?(v=204,x="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,v=200,x="OK"),d&&this.shouldThrowOnError)throw new Z0.default(d)}return{error:d,data:h,count:f,status:v,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,u;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};fa.default=ev;var tv=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ha,"__esModule",{value:!0});const nv=tv(fa);let rv=class extends nv.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const u=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};ha.default=rv;var sv=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($s,"__esModule",{value:!0});const iv=sv(ha);let av=class extends iv.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};$s.default=av;var ov=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(da,"__esModule",{value:!0});const qr=ov($s);let lv=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new qr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,u)=>o.concat(Object.keys(u)),[]);if(a.length>0){const o=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",o.join(","))}}return new qr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new qr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new qr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new qr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};da.default=lv;var Pf=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ru,"__esModule",{value:!0});const uv=Pf(da),cv=Pf($s);let dv=class Of{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new uv.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Of(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const u=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{u.searchParams.append(h,f)})):(o="POST",c=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new cv.default({method:o,url:u,headers:d,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};ru.default=dv;var Ar=gt&&gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PostgrestError=Xe.PostgrestBuilder=Xe.PostgrestTransformBuilder=Xe.PostgrestFilterBuilder=Xe.PostgrestQueryBuilder=Xe.PostgrestClient=void 0;const Rf=Ar(ru);Xe.PostgrestClient=Rf.default;const Af=Ar(da);Xe.PostgrestQueryBuilder=Af.default;const If=Ar($s);Xe.PostgrestFilterBuilder=If.default;const Lf=Ar(ha);Xe.PostgrestTransformBuilder=Lf.default;const $f=Ar(fa);Xe.PostgrestBuilder=$f.default;const Uf=Ar(ga);Xe.PostgrestError=Uf.default;var hv=Xe.default={PostgrestClient:Rf.default,PostgrestQueryBuilder:Af.default,PostgrestFilterBuilder:If.default,PostgrestTransformBuilder:Lf.default,PostgrestBuilder:$f.default,PostgrestError:Uf.default};const{PostgrestClient:fv,PostgrestQueryBuilder:Vx,PostgrestFilterBuilder:Kx,PostgrestTransformBuilder:Gx,PostgrestBuilder:Jx,PostgrestError:Qx}=hv;class gv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mv="2.15.5",pv=`realtime-js/${mv}`,vv="1.0.0",Xo=1e4,yv=1e3,xv=100;var is;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(is||(is={}));var be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(be||(be={}));var wt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(wt||(wt={}));var Yo;(function(t){t.websocket="websocket"})(Yo||(Yo={}));var Tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Tn||(Tn={}));class wv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const u=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:u,payload:c}}}class Df{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(oe||(oe={}));const Cc=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=kv(a,t,e,s),i),{})},kv=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Mf(i,a):Zo(a)},Mf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Sv(e,n)}switch(t){case oe.bool:return bv(e);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return _v(e);case oe.json:case oe.jsonb:return jv(e);case oe.timestamp:return Nv(e);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return Zo(e);default:return Zo(e)}},Zo=t=>t,bv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_v=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},jv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Sv=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Mf(e,o))}return t},Nv=t=>typeof t=="string"?t.replace(" ","T"):t,zf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class qa{constructor(e,n,r={},s=Xo){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tc||(Tc={}));class as{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=as.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=as.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=as.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},u={};return this.map(i,(c,d)=>{a[c]||(u[c]=d)}),this.map(a,(c,d)=>{const h=i[c];if(h){const f=d.map(b=>b.presence_ref),v=h.map(b=>b.presence_ref),x=d.filter(b=>v.indexOf(b.presence_ref)<0),w=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(o[c]=x),w.length>0&&(u[c]=w)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,u)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(u),d.length>0){const h=e[o].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);e[o].unshift(...f)}r(o,d,u)}),this.map(a,(o,u)=>{let c=e[o];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=c,s(o,c,u),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pc||(Pc={}));var os;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(os||(os={}));var Dt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class su{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qa(this,wt.join,this.params,this.timeout),this.rejoinTimer=new Df(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new as(this),this.broadcastEndpointURL=zf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:a,presence:o,private:u}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[os.PRESENCE]&&this.bindings[os.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Dt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Dt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var x;if(this.socket.setAuth(),v===void 0){e==null||e(Dt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,p=[];for(let g=0;g<b;g++){const m=w[g],{filter:{event:_,schema:j,table:E,filter:T}}=m,R=v&&v[g];if(R&&R.event===_&&R.schema===j&&R.table===E&&R.filter===T)p.push(Object.assign(Object.assign({},m),{id:R.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Dt.SUBSCRIBED);return}}).receive("error",v=>{this.state=be.errored,e==null||e(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===be.joined&&e===os.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,u;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qa(this,wt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=be.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qa(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:u,leave:c,join:d}=wt;if(r&&[o,u,c,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var x,w,b;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(w=v.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(v=>v.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var x,w,b,p,g,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const _=v.id,j=(x=v.filter)===null||x===void 0?void 0:x.event;return _&&((w=n.ids)===null||w===void 0?void 0:w.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(g=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:w,table:b,commit_timestamp:p,type:g,errors:m}=x;f=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:p,eventType:g,new:{},old:{},errors:m}),this._getPayloadRecords(x))}v.callback(f,r)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&su.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(wt.close,{},e)}_onError(e){this._on(wt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Cc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Cc(e.columns,e.old_record)),n}}const Wa=()=>{},ni={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ev=[1e3,2e3,5e3,1e4],Cv=1e4,Tv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xo,this.transport=null,this.heartbeatIntervalMs=ni.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wa,this.ref=0,this.reconnectTimer=null,this.logger=Wa,this.conn=null,this.sendBuffer=[],this.serializer=new wv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Ls(async()=>{const{default:o}=await Promise.resolve().then(()=>Rr);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Yo.websocket}`,this.httpEndpoint=zf(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:vv}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case is.connecting:return Tn.Connecting;case is.open:return Tn.Open;case is.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new su(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ni.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(wt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Tv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:pv};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(wt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Df(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ni.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,u,c,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Xo,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ni.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Wa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:h=>Ev[h-1]||Cv,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class iu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Ov extends iu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class el extends iu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Rv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Bf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Av=()=>Rv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ls(()=>Promise.resolve().then(()=>Rr),void 0)).Response:Response}),tl=t=>{if(Array.isArray(t))return t.map(n=>tl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=tl(r)}),e},Iv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Ha=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lv=(t,e,n)=>qn(void 0,void 0,void 0,function*(){const r=yield Av();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new Ov(Ha(s),i,a))}).catch(s=>{e(new el(Ha(s),s))}):e(new el(Ha(t),t))}),$v=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Iv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Us(t,e,n,r,s,i){return qn(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,$v(e,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>Lv(u,o,r))})})}function qi(t,e,n,r){return qn(this,void 0,void 0,function*(){return Us(t,"GET",e,n,r)})}function Ot(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Us(t,"POST",e,r,s,n)})}function nl(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Us(t,"PUT",e,r,s,n)})}function Uv(t,e,n,r){return qn(this,void 0,void 0,function*(){return Us(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ff(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Us(t,"DELETE",e,r,s,n)})}var Dv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class Mv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Dv(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}var zv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class Bv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new Mv(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return zv(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}}var Je=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const Fv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Oc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qv{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Bf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Je(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Oc),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?nl:Ot)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let u;const c=Object.assign({upsert:Oc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield nl(this.fetch,o.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(xe(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ot(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new iu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}update(e,n,r){return Je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Je(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Je(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Je(this,void 0,void 0,function*(){try{const s=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),u=()=>qi(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new Bv(u,this.shouldThrowOnError)}info(e){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield qi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:tl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}exists(e){return Je(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Uv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r)&&r instanceof el){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return Je(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}list(e,n,r){return Je(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Fv),n),{prefix:e||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}})}listV2(e,n){return Je(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Wv="2.12.2",Hv={"X-Client-Info":`storage-js/${Wv}`};var Hn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class Vv{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Hv),n),this.fetch=Bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Hn(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}})}getBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Hn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Hn(this,void 0,void 0,function*(){try{return{data:yield nl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}}class Kv extends Vv{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new qv(this.url,this.headers,e,this.fetch)}}const Gv="2.58.0";let Jr="";typeof Deno<"u"?Jr="deno":typeof document<"u"?Jr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jr="react-native":Jr="node";const Jv={"X-Client-Info":`supabase-js-${Jr}/${Gv}`},Qv={headers:Jv},Xv={schema:"public"},Yv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zv={};var ey=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};const ty=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ef:e=fetch,(...n)=>e(...n)},ny=()=>typeof Headers>"u"?Cf:Headers,ry=(t,e,n)=>{const r=ty(n),s=ny();return(i,a)=>ey(void 0,void 0,void 0,function*(){var o;const u=(o=yield e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};var sy=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};function iy(t){return t.endsWith("/")?t:t+"/"}function ay(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>sy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function oy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(iy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qf="2.72.0",Qn=30*1e3,rl=3,Va=rl*Qn,ly="http://localhost:9999",uy="supabase.auth.token",cy={"X-Client-Info":`gotrue-js/${qf}`},sl="X-Supabase-Api-Version",Wf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hy=10*60*1e3;class au extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function J(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class fy extends au{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function gy(t){return J(t)&&t.name==="AuthApiError"}class Hf extends au{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class bn extends au{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Xt extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function my(t){return J(t)&&t.name==="AuthSessionMissingError"}class Wr extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ri extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class si extends bn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function py(t){return J(t)&&t.name==="AuthImplicitGrantRedirectError"}class Rc extends bn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class il extends bn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ka(t){return J(t)&&t.name==="AuthRetryableFetchError"}class Ac extends bn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class al extends bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ic=` 	
\r=`.split(""),vy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ic.length;e+=1)t[Ic[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function Lc(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wi[r]),e.queuedBits-=6}}function Vf(t,e,n){const r=vy[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $c(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{wy(a,r,n)};for(let a=0;a<t.length;a+=1)Vf(t.charCodeAt(a),s,i);return e.join("")}function yy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function xy(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}yy(r,e)}}function wy(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ky(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Vf(t.charCodeAt(s),n,r);return new Uint8Array(e)}function by(t){const e=[];return xy(t,n=>e.push(n)),new Uint8Array(e)}function _y(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Lc(s,n,r)),Lc(null,n,r),e.join("")}function jy(t){return Math.round(Date.now()/1e3)+t}function Sy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",jn={tested:!1,writable:!1},Kf=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function Ny(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Gf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Rr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ey=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Sn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Qt=async(t,e)=>{await t.removeItem(e)};class ma{constructor(){this.promise=new ma.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ma.promiseConstructor=Promise;function Ga(t){const e=t.split(".");if(e.length!==3)throw new al("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!dy.test(e[r]))throw new al("JWT not in base64url format");return{header:JSON.parse($c(e[0])),payload:JSON.parse($c(e[1])),signature:ky(e[2]),raw:{header:e[0],payload:e[1]}}}async function Cy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ty(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function Py(t){return("0"+t.toString(16)).substr(-2)}function Oy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Py).join("")}async function Ry(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Ay(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Ry(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vn(t,e,n=!1){const r=Oy();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xn(t,`${e}-code-verifier`,s);const i=await Ay(r);return[i,r===i?"plain":"s256"]}const Iy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ly(t){const e=t.headers.get(sl);if(!e||!e.match(Iy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $y(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Uy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kn(t){if(!Dy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ja(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uc(t){return JSON.parse(JSON.stringify(t))}var My=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Cn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zy=[502,503,504];async function Dc(t){var e;if(!Ey(t))throw new il(Cn(t),0);if(zy.includes(t.status))throw new il(Cn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Hf(Cn(i),i)}let r;const s=Ly(t);if(s&&s.getTime()>=Wf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ac(Cn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ac(Cn(n),t.status,n.weak_password.reasons);throw new fy(Cn(n),t.status||500,r)}const By=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Q(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[sl]||(i[sl]=Wf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Fy(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Fy(t,e,n,r,s,i){const a=By(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new il(Cn(u),0)}if(o.ok||await Dc(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(u){await Dc(u)}}function Tt(t){var e;let n=null;Vy(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=jy(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Mc(t){const e=Tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function nn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function qy(t){return{data:t,error:null}}function Wy(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=My(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function Hy(t){return t}function Vy(t){return t.access_token&&t.refresh_token&&t.expires_in}const Qa=["global","local","others"];var Ky=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Gy{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Gf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Qa[0]){if(Qa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qa.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:nn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ky(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Wy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(J(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:nn})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Hy});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(u=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Kn(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:nn})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Kn(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:nn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Kn(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:nn})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Kn(e.userId);try{const{data:n,error:r}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Kn(e.userId),Kn(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}}function zc(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Jy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gn={debug:!!(globalThis&&Kf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Qy extends Jf{}async function Xy(t,e,n){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Qy(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Qf(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Yy(t){return parseInt(t,16)}function Zy(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function ex(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:u,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=Qf(t.address),x=d?`${d}://${r}`:r,w=t.statement?`${t.statement}
`:"",b=`${x} wants you to sign in with your Ethereum account:
${v}

${w}`;let p=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),o&&(p+=`
Not Before: ${o.toISOString()}`),u&&(p+=`
Request ID: ${u}`),c){let g=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);g+=`
- ${m}`}p+=g}return`${b}
${p}`}Jy();const tx={url:ly,storageKey:uy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bc(t,e,n){return await n()}const Jn={};class Es{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Es.nextInstanceID,Es.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tx),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Gy({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Gf(s.fetch),this.lock=s.lock||Bc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Xy:this.lock=Bc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Kf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zc(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Jn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jn[this.storageKey]=Object.assign(Object.assign({},Jn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Ny(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ut()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),py(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return J(n)?{error:n}:{error:new Hf("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Tt}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Vn(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:x},xform:Tt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tt})}else throw new ri("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mc})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mc})}else throw new ri("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Wr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,o,u,c,d,h,f;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:w,wallet:b,statement:p,options:g}=e;let m;if(ut())if(typeof b=="object")m=b;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")m=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=b}const _=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),j=await m.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Qf(j[0]);let T=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const P=await m.request({method:"eth_chainId"});T=Yy(P)}const R={domain:_.host,address:E,statement:p,uri:_.href,version:"1",chainId:T,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=ex(R),x=await m.request({method:"personal_sign",params:[Zy(v),E]})}try{const{data:w,error:b}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Tt});if(b)throw b;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Wr}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:b})}catch(w){if(J(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(e){var n,r,s,i,a,o,u,c,d,h,f,v;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:b,wallet:p,statement:g,options:m}=e;let _;if(ut())if(typeof p=="object")_=p;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const j=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),g?{statement:g}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)x=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),w=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:b,error:p}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:_y(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Tt});if(p)throw p;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Wr}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:p})}catch(b){if(J(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Sn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tt});if(await Qt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Wr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(J(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tt}),{data:u,error:c}=o;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Wr}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Vn(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:u}=e,{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ri("You must provide either an email or phone number.")}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Tt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Vn(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:qy})}catch(i){if(J(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xt;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new ri("You must provide either an email or phone number and a type")}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Va:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Sn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Ja()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:nn}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:nn})})}catch(n){if(J(n))return my(n)&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Xt;const a=s.session;let o=null,u=null;this.flowType==="pkce"&&e.email!=null&&([o,u]=await Vn(this.storage,this.storageKey));const{data:c,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:nn});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Ga(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:o,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(J(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Xt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ut())throw new si("No browser detected.");if(e.error||e.error_description||e.error_code)throw new si(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new si("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rc("No code detected.");const{data:g,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:u,token_type:c}=e;if(!i||!o||!a||!c)throw new si("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;u&&(f=parseInt(u));const v=f-d;v*1e3<=Qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(J(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(gy(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Sy(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Vn(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(J(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,u,c,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(J(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ty(async s=>(s>0&&await Cy(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Ka(i)&&Date.now()+a-r<Qn})}catch(r){if(this._debug(n,"error",r),J(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Sn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Xn(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Ja()}else if(s&&!s.user&&!s.user){const a=await Sn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Qt(this.storage,this.storageKey+"-user"),await Xn(this.storage,this.storageKey,s)):s.user=Ja()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Va;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Va}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Ka(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ma;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Xt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),J(i)){const a={session:null,error:i};return Ka(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Uc(s);await Xn(this.storage,this.storageKey,i)}else{const s=Uc(n);await Xn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Qt(this.storage,this.storageKey),await Qt(this.storage,this.storageKey+"-code-verifier"),await Qt(this.storage,this.storageKey+"-user"),this.userStorage&&await Qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qn}ms, refresh threshold is ${rl} ticks`),s<=rl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Vn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ga(s.access_token);let o=null;a.aal&&(o=a.aal);let u=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+hy>s)return r;const{data:i,error:a}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};r=v.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:u}}=Ga(r);n!=null&&n.allowExpired||$y(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:a},error:null}}const d=Uy(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,by(`${o}.${u}`)))throw new al("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}Es.nextInstanceID=0;const nx=Es;class rx extends nx{constructor(e){super(e)}}var sx=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(h){a(h)}}function u(d){try{c(r.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(o,u)}c((r=r.apply(t,e||[])).next())})};class ix{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const o=oy(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:Xv,realtime:Zv,auth:Object.assign(Object.assign({},Yv),{storageKey:u}),global:Qv},d=ay(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=ry(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new fv(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Kv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new H0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return sx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:o,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rx({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:o,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Pv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ax=(t,e,n)=>new ix(t,e,n);function ox(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ox()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Vc,Kc;let Re=((Kc=(Vc=import.meta)==null?void 0:Vc.env)==null?void 0:Kc.VITE_SUPABASE_URL)||"";var Gc,Jc;let ze=((Jc=(Gc=import.meta)==null?void 0:Gc.env)==null?void 0:Jc.VITE_SUPABASE_ANON_KEY)||"";(!Re||!ze)&&typeof window<"u"&&(Re=window.__SUPABASE_URL__||Re,ze=window.__SUPABASE_ANON_KEY__||ze);const lx="https://lfnhvsigfcaimgiwbeyb.supabase.co",Fc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxmbmh2c2lnZmNhaW1naXdiZXliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MTIyMzYsImV4cCI6MjA3NDk4ODIzNn0.KE6y53oscvkoqmzqGnLHpsI3j5fu3M7w-vLpegHLcj4";(!Re||!ze)&&Fc&&(Re=lx,ze=Fc);try{if((!Re||!ze)&&typeof localStorage<"u"){const t=localStorage.getItem("DEV_SUPABASE_URL"),e=localStorage.getItem("DEV_SUPABASE_ANON_KEY");t&&(Re=t),e&&(ze=e)}}catch{}typeof Re=="string"&&(Re=Re.trim());typeof ze=="string"&&(ze=ze.trim());var Qc,Xc,Yc,Zc;typeof window<"u"&&!window.__SUPA_DEBUG__&&(window.__SUPA_DEBUG__=!0,console.debug("[supabase:diagnostic]",{hasEnvUrl:!!((Xc=(Qc=import.meta)==null?void 0:Qc.env)!=null&&Xc.VITE_SUPABASE_URL),hasEnvKey:!!((Zc=(Yc=import.meta)==null?void 0:Yc.env)!=null&&Zc.VITE_SUPABASE_ANON_KEY),finalUrlLength:(Re==null?void 0:Re.length)||0,finalKeyLength:(ze==null?void 0:ze.length)||0}));let K;if(!Re||!ze){const t="[supabase] Missing config  reason: "+(!Re&&!ze?"both url & key empty":Re?"anon key empty":"url empty")+" (using stub fallback).";console.warn(t);const e=()=>({data:null,error:new Error("Supabase not configured: add VITE_SUPABASE_URL & VITE_SUPABASE_ANON_KEY to your .env")}),n=()=>({select(){return n()},insert(){return Promise.resolve(e())},update(){return Promise.resolve(e())},delete(){return Promise.resolve(e())},upsert(){return Promise.resolve(e())},order(){return n()},limit(){return n()},eq(){return n()},in(){return n()},single(){return Promise.resolve(e())},then(r,s){const{data:i,error:a}=e();return Promise.resolve({data:i,error:a}).then(r,s)}});K={from(){return n()},auth:{getSession:async()=>({data:{session:null},error:null}),signInWithPassword:async()=>e(),signOut:async()=>e(),signUp:async()=>e()},storage:{from(){return{upload:async()=>e(),getPublicUrl(){return{data:{publicUrl:""}}}}}}}}else K=ax(Re,ze,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});const Xf=y.createContext(null);function ux(t){return btoa(unescape(encodeURIComponent(t)))}function cx({children:t}){const[e,n]=y.useState(null),[r,s]=y.useState(!0),[i,a]=y.useState(null),o=y.useCallback(async(P,O,D)=>{if(!P)return null;const F=await K.from("profiles").select("*").eq("id",P).single();if(F.error&&F.error.code!=="406"&&console.warn("[profiles] fetch error",F.error),F.data)return F.data;const Y={id:P,name:O||"User",is_admin:!1,upload_bytes:0,email:D},ae=await K.from("profiles").upsert(Y,{onConflict:"id"});if(ae.error)return console.warn("[profiles] upsert error",ae.error),null;const q=await K.from("profiles").select("*").eq("id",P).single();return q.error&&q.error.code!=="406"&&console.warn("[profiles] fetch2 error",q.error),q.data||null},[]);y.useEffect(()=>{(async()=>{var P,O,D;{const F=await K.auth.getSession(),Y=((P=F==null?void 0:F.data)==null?void 0:P.session)||null;if(Y&&Y.user){const q=await o(Y.user.id,(O=Y.user.email)==null?void 0:O.split("@")[0],Y.user.email);n({id:Y.user.id,email:Y.user.email,name:(q==null?void 0:q.name)||((D=Y.user.email)==null?void 0:D.split("@")[0]),avatar:(q==null?void 0:q.avatar_url)||null,cover:(q==null?void 0:q.cover_url)||null,bio:(q==null?void 0:q.bio)||"",dob:(q==null?void 0:q.dob)||null,isAdmin:!!(q!=null&&q.is_admin),suspended:!!(q!=null&&q.suspended),uploadBytes:(q==null?void 0:q.upload_bytes)||0})}s(!1);const{data:ae}=K.auth.onAuthStateChange(async(q,ie)=>{var Ee,M;if(ie!=null&&ie.user){const B=await o(ie.user.id,(Ee=ie.user.email)==null?void 0:Ee.split("@")[0],ie.user.email);n({id:ie.user.id,email:ie.user.email,name:(B==null?void 0:B.name)||((M=ie.user.email)==null?void 0:M.split("@")[0]),avatar:(B==null?void 0:B.avatar_url)||null,cover:(B==null?void 0:B.cover_url)||null,bio:(B==null?void 0:B.bio)||"",dob:(B==null?void 0:B.dob)||null,isAdmin:!!(B!=null&&B.is_admin),suspended:!!(B!=null&&B.suspended),uploadBytes:(B==null?void 0:B.upload_bytes)||0})}else n(null)});return()=>{ae.subscription.unsubscribe()}}})()},[]);const u=P=>localStorage.setItem("users",JSON.stringify(P)),c=y.useCallback(async({email:P,password:O,name:D})=>{if(!P||!O)throw new Error("Email v mt khu bt buc");{const{data:F,error:Y}=await K.auth.signUp({email:P,password:O});if(Y)throw Y;const ae=F.user.id;return F.session||a(P),{id:ae,email:P}}},[]),d=y.useCallback(async({email:P,password:O})=>{{const{data:D,error:F}=await K.auth.signInWithPassword({email:P,password:O});if(F)throw console.warn("[auth] login error",F),F.message&&F.message.toLowerCase().includes("email not confirmed")?(a(P),new Error("Email cha xc nhn. Kim tra hp th hoc dng resendConfirmation(email).")):new Error(F.message||"Sai email hoc mt khu");const Y=D.user.id,ae=await K.from("profiles").select("*").eq("id",Y).single(),q=ae.error&&ae.error.code==="406"?null:ae.data,ie={id:Y,email:D.user.email,name:(q==null?void 0:q.name)||P.split("@")[0],avatar:(q==null?void 0:q.avatar_url)||null,cover:(q==null?void 0:q.cover_url)||null,bio:(q==null?void 0:q.bio)||"",dob:(q==null?void 0:q.dob)||null,isAdmin:!!(q!=null&&q.is_admin),suspended:!!(q!=null&&q.suspended),uploadBytes:(q==null?void 0:q.upload_bytes)||0};return n(ie),ie}},[]),h=y.useCallback(async()=>{{await K.auth.signOut(),n(null);return}},[]),f=y.useCallback(async P=>{if(!e)throw new Error("Cha ng nhp");{const O={};P.name!==void 0&&(O.name=P.name),P.bio!==void 0&&(O.bio=P.bio),P.avatar!==void 0&&(O.avatar_url=P.avatar),P.cover!==void 0&&(O.cover_url=P.cover),Object.keys(O).length&&await K.from("profiles").update(O).eq("id",e.id);const D={...e,...P};return n(D),D}},[e]),v=y.useCallback(async({oldPassword:P,newPassword:O})=>{if(!e)throw new Error("Cha ng nhp");{const{error:D}=await K.auth.signInWithPassword({email:e.email,password:P});if(D)throw new Error("Mt khu c khng ng");const{error:F}=await K.auth.updateUser({password:O});if(F)throw F;return!0}},[e]),x=y.useCallback(async P=>f({cover:P}),[f]),w=y.useCallback(async()=>{{let P="id, name, bio, avatar_url, cover_url, is_admin, suspended, upload_bytes, dob, created_at, email",{data:O,error:D}=await K.from("profiles").select(P);return D&&(console.warn("[profiles] listUsers fallback (no email column?)",D.message),{data:O}=await K.from("profiles").select("id, name, bio, avatar_url, cover_url, is_admin, suspended, upload_bytes, dob, created_at")),(O||[]).map(F=>({id:F.id,name:F.name,bio:F.bio,avatar:F.avatar_url,cover:F.cover_url,isAdmin:F.is_admin,suspended:F.suspended,uploadBytes:F.upload_bytes,dob:F.dob,createdAt:F.created_at,email:F.email||null}))}},[]),b=y.useCallback(async(P,O)=>{if(!(e!=null&&e.isAdmin))throw new Error("Khng c quyn");{const D={};return O.name!==void 0&&(D.name=O.name),O.bio!==void 0&&(D.bio=O.bio),O.avatar!==void 0&&(D.avatar_url=O.avatar),O.cover!==void 0&&(D.cover_url=O.cover),O.isAdmin!==void 0&&(D.is_admin=O.isAdmin),O.suspended!==void 0&&(D.suspended=O.suspended),Object.keys(D).length&&await K.from("profiles").update(D).eq("id",P),e.id===P&&n(F=>({...F,...O})),{id:P,...O}}},[e]),p=y.useCallback(async P=>{if(!(e!=null&&e.isAdmin))throw new Error("Khng c quyn");{await K.from("profiles").update({suspended:!0}).eq("id",P),e.id===P&&(await K.auth.signOut(),n(null));return}},[e]),g=y.useCallback((P,O)=>{if(!(e!=null&&e.isAdmin))throw new Error("Khng c quyn");const D=JSON.parse(localStorage.getItem("users")||"[]"),F=D.findIndex(Y=>Y.id===P);if(F===-1)throw new Error("User khng tn ti");D[F].passwordHash=ux(O),u(D),e.id===P&&n(D[F])},[e]),m=y.useCallback(async P=>{if(e){const O=(e.uploadBytes||0)+P;await K.from("profiles").update({upload_bytes:O}).eq("id",e.id),n(D=>({...D,uploadBytes:O}));return}},[e]),_=y.useCallback((P,O={})=>{if(e)try{const D=localStorage.getItem("userActivity"),F=D?JSON.parse(D):{};F[e.id]||(F[e.id]={logins:[],actions:[],viewedPosts:{},meta:{}}),F[e.id].actions.push({at:new Date().toISOString(),action:P,...O}),F[e.id].actions.length>500&&(F[e.id].actions=F[e.id].actions.slice(-500)),localStorage.setItem("userActivity",JSON.stringify(F))}catch{}},[e]),j=y.useCallback(P=>{if(e)try{const O=localStorage.getItem("userActivity"),D=O?JSON.parse(O):{};D[e.id]||(D[e.id]={logins:[],actions:[],viewedPosts:{},meta:{}}),D[e.id].viewedPosts[P]||(D[e.id].viewedPosts[P]={count:0,lastAt:null}),D[e.id].viewedPosts[P].count+=1,D[e.id].viewedPosts[P].lastAt=new Date().toISOString(),localStorage.setItem("userActivity",JSON.stringify(D))}catch{}},[e]),E=y.useCallback(P=>{try{const O=localStorage.getItem("userActivity");return O&&JSON.parse(O)[P]||null}catch{return null}},[]),T={user:e,loading:r,authenticated:!!e,login:d,register:c,logout:h,updateProfile:f,changePassword:v,updateCover:x,listUsers:w,adminUpdateUser:b,adminDeleteUser:p,incrementUploadBytes:m,adminResetPassword:g,recordAction:_,recordPostView:j,getActivity:E},R=y.useCallback(async P=>{const O=P||i;if(!O)throw new Error("Khng c email cn xc nhn");const{error:D}=await K.auth.resend({type:"signup",email:O});if(D)throw D;return!0},[i]);return T.pendingEmailConfirm=i,T.resendConfirmation=R,l.jsx(Xf.Provider,{value:T,children:t})}function Fe(){return y.useContext(Xf)}function qc(){const{authenticated:t,user:e,logout:n}=Fe(),[r,s]=y.useState(!1),i=Or(),a=y.useRef(null);y.useEffect(()=>{function c(d){a.current&&!a.current.contains(d.target)&&s(!1)}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);function o(){n(),s(!1),i("/")}const u=((e==null?void 0:e.name)||(e==null?void 0:e.email)||"?").trim().charAt(0).toUpperCase();return l.jsxs("div",{className:"relative",ref:a,children:[l.jsx("button",{type:"button",onClick:()=>s(c=>!c),className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center shadow hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 overflow-hidden",children:t?e!=null&&e.avatar?l.jsx("img",{src:e.avatar,alt:"avatar",className:"w-full h-full object-cover"}):u:""}),r&&l.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-xl overflow-hidden shadow-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 origin-top-right animate-scaleFade",children:[!t&&l.jsxs("div",{className:"py-2",children:[l.jsx(Ln,{to:"/login",onClick:()=>s(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"ng nhp"}),l.jsx(Ln,{to:"/register",onClick:()=>s(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"ng k"})]}),t&&l.jsxs("div",{className:"py-2",children:[l.jsx("div",{className:"px-4 pt-2 pb-1 text-xs uppercase tracking-wide text-gray-400",children:"Ti khon"}),l.jsx("div",{className:"px-4 pb-2 text-sm font-medium text-gray-800 dark:text-gray-100",children:e.name||e.email}),l.jsx(Ln,{to:"/profile",onClick:()=>s(!1),className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"H s"}),l.jsx("button",{onClick:o,className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 font-semibold",children:"ng xut"})]})]})]})}function dx(){const{dark:t,toggle:e}=z0(),{user:n,authenticated:r,logout:s}=Fe();Or();const[i,a]=y.useState(!1),o=({isActive:u})=>u?"text-green-600 dark:text-green-400 font-semibold":"text-gray-600 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400 font-medium";return l.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-black text-gray-800 dark:text-gray-200 flex flex-col",children:[l.jsxs("header",{className:"bg-white dark:bg-gray-900/80 backdrop-blur-sm shadow-md sticky top-0 z-30",children:[l.jsxs("nav",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[l.jsx(Ln,{to:"/",className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"LP A12K45"}),l.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[l.jsx(_n,{to:"/",end:!0,className:o,children:"Trang ch"}),l.jsx(_n,{to:"/gioithieu",className:o,children:"Gii Thiu"}),l.jsx(_n,{to:"/thanhtich",className:o,children:"Thnh Tch"}),r&&(n==null?void 0:n.isAdmin)&&l.jsx(_n,{to:"/admin",className:o,children:"Admin"}),l.jsx(qc,{}),l.jsx("button",{type:"button",onClick:e,className:"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm p-2.5 transition-all","aria-label":"i giao din",children:t?"":""})]}),l.jsxs("div",{className:"md:hidden flex items-center",children:[l.jsx("button",{type:"button",onClick:e,className:"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg text-sm p-2.5 mr-2 transition-all","aria-label":"i giao din",children:t?"":""}),l.jsx("button",{onClick:()=>a(u=>!u),className:"outline-none","aria-label":"M menu",children:l.jsx("svg",{className:"w-6 h-6 text-gray-500 hover:text-green-600 dark:hover:text-green-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),l.jsxs("div",{id:"mobile-menu",className:(i?"":"hidden ")+"md:hidden",children:[l.jsx(_n,{to:"/",end:!0,className:"block py-3 px-6 text-sm text-green-600 dark:text-green-400 font-semibold",onClick:()=>a(!1),children:"Trang ch"}),l.jsx(_n,{to:"/gioithieu",className:"block py-3 px-6 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>a(!1),children:"Gii Thiu"}),l.jsx(_n,{to:"/thanhtich",className:"block py-3 px-6 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800",onClick:()=>a(!1),children:"Thnh Tch"}),l.jsx("div",{className:"py-3 px-6",children:l.jsx(qc,{})})]})]}),l.jsx("div",{className:"flex-1 flex flex-col",children:l.jsx(j0,{})}),l.jsx("footer",{className:"bg-gray-800/50 dark:bg-black/50 text-white py-6 mt-12",children:l.jsx("div",{className:"container mx-auto px-6 text-center",children:l.jsx("p",{children:" 2025 - A12K45"})})})]})}function hx(t=[],e=6e3){const n=y.useRef(t);y.useRef(0),y.useEffect(()=>{n.current=t},[t]),y.useEffect(()=>{const r=document.querySelectorAll(".hero-frame .pane");if(!r.length||!n.current.length)return;let s,i=!0;async function a(){const u=[...n.current];if(u.length){for(let c=u.length-1;c>0;c--){const d=Math.floor(Math.random()*(c+1));[u[c],u[d]]=[u[d],u[c]]}r.forEach((c,d)=>{const h=u[d%u.length];!h||c.getAttribute("data-current")===h||(c.style.setProperty("--pane-after-image",`url('${h}')`),c.classList.add("swap-active"),setTimeout(()=>{c.style.setProperty("--pane-img-inline",`url('${h}')`),c.setAttribute("data-current",h),c.classList.remove("swap-active")},900))})}}function o(){i&&(s=setTimeout(async()=>{await a(),o()},e))}return o(),()=>{i=!1,clearTimeout(s)}},[e])}const fx=["/DMT_0001.jpg","/DMT_0426.jpg","/DMT_9823.jpg","/DVN04905.jpg","/DVN04915.jpg","/DVN06150.jpg"];function ou({text:t="A12K45",images:e=fx}){hx(e,6e3);const n=t.split("");return l.jsx("div",{className:"hero-frame","aria-hidden":"false",children:n.map((r,s)=>l.jsxs("div",{className:"pane","data-pane":s+1,style:{"--pane-img-inline":`url('${e[s%e.length]}')`},children:[l.jsx("span",{className:"pane-char",children:r}),l.jsx("div",{className:"pane-flash"})]},s))})}function gx({open:t,onClose:e}){const n=y.useRef(null),r=y.useRef(null);return y.useEffect(()=>{function s(i){i.key==="Escape"&&e()}return t?(document.addEventListener("keydown",s),setTimeout(()=>{var i;(i=r.current)==null||i.focus()},30),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",s),t||(document.body.style.overflow="")}},[t,e]),t?l.jsxs("div",{className:"fixed inset-0 z-[120] flex items-start md:items-center justify-center p-4 md:p-8 modal-intro-wrapper",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),l.jsxs("div",{ref:n,role:"dialog","aria-modal":"true",className:"relative max-h-[90vh] overflow-y-auto w-full max-w-4xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl ring-1 ring-green-500/20 animate-scaleFade",children:[l.jsxs("div",{className:"flex justify-between items-start p-5 border-b border-gray-200 dark:border-gray-700",children:[l.jsx("h2",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"Gii Thiu A12K45"}),l.jsx("button",{ref:r,onClick:e,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 rounded-full p-2","aria-label":"ng gii thiu",children:""})]}),l.jsxs("div",{className:"p-6 space-y-12",children:[l.jsxs("section",{children:[l.jsx("h3",{className:"text-3xl font-extrabold mb-6 text-green-600 dark:text-green-400",children:"A12K45 L Ai?"}),l.jsx("p",{className:"leading-relaxed text-lg text-gray-700 dark:text-gray-300 mb-4",children:"A12K45 l mt tp th hc sinh y nng lng ca Trng THPT Hoi c B  ni m tinh thn on kt, trch nhim v kht vng hc tp lun c t ln hng u. Chng mnh n t nhiu hon cnh khc nhau nhng gp nhau  cng mt mc tiu: cng tin b, cng to nn nhng k c kh qun ca tui hc tr."}),l.jsxs("p",{className:"leading-relaxed text-lg text-gray-700 dark:text-gray-300 mb-4",children:["Vi phng chm ",l.jsx("span",{className:"font-semibold italic text-green-600 dark:text-green-400",children:"Tn trng  H tr  Vn ln"}),", lp lun khuyn khch mi c nhn th hin th mnh ring, ng thi khng  ai b b li pha sau."]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Gi Tr Ni Bt"}),l.jsxs("ul",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400",children:"Tinh thn on kt"}),l.jsx("p",{className:"text-sm leading-relaxed",children:"Lun st cnh trong hc tp, ngoi kha v cc hot ng phong tro."})]}),l.jsxs("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400",children:"Tn trng & s chia"}),l.jsx("p",{className:"text-sm leading-relaxed",children:"Xy dng mi trng thn thin, lng nghe v h tr nhau."})]}),l.jsxs("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400",children:"K lut & trch nhim"}),l.jsx("p",{className:"text-sm leading-relaxed",children:" thc gi gn n np, ch ng trong mi cng vic chung."})]}),l.jsxs("li",{className:"p-5 bg-white dark:bg-gray-800/50 rounded-xl shadow border border-green-100 dark:border-gray-700",children:[l.jsx("h4",{className:"font-semibold mb-2 text-green-600 dark:text-green-400",children:"Kht vng hc tp"}),l.jsx("p",{className:"text-sm leading-relaxed",children:"Khng ngng phn u  t kt qu tt trong cc k thi."})]})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Nhng Hot ng Tiu Biu"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow",children:[l.jsx("h4",{className:"font-semibold mb-1",children:"Hc tp nng cao"}),l.jsx("p",{className:"text-sm",children:"Nhm hc tp theo mn, chia s ti liu v h tr n thi."})]}),l.jsxs("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow",children:[l.jsx("h4",{className:"font-semibold mb-1",children:"Hot ng thin nguyn"}),l.jsx("p",{className:"text-sm",children:"Tham gia cc chng trnh gy qu v h tr cng ng."})]}),l.jsxs("div",{className:"p-5 rounded-xl bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-gray-900 border border-green-100 dark:border-gray-700 shadow",children:[l.jsx("h4",{className:"font-semibold mb-1",children:"Vn ngh & th thao"}),l.jsx("p",{className:"text-sm",children:"i hnh nng ng gp mt nhiu s kin ca trng."})]})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Thng ip Gi Ti Thnh Vin Mi"}),l.jsxs("div",{className:"p-6 md:p-10 bg-white dark:bg-gray-800/60 rounded-2xl shadow relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-5 bg-[radial-gradient(circle_at_center,theme(colors.green.400),transparent_70%)]"}),l.jsx("p",{className:"relative leading-relaxed text-lg",children:"Nu bn l mt phn ca A12K45, bn khng ch l mt hc sinh trong lp  bn l mt mnh ghp quan trng ca mt tp th ang cng nhau vit nn mt cu chuyn p. Hy t tin th hin, kt ni v cng nhau tin b!"})]})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-gray-50 dark:bg-gray-900/60",children:l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-sm font-medium text-gray-700 dark:text-gray-200",children:"ng"})})]})]}):null}const De={like:[],love:[],haha:[],wow:[],sad:[],angry:[]},Yf=y.createContext(null);function mx({children:t}){const{user:e}=Fe(),[n,r]=y.useState([]),[s,i]=y.useState({}),[a,o]=y.useState(!1),u=y.useRef(null),c=y.useRef({});function d(I){c.current[I]&&(clearTimeout(c.current[I]),delete c.current[I])}const h=y.useCallback(async I=>{const N=I.filter(Boolean).filter((S,C,z)=>z.indexOf(S)===C).filter(S=>!s[S]);if(!N.length)return;const{data:k}=await K.from("profiles").select("id,name,avatar_url").in("id",N);k&&i(S=>({...S,...k.reduce((C,z)=>(C[z.id]={id:z.id,name:z.name,avatar:z.avatar_url},C),{})}))},[s]),f=y.useCallback(async()=>{o(!0);const{data:I,error:N}=await K.from("posts").select("*").order("created_at",{ascending:!1}).limit(100);if(N){o(!1);return}const k=(I||[]).map(U=>U.id);let S=[];if(k.length){const{data:U}=await K.from("comments").select("*").in("post_id",k).order("created_at",{ascending:!0});S=U||[]}const C=S.map(U=>U.id);let z=[];if(C.length){const{data:U}=await K.from("replies").select("*").in("comment_id",C).order("created_at",{ascending:!0});z=U||[]}const A=[...k,...C,...z.map(U=>U.id)];let H=[];if(A.length){const{data:U}=await K.from("reactions").select("*").in("entity_id",A);H=U||[]}const V={};H.forEach(U=>{V[U.entity_id]||(V[U.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),V[U.entity_id][U.reaction_type]=[...V[U.entity_id][U.reaction_type],U.user_id]});const ee={};z.forEach(U=>{ee[U.comment_id]||(ee[U.comment_id]=[]),ee[U.comment_id].push({id:U.id,authorId:U.author_id,content:U.content||"",image:U.image_url||null,createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De}})});const L={};S.forEach(U=>{L[U.post_id]||(L[U.post_id]=[]),L[U.post_id].push({id:U.id,authorId:U.author_id,content:U.content||"",image:U.image_url||null,createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De},replies:ee[U.id]||[]})});const Z=(I||[]).map(U=>({id:U.id,authorId:U.author_id,content:U.content||"",images:U.images||[],createdAt:U.created_at,updatedAt:U.updated_at,deleted:U.deleted,reactions:V[U.id]||{...De},comments:L[U.id]||[]}));r(Z),o(!1),h(Z.flatMap(U=>[U.authorId,...U.comments.map(me=>me.authorId),...U.comments.flatMap(me=>me.replies.map(Te=>Te.authorId))]))},[h]);y.useEffect(()=>{f()},[f]),y.useEffect(()=>{if(u.current)return;const I=K.channel("rt-feed").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},N=>{const k=N.new;r(S=>S.some(C=>C.id===k.id)?S:[{id:k.id,authorId:k.author_id,content:k.content||"",images:k.images||[],createdAt:k.created_at,updatedAt:k.updated_at,deleted:k.deleted,reactions:{...De},comments:[]},...S]),h([k.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts"},N=>{const k=N.new;r(S=>S.map(C=>C.id===k.id?{...C,content:k.content||C.content,images:k.images||C.images,updatedAt:k.updated_at,deleted:k.deleted}:C))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},N=>{const k=N.old;r(S=>S.filter(C=>C.id!==k.id))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},N=>{const k=N.new;r(S=>S.map(C=>{if(C.id!==k.post_id||C.comments.some(A=>A.id===k.id))return C;const z=C.comments.find(A=>A.pending&&A.authorId===k.author_id&&A.content===(k.content||"").trim());return z?(d(z.id),{...C,comments:C.comments.map(A=>A===z?{id:k.id,authorId:k.author_id,content:k.content||"",image:k.image_url||null,createdAt:k.created_at,updatedAt:k.updated_at,deleted:k.deleted,reactions:{...De},replies:[],pending:!1}:A)}):{...C,comments:[...C.comments,{id:k.id,authorId:k.author_id,content:k.content||"",image:k.image_url||null,createdAt:k.created_at,updatedAt:k.updated_at,deleted:k.deleted,reactions:{...De},replies:[]}]}})),h([k.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"comments"},N=>{const k=N.new;r(S=>S.map(C=>C.id===k.post_id?{...C,comments:C.comments.map(z=>z.id===k.id?{...z,content:k.content||z.content,image:k.image_url||z.image,updatedAt:k.updated_at,deleted:k.deleted}:z)}:C))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"comments"},N=>{const k=N.old;r(S=>S.map(C=>C.id===k.post_id?{...C,comments:C.comments.filter(z=>z.id!==k.id)}:C))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"replies"},N=>{const k=N.new;r(S=>S.map(C=>C.comments.some(A=>A.id===k.comment_id)?{...C,comments:C.comments.map(A=>A.id===k.comment_id?{...A,replies:A.replies.some(H=>H.id===k.id)?A.replies:[...A.replies,{id:k.id,authorId:k.author_id,content:k.content||"",image:k.image_url||null,createdAt:k.created_at,updatedAt:k.updated_at,deleted:k.deleted,reactions:{...De}}]}:A)}:C)),h([k.author_id])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"replies"},N=>{const k=N.new;r(S=>S.map(C=>({...C,comments:C.comments.map(z=>z.replies.some(A=>A.id===k.id)?{...z,replies:z.replies.map(A=>A.id===k.id?{...A,content:k.content||A.content,image:k.image_url||A.image,updatedAt:k.updated_at,deleted:k.deleted}:A)}:z)})))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"replies"},N=>{const k=N.old;r(S=>S.map(C=>({...C,comments:C.comments.map(z=>({...z,replies:z.replies.filter(A=>A.id!==k.id)}))})))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"reactions"},N=>{const k=N.new;r(S=>S.map(C=>{if(k.entity_type==="post"&&C.id===k.entity_id){const A={...C.reactions},H=A[k.reaction_type]||[];return H.includes(k.user_id)||(A[k.reaction_type]=[...H,k.user_id]),{...C,reactions:A}}const z=C.comments.map(A=>{if(k.entity_type==="comment"&&A.id===k.entity_id){const V={...A.reactions},ee=V[k.reaction_type]||[];return ee.includes(k.user_id)||(V[k.reaction_type]=[...ee,k.user_id]),{...A,reactions:V}}const H=A.replies.map(V=>{if(k.entity_type==="reply"&&V.id===k.entity_id){const ee={...V.reactions},L=ee[k.reaction_type]||[];return L.includes(k.user_id)||(ee[k.reaction_type]=[...L,k.user_id]),{...V,reactions:ee}}return V});return{...A,replies:H}});return{...C,comments:z}}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"reactions"},N=>{const k=N.old;r(S=>S.map(C=>{if(k.entity_type==="post"&&C.id===k.entity_id){const A={...C.reactions};return Object.keys(A).forEach(H=>A[H]=A[H].filter(V=>V!==k.user_id)),{...C,reactions:A}}const z=C.comments.map(A=>{if(k.entity_type==="comment"&&A.id===k.entity_id){const V={...A.reactions};return Object.keys(V).forEach(ee=>V[ee]=V[ee].filter(L=>L!==k.user_id)),{...A,reactions:V}}const H=A.replies.map(V=>{if(k.entity_type==="reply"&&V.id===k.entity_id){const ee={...V.reactions};return Object.keys(ee).forEach(L=>ee[L]=ee[L].filter(Z=>Z!==k.user_id)),{...V,reactions:ee}}return V});return{...A,replies:H}});return{...C,comments:z}}))}).subscribe();return u.current=I,()=>{K.removeChannel(I)}},[h]);const v=y.useRef(0);y.useEffect(()=>{if(!n.length)return;const I=setInterval(async()=>{const N=Date.now();if(N-v.current<5e3)return;v.current=N;const k=n.map(U=>U.id),S=n.reduce((U,me)=>{const Te=me.comments.reduce((ke,Pe)=>Math.max(ke,new Date(Pe.createdAt).getTime()),0);return Math.max(U,Te)},0),C=S?new Date(S-1e3).toISOString():null;let z=K.from("comments").select("*").in("post_id",k).order("created_at",{ascending:!0}).limit(200);C&&(z=z.gt("created_at",C));const{data:A,error:H}=await z;if(H||!A||!A.length)return;const V={};A.forEach(U=>{V[U.post_id]||(V[U.post_id]=[]),V[U.post_id].push(U)});const ee=A.map(U=>U.id);let L=[];if(ee.length){const{data:U}=await K.from("reactions").select("*").in("entity_id",ee);L=U||[]}const Z={};L.forEach(U=>{Z[U.entity_id]||(Z[U.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),Z[U.entity_id][U.reaction_type]=[...Z[U.entity_id][U.reaction_type],U.user_id]}),r(U=>U.map(me=>{const Te=V[me.id];if(!Te)return me;const ke=new Set(me.comments.map(Ge=>Ge.id)),Pe=Te.filter(Ge=>!ke.has(Ge.id)).map(Ge=>({id:Ge.id,authorId:Ge.author_id,content:Ge.content||"",image:Ge.image_url||null,createdAt:Ge.created_at,updatedAt:Ge.updated_at,deleted:Ge.deleted,reactions:Z[Ge.id]||{...De},replies:[]}));return Pe.length?{...me,comments:[...me.comments,...Pe]}:me})),h(A.map(U=>U.author_id))},3e3);return()=>clearInterval(I)},[n,h]);async function x(I,N=[]){if(!e)throw new Error("Cha ng nhp");const{error:k}=await K.from("posts").insert({author_id:e.id,content:I.trim(),images:N});if(k)throw k}async function w(I,{content:N,images:k=[]}){if(!e)throw new Error("Cha ng nhp");const{error:S}=await K.from("posts").update({content:N.trim(),images:k,updated_at:new Date().toISOString()}).eq("id",I);if(S)throw S}async function b(I){await K.from("posts").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}async function p(I){await K.from("posts").update({deleted:!1,deleted_at:null}).eq("id",I)}async function g(I){await K.from("posts").delete().eq("id",I)}function m(I,N,k){return{id:I,pending:!0,tempLocalId:I,authorId:e.id,content:N.trim(),image:k||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted:!1,reactions:{...De},replies:[]}}function _(I,N,k){r(S=>S.map(C=>{if(C.id!==I)return C;const z=C.comments.some(H=>H.id===k.id);let A=C.comments.map(H=>H.id===N?{id:k.id,authorId:k.author_id,content:k.content||"",image:k.image_url||null,createdAt:k.created_at,updatedAt:k.updated_at,deleted:k.deleted,reactions:{...De},replies:[],pending:!1}:H);return z&&(A=A.filter(H=>H.id!==N)),{...C,comments:A}})),d(N)}async function j(I,N,k=null){if(!e)throw new Error("Cha ng nhp");const S=(N||"").trim();if(!S&&!k)return;const C="temp-"+Date.now()+"-"+Math.random().toString(36).slice(2),z=m(C,S,k);r(A=>A.map(H=>H.id===I?{...H,comments:[...H.comments,z]}:H)),h([e.id]);try{const{data:A,error:H}=await K.from("comments").insert({post_id:I,author_id:e.id,content:S,image_url:k}).select().single();if(H)throw H;A&&_(I,C,A)}catch(A){throw console.warn("addComment error",A),r(H=>H.map(V=>V.id===I?{...V,comments:V.comments.map(ee=>ee.id===C?{...ee,failed:!0,pending:!1}:ee)}:V)),setTimeout(()=>ne(I),1e3),A}c.current[C]=setTimeout(()=>E(I,C),5e3)}function E(I,N){r(k=>k.map(S=>S.id!==I?S:{...S,comments:S.comments.map(C=>C.id===N&&C.pending?{...C,pending:!1,stale:!0}:C)})),ne(I)}async function T(I,N){await K.from("comments").update({content:N.trim(),updated_at:new Date().toISOString()}).eq("id",I)}async function R(I){await K.from("comments").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}async function P(I,N,k){return T(N,k)}async function O(I,N){return R(N)}async function D(I,N,k=null){if(!e)throw new Error("Cha ng nhp");const{error:S}=await K.from("replies").insert({comment_id:I,author_id:e.id,content:N.trim(),image_url:k});if(S)throw S}async function F(I,N){await K.from("replies").update({content:N.trim(),updated_at:new Date().toISOString()}).eq("id",I)}async function Y(I){await K.from("replies").update({deleted:!0,deleted_at:new Date().toISOString()}).eq("id",I)}function ae(I,N,k){r(S=>S.map(C=>{if(I==="post")return C.id!==N?C:{...C,reactions:k(C.reactions)};const z=C.comments.map(A=>{if(I==="comment"&&A.id===N)return{...A,reactions:k(A.reactions)};const H=A.replies.map(V=>I==="reply"&&V.id===N?{...V,reactions:k(V.reactions)}:V);return{...A,replies:H}});return{...C,comments:z}}))}function q(I,N){for(const k of n){if(I==="post"&&k.id===N)return k.reactions;for(const S of k.comments){if(I==="comment"&&S.id===N)return S.reactions;for(const C of S.replies)if(I==="reply"&&C.id===N)return C.reactions}}return{...De}}async function ie(I,N,k){if(!e)throw new Error("Cha ng nhp");const S=q(I,N);ae(I,N,C=>{const z=Object.fromEntries(Object.keys(De).map(A=>[A,(C[A]||[]).filter(H=>H!==e.id)]));return z[k]=[...z[k],e.id],z});try{await K.from("reactions").delete().eq("entity_type",I).eq("entity_id",N).eq("user_id",e.id);const{error:C}=await K.from("reactions").insert({entity_type:I,entity_id:N,user_id:e.id,reaction_type:k});if(C)throw C}catch(C){throw ae(I,N,()=>S),C}}async function Ee(I,N,k){if(!e)throw new Error("Cha ng nhp");const S=q(I,N),C=(S[k]||[]).includes(e.id),z=S;if(C){ae(I,N,A=>{const H=Object.fromEntries(Object.keys(De).map(V=>[V,[...A[V]||[]]]));return H[k]=H[k].filter(V=>V!==e.id),H});try{await K.from("reactions").delete().eq("entity_type",I).eq("entity_id",N).eq("user_id",e.id).eq("reaction_type",k)}catch(A){throw ae(I,N,()=>z),A}}else await ie(I,N,k)}async function M(I,N,k,S){return D(N,k,S)}async function B(I,N,k,S){return F(k,S)}async function G(I,N,k){return Y(k)}const re=y.useRef({});async function ne(I){if(I)try{re.current[I]=!0;const{data:N}=await K.from("posts").select("*").eq("id",I).single();if(!N)return;const{data:k}=await K.from("comments").select("*").eq("post_id",I).order("created_at",{ascending:!0}),S=(k||[]).map(L=>L.id);let C=[];if(S.length){const{data:L}=await K.from("replies").select("*").in("comment_id",S).order("created_at",{ascending:!0});C=L||[]}const z=[I,...S,...C.map(L=>L.id)];let A=[];if(z.length){const{data:L}=await K.from("reactions").select("*").in("entity_id",z);A=L||[]}const H={};A.forEach(L=>{H[L.entity_id]||(H[L.entity_id]={like:[],love:[],haha:[],wow:[],sad:[],angry:[]}),H[L.entity_id][L.reaction_type]=[...H[L.entity_id][L.reaction_type],L.user_id]});const V={};C.forEach(L=>{V[L.comment_id]||(V[L.comment_id]=[]),V[L.comment_id].push({id:L.id,authorId:L.author_id,content:L.content||"",image:L.image_url||null,createdAt:L.created_at,updatedAt:L.updated_at,deleted:L.deleted,reactions:H[L.id]||{...De}})});const ee=(k||[]).map(L=>({id:L.id,authorId:L.author_id,content:L.content||"",image:L.image_url||null,createdAt:L.created_at,updatedAt:L.updated_at,deleted:L.deleted,reactions:H[L.id]||{...De},replies:V[L.id]||[]}));r(L=>L.map(Z=>{if(Z.id!==I)return Z;const U=Z.comments.filter(Te=>Te.pending),me=[...ee];return U.forEach(Te=>{me.some(ke=>ke.authorId===Te.authorId&&ke.content===Te.content)||me.push(Te)}),{id:N.id,authorId:N.author_id,content:N.content||"",images:N.images||[],createdAt:N.created_at,updatedAt:N.updated_at,deleted:N.deleted,reactions:H[N.id]||{...De},comments:me.sort((Te,ke)=>new Date(Te.createdAt)-new Date(ke.createdAt))}}))}finally{delete re.current[I]}}function nt(I){return!!re.current[I]}async function Ce(I,N){await ie("post",I,N)}async function Nt(I,N,k){await ie("comment",N,k)}async function Le(I,N,k){await Ee("comment",N,k)}async function Ke(I,N,k,S){await ie("reply",k,S)}async function Ir(I,N,k,S){await Ee("reply",k,S)}const $t={posts:n,loading:a,profiles:s,usersMap:s,createPost:x,updatePost:w,deletePost:b,restorePost:p,hardDeletePost:g,addComment:j,updateComment:P,deleteComment:O,addReply:M,updateReply:B,deleteReply:G,setReaction:ie,toggleReaction:Ee,refreshPost:ne,isRefreshing:nt,choosePostReaction:Ce,chooseCommentReaction:Nt,toggleCommentReaction:Le,chooseReplyReaction:Ke,toggleReplyReaction:Ir};return l.jsx(Yf.Provider,{value:$t,children:t})}function Lt(){return y.useContext(Yf)}async function px(t,e={}){const{maxDimension:n=1920,targetMaxBytes:r=350*1024,initialQuality:s=.85,minQuality:i=.55,qualityStep:a=.1,mime:o="image/webp"}=e;if(!t||!t.type.startsWith("image/")||t.type==="image/gif")return t;let u;try{u=await createImageBitmap(t)}catch{return t}let{width:c,height:d}=u;const h=Math.min(1,n/Math.max(c,d));h<1&&(c=Math.round(c*h),d=Math.round(d*h));const f=document.createElement("canvas");f.width=c,f.height=d,f.getContext("2d").drawImage(u,0,0,c,d);let x=s,w=null;for(;x>=i;){const g=await new Promise(m=>f.toBlob(m,o,x));if(!g)break;if(g.size<=r){w=g;break}(!w||g.size<w.size)&&(w=g),x-=a}if(!w||w.size>=t.size)return t;const b=o.split("/")[1]||"webp",p=t.name.replace(/\.[^.]+$/,"")+"."+b;return new File([w],p,{type:o,lastModified:Date.now()})}async function Zf(t,e){const n=[];for(const r of t)n.push(await px(r,e));return n}function eg(){const{user:t,authenticated:e}=Fe(),{createPost:n}=Lt(),[r,s]=y.useState(""),[i,a]=y.useState([]),[o,u]=y.useState(null),[c,d]=y.useState(!1),h=y.useRef(null),f=y.useRef(null);y.useEffect(()=>{c&&h.current&&h.current.focus()},[c]),y.useEffect(()=>{function g(m){m.key==="Escape"&&d(!1)}return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]);const v=!e;async function x(g){const m=Array.from(g.target.files||[]);if(!m.length)return;const j=Math.max(0,10-i.length),E=m.slice(0,j),T=await Zf(E,{targetMaxBytes:350*1024,maxDimension:1920,initialQuality:.85});for(const R of T){const P=new FileReader;P.onload=O=>{a(D=>[...D,O.target.result])},P.readAsDataURL(R)}}function w(g){a(m=>m.filter((_,j)=>j!==g))}function b(){a([])}function p(g){if(g.preventDefault(),v)return;const m=r.trim();if(!m&&i.length===0){u("Ni dung trng");return}try{n(m,i),s(""),a([]),u(null),d(!1)}catch(_){u(_.message)}}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-3xl p-4 shadow flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden flex-shrink-0",children:t!=null&&t.avatar?l.jsx("img",{src:t.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((t==null?void 0:t.name)||(t==null?void 0:t.email)||"?").charAt(0).toUpperCase()}),l.jsx("button",{disabled:v,onClick:()=>d(!0),className:"flex-1 text-left text-sm px-4 py-2 rounded-full bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 text-gray-600 dark:text-gray-300 disabled:opacity-60",children:v?"ng nhp  vit...":"Bn ang ngh g?"}),l.jsxs("button",{disabled:v,onClick:()=>d(!0),className:"hidden sm:inline-flex items-center gap-1 text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 hover:bg-green-100 dark:hover:bg-gray-600",children:[" ",l.jsx("span",{children:"nh"})]})]}),c&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>d(!1)}),l.jsxs("div",{ref:f,className:"relative w-full max-w-lg bg-white dark:bg-gray-800/90 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl p-5 flex flex-col gap-4 animate-scaleFade",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base font-semibold text-gray-800 dark:text-gray-100",children:"To bi vit"}),l.jsx("button",{onClick:()=>d(!1),className:"w-8 h-8 inline-flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-300","aria-label":"ng",children:""})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden flex-shrink-0",children:t!=null&&t.avatar?l.jsx("img",{src:t.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((t==null?void 0:t.name)||(t==null?void 0:t.email)||"?").charAt(0).toUpperCase()}),l.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"n danh"})]}),l.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4",children:[l.jsx("textarea",{ref:h,disabled:v,value:r,onChange:g=>s(g.target.value),placeholder:v?"ng nhp  vit...":"Bn ang ngh g?",className:"w-full min-h-[140px] resize-y bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),i.length>0&&l.jsxs("div",{className:"grid gap-2",style:{gridTemplateColumns:i.length===1?"1fr":i.length===2?"repeat(2,1fr)":i.length===3?"repeat(3,1fr)":"repeat(4,1fr)"},children:[i.slice(0,4).map((g,m)=>{const _=m===3&&i.length>4;return l.jsxs("div",{className:"relative group aspect-square overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700 bg-black/5",children:[l.jsx("img",{src:g,alt:"img"+m,className:"object-cover w-full h-full"}),!_&&l.jsx("button",{type:"button",onClick:()=>w(m),className:"absolute top-1.5 right-1.5 w-6 h-6 rounded-full bg-black/60 hover:bg-black/80 text-white text-xs flex items-center justify-center",children:""}),_&&l.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-xl font-semibold",children:["+",i.length-3]})]},m)}),i.length>4&&l.jsxs("div",{className:"col-span-full text-[11px] text-gray-500 dark:text-gray-400",children:["Tng ",i.length," nh (ch hin th 4, khi ng s lu tt c)"]}),l.jsx("button",{type:"button",onClick:b,className:"col-span-full justify-self-end text-[11px] text-red-500 hover:underline",children:"Xa tt c"})]}),l.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("label",{className:"cursor-pointer text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 hover:bg-green-100 dark:hover:bg-gray-600 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx("span",{className:"text-base",children:""}),l.jsx("span",{children:"nh"}),l.jsx("input",{multiple:!0,type:"file",accept:"image/*",className:"hidden",onChange:x})]})}),l.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-sm font-medium text-gray-600 dark:text-gray-200",children:"Hy"}),l.jsx("button",{disabled:v,className:"px-6 py-2.5 rounded-xl bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white text-sm font-semibold shadow",children:"ng"})]})]}),o&&l.jsx("div",{className:"text-xs text-red-500 -mt-2",children:o})]})]})]})]})}const Xa=[{s:60,name:"giy"},{s:60,name:"pht"},{s:24,name:"gi"},{s:30,name:"ngy"},{s:12,name:"thng"}];function Nr(t){const e=typeof t=="string"?Date.parse(t):typeof t=="number"?t:NaN;if(isNaN(e))return"";const n=Math.floor((Date.now()-e)/1e3);if(n<5)return"va xong";let r=n,s=0;for(;s<Xa.length&&r>=Xa[s].s;)r=Math.floor(r/Xa[s].s),s++;const a=["giy","pht","gi","ngy","thng","nm"][s];return`${r} ${a} trc`}const vx=[{type:"like",label:"Thch",icon:""},{type:"love",label:"Yu thch",icon:""},{type:"haha",label:"Haha",icon:""},{type:"wow",label:"Wow",icon:""},{type:"sad",label:"Bun",icon:""},{type:"angry",label:"Phn n",icon:""}];function ol({onSelect:t,onClose:e,anchorRect:n}){const r=y.useRef(null);y.useEffect(()=>{function o(u){r.current&&!r.current.contains(u.target)&&e()}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[e]);const s=260,i=70;let a={};if(n){let u=n.left+n.width/2-s/2;u=Math.max(8,Math.min(window.innerWidth-s-8,u));let c=n.top-i-8;c<4&&(c=n.bottom+8),a={position:"fixed",top:c,left:u,width:s,zIndex:200}}return l.jsx("div",{ref:r,style:a,className:"reaction-picker select-none",children:l.jsx("div",{className:"flex gap-2 bg-white dark:bg-gray-800 px-3 py-2 rounded-full shadow-xl border border-gray-200 dark:border-gray-600",children:vx.map(o=>l.jsxs("button",{onClick:()=>{t(o.type),e()},className:"flex flex-col items-center text-xs focus:outline-none group",children:[l.jsx("span",{className:"text-2xl leading-none group-hover:scale-125 transition-transform drop-shadow",children:o.icon}),l.jsx("span",{className:"mt-1 text-[10px] text-gray-500 dark:text-gray-400",children:o.label})]},o.type))})})}const cr={like:"",love:"",haha:"",wow:"",sad:"",angry:""};function yx({post:t}){const{updatePost:e,deletePost:n,restorePost:r,hardDeletePost:s}=Lt(),{user:i}=Fe(),[a,o]=y.useState(!1),[u,c]=y.useState(!1),[d,h]=y.useState(t.content),[f,v]=y.useState(t.images||[]),[x,w]=y.useState(null),b=y.useRef(null),p=y.useRef(null);bt.useEffect(()=>{function T(R){b.current&&!b.current.contains(R.target)&&o(!1)}return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),bt.useEffect(()=>{u&&p.current&&p.current.focus()},[u]),bt.useEffect(()=>{if(u)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[u]),bt.useEffect(()=>{function T(R){R.key==="Escape"&&u&&c(!1)}return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[u]);async function g(T){const R=Array.from(T.target.files||[]);if(!R.length)return;const P=Math.max(0,10-f.length),O=R.slice(0,P),D=await Zf(O,{targetMaxBytes:350*1024,maxDimension:1920,initialQuality:.85});for(const F of D){const Y=new FileReader;Y.onload=ae=>v(q=>[...q,ae.target.result]),Y.readAsDataURL(F)}}function m(){if(!d.trim()&&f.length===0){w("Ni dung trng");return}e(t.id,{content:d,images:f}),w(null),c(!1)}function _(T){v(R=>R.filter((P,O)=>O!==T))}function j(){v([])}function E(){h(t.content),v(t.images||[]),w(null),c(!0),o(!1)}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative",ref:b,children:[l.jsx("button",{type:"button",onClick:()=>o(T=>!T),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500",children:""}),a&&l.jsxs("div",{className:"absolute right-0 mt-1 w-36 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 shadow-lg py-1 z-30 text-xs",children:[!t.deleted&&l.jsx("button",{onClick:E,className:"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sa bi"}),!t.deleted&&l.jsx("button",{onClick:()=>{confirm("nh du xo bi vit?")&&n(t.id)},className:"w-full text-left px-3 py-2 hover:bg-red-50 dark:hover:bg-gray-700 text-red-600",children:i!=null&&i.isAdmin?"Xo mm (Admin)":"Xo"}),t.deleted&&(i==null?void 0:i.isAdmin)&&l.jsx("button",{onClick:()=>r(t.id),className:"w-full text-left px-3 py-2 hover:bg-green-50 dark:hover:bg-gray-700 text-green-600",children:"Khi phc"}),t.deleted&&(i==null?void 0:i.isAdmin)&&l.jsx("button",{onClick:()=>{confirm("Xa vnh vin?")&&s(t.id)},className:"w-full text-left px-3 py-2 hover:bg-red-100 dark:hover:bg-gray-700 text-red-600",children:"Xa vnh vin"})]})]}),u&&l.jsxs("div",{className:"fixed inset-0 z-[220] flex items-start md:items-center justify-center p-0 md:p-8",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>c(!1)}),l.jsxs("div",{className:"relative w-full max-w-xl bg-white dark:bg-gray-900 rounded-none md:rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 md:p-8 flex flex-col gap-5 animate-scaleFade",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Chnh sa bi vit"}),l.jsx("button",{onClick:()=>c(!1),className:"w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500",children:""})]}),l.jsx("textarea",{ref:p,value:d,onChange:T=>h(T.target.value),placeholder:"Ni dung...",className:"w-full min-h-[160px] resize-y bg-gray-50 dark:bg-gray-800/60 border border-gray-300 dark:border-gray-600 rounded-xl p-4 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),f.length>0&&l.jsxs("div",{className:"grid gap-2",style:{gridTemplateColumns:f.length===1?"1fr":f.length===2?"repeat(2,1fr)":f.length===3?"repeat(3,1fr)":"repeat(4,1fr)"},children:[f.slice(0,4).map((T,R)=>{const P=R===3&&f.length>4;return l.jsxs("div",{className:"relative group aspect-square rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[l.jsx("img",{src:T,alt:"img"+R,className:"object-cover w-full h-full"}),!P&&l.jsx("button",{type:"button",onClick:()=>_(R),className:"absolute top-1.5 right-1.5 w-6 h-6 rounded-full bg-black/60 hover:bg-black/80 text-white text-xs flex items-center justify-center",children:""}),P&&l.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-xl font-semibold",children:["+",f.length-3]})]},R)}),f.length>4&&l.jsxs("div",{className:"col-span-full text-[11px] text-gray-500 dark:text-gray-400",children:["Tng ",f.length," nh"]}),l.jsx("button",{type:"button",onClick:j,className:"col-span-full justify-self-end text-[11px] text-red-500 hover:underline",children:"Xa tt c"})]}),l.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"cursor-pointer text-xs font-medium px-3 py-2 rounded-lg bg-green-50 dark:bg-gray-700 hover:bg-green-100 dark:hover:bg-gray-600 border border-green-200 dark:border-gray-600 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx("span",{className:"text-base",children:""}),l.jsx("span",{children:"nh"}),l.jsx("input",{multiple:!0,type:"file",accept:"image/*",className:"hidden",onChange:g})]}),f.length>0&&l.jsx("button",{type:"button",onClick:j,className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:"Xa ht"})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 rounded-xl bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-medium text-gray-700 dark:text-gray-200",children:"Hy"}),l.jsx("button",{type:"button",onClick:m,className:"px-6 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-xs font-semibold shadow",children:"Lu"})]})]}),x&&l.jsx("div",{className:"text-xs text-red-500",children:x})]})]})]})}function xx({post:t}){const{user:e}=Fe(),{choosePostReaction:n,toggleReaction:r}=Lt(),s=e==null?void 0:e.id,[i,a]=y.useState(!1),o=y.useRef(null),u=bt.useMemo(()=>s&&Object.keys(t.reactions).find(f=>(t.reactions[f]||[]).includes(s))||null,[s,t.reactions]);function c(){s&&(u?r(t.id,u):a(!0))}const d=Object.values(t.reactions).reduce((f,v)=>f+((v==null?void 0:v.length)||0),0),h=Object.entries(t.reactions).filter(([,f])=>f.length>0).sort((f,v)=>v[1].length-f[1].length).slice(0,3).map(([f])=>cr[f]);return l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{ref:o,onClick:c,onMouseEnter:()=>{u||a(!0)},onMouseLeave:()=>{},className:`px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 border transition ${u?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800/70 border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"}`,children:[u?cr[u]:"",l.jsx("span",{children:u?"Bn":"Thch"})]}),d>0&&l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[h.map(f=>l.jsx("span",{children:f},f))," ",l.jsx("span",{className:"ml-1",children:d})]})]}),i&&o.current&&l.jsx(ol,{anchorRect:o.current.getBoundingClientRect(),onSelect:f=>n(t.id,f),onClose:()=>a(!1)})]})}function wx({post:t,preview:e=!1,onRequestExpand:n}){const{user:r,authenticated:s}=Fe(),{addComment:i,usersMap:a={},chooseCommentReaction:o,toggleCommentReaction:u,deleteComment:c,updateComment:d,addReply:h,chooseReplyReaction:f,toggleReplyReaction:v,deleteReply:x,updateReply:w}=Lt(),[b,p]=y.useState(""),[g,m]=y.useState(!1),[_,j]=y.useState(""),[E,T]=y.useState(null),[R,P]=y.useState(null),[O,D]=y.useState(null),[F,Y]=y.useState(""),[ae,q]=y.useState(null),[ie,Ee]=y.useState(""),[M,B]=y.useState(null),[G,re]=y.useState({}),[ne,nt]=y.useState(null),[Ce,Nt]=y.useState({}),Le=y.useRef({}),Ke=y.useRef({});bt.useEffect(()=>{function S(C){if(!(C.target.closest&&C.target.closest(".reaction-picker"))){if(E){const z=Le.current[E];z&&!z.contains(C.target)&&T(null)}if(M){const z=Ke.current[M];z&&!z.contains(C.target)&&B(null)}}}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[E,M]);function Ir(S){var A;const C=(A=S.target.files)==null?void 0:A[0];if(!C||C.size>1024*1024)return;const z=new FileReader;z.onload=H=>nt(H.target.result),z.readAsDataURL(C)}function Ds(S,C){var H;const z=(H=S.target.files)==null?void 0:H[0];if(!z||z.size>1024*1024)return;const A=new FileReader;A.onload=V=>Nt(ee=>({...ee,[C]:V.target.result})),A.readAsDataURL(z)}function $t(S){Nt(C=>({...C,[S]:null}))}async function I(S){if(S.preventDefault(),!s||g)return;const C=b.trim();if(!(!C&&!ne)){m(!0),j("");try{const z=await i(t.id,C,ne);p(""),nt(null)}catch(z){j(z.message||"Li gi bnh lun")}finally{m(!1)}}}const N=t.comments,k=e?N.slice(-2):N;return l.jsxs("div",{className:"mt-3 space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[k.map(S=>{var ee;const C=a[S.authorId]||{},z=C.name||S.authorName||"n danh",A=C.avatar||S.authorAvatar,H=r?Object.keys(S.reactions||{}).find(L=>{var Z;return(((Z=S.reactions)==null?void 0:Z[L])||[]).includes(r.id)}):null,V=S.reactions?Object.values(S.reactions).reduce((L,Z)=>L+((Z==null?void 0:Z.length)||0),0):0;return l.jsxs("div",{className:"flex gap-2 items-start",children:[l.jsx("button",{type:"button",onClick:()=>window.location.href=`/profile/${S.authorId}`,className:"w-7 h-7 rounded-full bg-green-600 text-white flex items-center justify-center text-xs font-semibold overflow-hidden focus:outline-none focus:ring-2 focus:ring-green-500",children:A?l.jsx("img",{src:A,alt:"avatar",className:"w-full h-full object-cover"}):z.charAt(0).toUpperCase()}),l.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800/70 px-3 py-2 rounded-xl text-xs leading-relaxed flex-1",children:[l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("button",{type:"button",onClick:()=>window.location.href=`/profile/${S.authorId}`,className:"font-semibold text-left text-gray-800 dark:text-gray-100 hover:underline",children:z}),((r==null?void 0:r.id)===S.authorId||(r==null?void 0:r.isAdmin))&&l.jsx(Wc,{onEdit:()=>{D(S.id),Y(S.content)},onDelete:()=>c(t.id,S.id)})]}),O===S.id?l.jsxs("div",{className:"mt-1 space-y-2",children:[l.jsx("textarea",{value:F,onChange:L=>Y(L.target.value),rows:2,className:"w-full resize-none p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900/60 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{d(t.id,S.id,F),D(null)},className:"px-3 py-1 rounded-md bg-green-600 text-white text-[11px]",children:"Lu"}),l.jsx("button",{onClick:()=>{D(null),Y("")},className:"px-3 py-1 rounded-md bg-gray-300 dark:bg-gray-700 text-[11px]",children:"Hy"})]})]}):l.jsxs("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words",children:[S.content,S.pending&&l.jsx("span",{className:"ml-2 inline-flex items-center gap-1 text-[10px] text-orange-500 animate-pulse",children:" ang gi..."})]}),S.image&&l.jsx("div",{className:"mt-2",children:l.jsx("img",{src:S.image,alt:"comment",className:"w-40 max-h-40 object-cover rounded-lg border border-gray-300 dark:border-gray-600"})}),l.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-gray-400",children:Nr(S.createdAt)}),l.jsxs("button",{onClick:()=>{r&&(H?u(t.id,S.id,H):T(S.id))},ref:L=>Le.current[S.id]=L,className:`px-2 py-0.5 rounded-full border text-[10px] flex items-center gap-1 ${H?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`,children:[H?cr[H]:(()=>{const L=Object.entries(S.reactions||{}).filter(([,Z])=>Z==null?void 0:Z.length).sort((Z,U)=>U[1].length-Z[1].length);return L.length?cr[L[0][0]]:""})()," ",V>0&&l.jsx("span",{children:V})]}),l.jsx("button",{onClick:()=>P(R===S.id?null:S.id),className:"text-[10px] text-green-600 hover:underline",children:R===S.id?"ng":"Tr li"})]}),R===S.id&&l.jsxs("div",{className:"mt-2 flex gap-2 items-start",children:[l.jsx("textarea",{value:G[S.id]||"",onChange:L=>re(Z=>({...Z,[S.id]:L.target.value})),rows:2,className:"flex-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900/60 resize-none focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Vit phn hi..."}),l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsxs("label",{className:"text-[10px] cursor-pointer px-2 py-1 rounded bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-600 dark:text-green-300",children:["nh",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:L=>Ds(L,S.id)})]}),Ce[S.id]&&l.jsxs("div",{className:"relative w-16 h-16",children:[l.jsx("img",{src:Ce[S.id],alt:"reply",className:"w-16 h-16 object-cover rounded border border-gray-300 dark:border-gray-600"}),l.jsx("button",{type:"button",onClick:()=>$t(S.id),className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-black/70 text-white text-[10px] flex items-center justify-center",children:""})]})]}),l.jsx("button",{onClick:()=>{const L=(G[S.id]||"").trim();!L&&!Ce[S.id]||(h(t.id,S.id,L,Ce[S.id]||null),re(Z=>({...Z,[S.id]:""})),$t(S.id),P(null))},className:"px-3 py-2 rounded-lg bg-green-600 text-white text-[11px]",children:"Gi"})]}),((ee=S.replies)==null?void 0:ee.length)>0&&l.jsx("div",{className:"mt-3 space-y-2 border-l border-gray-300 dark:border-gray-700 pl-3",children:S.replies.map(L=>{const Z=a[L.authorId]||{},U=Z.name||"n danh",me=r?Object.keys(L.reactions||{}).find(ke=>{var Pe;return(((Pe=L.reactions)==null?void 0:Pe[ke])||[]).includes(r.id)}):null,Te=L.reactions?Object.values(L.reactions).reduce((ke,Pe)=>ke+((Pe==null?void 0:Pe.length)||0),0):0;return l.jsxs("div",{className:"flex gap-2 items-start",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white text-[10px] flex items-center justify-center overflow-hidden",children:Z.avatar?l.jsx("img",{src:Z.avatar,alt:"avatar",className:"w-full h-full object-cover"}):U.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-gray-900/60 rounded-xl px-3 py-2",children:[l.jsxs("div",{className:"flex justify-between gap-2",children:[l.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200 text-[11px]",children:U}),((r==null?void 0:r.id)===L.authorId||(r==null?void 0:r.isAdmin))&&l.jsx(Wc,{small:!0,onEdit:()=>{q(L.id),Ee(L.content)},onDelete:()=>x(t.id,S.id,L.id)})]}),ae===L.id?l.jsxs("div",{className:"mt-1 space-y-2",children:[l.jsx("textarea",{value:ie,onChange:ke=>Ee(ke.target.value),rows:2,className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800/60 resize-none focus:outline-none focus:ring-2 focus:ring-green-500 text-[11px]"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{w(t.id,S.id,L.id,ie),q(null)},className:"px-3 py-1 rounded-md bg-green-600 text-white text-[10px]",children:"Lu"}),l.jsx("button",{onClick:()=>{q(null),Ee("")},className:"px-3 py-1 rounded-md bg-gray-300 dark:bg-gray-700 text-[10px]",children:"Hy"})]})]}):l.jsx("div",{className:"text-[11px] text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words",children:L.content}),L.image&&l.jsx("div",{className:"mt-2",children:l.jsx("img",{src:L.image,alt:"reply",className:"w-32 h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600"})}),l.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-[9px] text-gray-400",children:Nr(L.createdAt)}),l.jsxs("button",{onClick:()=>{r&&(me?v(t.id,S.id,L.id,me):B(L.id))},ref:ke=>Ke.current[L.id]=ke,className:`px-2 py-0.5 rounded-full border text-[9px] flex items-center gap-1 ${me?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300"}`,children:[me?cr[me]:(()=>{const ke=Object.entries(L.reactions||{}).filter(([,Pe])=>Pe==null?void 0:Pe.length).sort((Pe,Ge)=>Ge[1].length-Pe[1].length);return ke.length?cr[ke[0][0]]:""})()," ",Te>0&&l.jsx("span",{children:Te})]})]})]})]},L.id)})})]})]},S.id)}),e&&N.length>k.length&&l.jsxs("button",{type:"button",onClick:n,className:"text-[11px] text-green-600 hover:underline px-2",children:["Xem thm ",N.length-k.length," bnh lun..."]}),E&&Le.current[E]&&l.jsx(ol,{anchorRect:Le.current[E].getBoundingClientRect(),onSelect:S=>{o(t.id,E,S),T(null)},onClose:()=>T(null)}),M&&Ke.current[M]&&l.jsx(ol,{anchorRect:Ke.current[M].getBoundingClientRect(),onSelect:S=>{var C;f(t.id,(C=t.comments.find(z=>{var A;return(A=z.replies)==null?void 0:A.some(H=>H.id===M)}))==null?void 0:C.id,M,S),B(null)},onClose:()=>B(null)})]}),l.jsxs("form",{onSubmit:I,className:"flex items-center gap-2 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx("input",{disabled:!s,value:b,onChange:S=>p(S.target.value),placeholder:s?"Vit bnh lun...":"ng nhp  bnh lun",name:"comment",id:`comment-input-${t.id}`,autoComplete:"off",className:"flex-1 text-xs px-3 py-2 rounded-full bg-gray-50 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsxs("label",{className:"text-[10px] cursor-pointer px-2 py-1 rounded bg-green-50 dark:bg-gray-700 border border-green-200 dark:border-gray-600 text-green-600 dark:text-green-300",children:["nh",l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ir})]})]}),ne&&l.jsxs("div",{className:"relative w-16 h-16",children:[l.jsx("img",{src:ne,alt:"comment",className:"w-16 h-16 object-cover rounded border border-gray-300 dark:border-gray-600"}),l.jsx("button",{type:"button",onClick:()=>nt(null),className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-black/70 text-white text-[10px] flex items-center justify-center",children:""})]}),l.jsx("button",{disabled:!s||!b.trim()&&!ne||g,className:"text-xs px-3 py-2 rounded-full bg-green-600 text-white disabled:opacity-50",children:g?"ang gi...":"Gi"})]}),_&&l.jsx("div",{className:"text-[11px] text-red-500",children:_})]})}function Wc({onEdit:t,onDelete:e,small:n}){const[r,s]=y.useState(!1),i=y.useRef(null),{user:a}=Fe();return bt.useEffect(()=>{function o(u){i.current&&!i.current.contains(u.target)&&s(!1)}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),l.jsxs("div",{className:"relative",ref:i,children:[l.jsx("button",{type:"button",onClick:()=>s(o=>!o),className:`${n?"w-6 h-6 text-[10px]":"w-6 h-6"} flex items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500`,children:""}),r&&l.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 text-[11px] z-40",children:[l.jsx("button",{onClick:()=>{t(),s(!1)},className:"w-full text-left px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sa"}),l.jsx("button",{onClick:()=>{e(),s(!1)},className:"w-full text-left px-3 py-1.5 hover:bg-red-50 dark:hover:bg-gray-700 text-red-600",children:a!=null&&a.isAdmin?"Xa (Admin)":"Xa"})]})]})}function kx({post:t,onClose:e}){return l.jsxs("div",{className:"fixed inset-0 z-[160] flex items-start md:items-center justify-center p-0 md:p-8",children:[l.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:"relative w-full md:max-w-3xl max-h-[95vh] overflow-y-auto bg-white dark:bg-gray-900 rounded-none md:rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700",children:[l.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-9 h-9 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white text-lg",children:""}),l.jsx("div",{className:"p-6 md:p-10",children:l.jsx(tg,{post:t,focusMode:!0,onCloseFocus:e})})]})]})}function tg({post:t,focusMode:e=!1,onCloseFocus:n,onOpenFocus:r}){var w;const{usersMap:s={}}=Lt(),{user:i}=Fe(),a=s[t.authorId]||{},[o,u]=y.useState(!1),[c,d]=y.useState(0);function h(b){d(b),u(!0),document.body.style.overflow="hidden"}function f(){u(!1),document.body.style.overflow=""}function v(){d(b=>(b+1)%t.images.length)}function x(){d(b=>(b-1+t.images.length)%t.images.length)}return bt.useEffect(()=>{function b(p){o&&(p.key==="Escape"&&f(),p.key==="ArrowRight"&&v(),p.key==="ArrowLeft"&&x())}return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[o,(w=t.images)==null?void 0:w.length]),l.jsx("article",{className:`${e?"bg-transparent shadow-none p-0 border-0":"bg-white dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 shadow-lg"} rounded-3xl p-0`,children:l.jsxs("div",{className:`${e?"":"p-8 md:p-10"} rounded-3xl`,children:[l.jsxs("header",{className:"flex items-start gap-4",children:[l.jsx("button",{type:"button",onClick:()=>window.location.href=`/profile/${t.authorId}`,className:"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold flex items-center justify-center overflow-hidden ring-0 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:a!=null&&a.avatar?l.jsx("img",{src:a.avatar,alt:"avatar",className:"w-full h-full object-cover"}):((a==null?void 0:a.name)||(a==null?void 0:a.email)||"?").charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("button",{type:"button",onClick:()=>window.location.href=`/profile/${t.authorId}`,className:"font-semibold text-left text-[17px] md:text-[18px] text-gray-800 dark:text-gray-100 leading-tight hover:underline",children:(a==null?void 0:a.name)||"n danh"}),l.jsxs("div",{className:"text-[12px] text-gray-400 flex gap-2 items-center",children:[Nr(t.createdAt),l.jsxs("span",{className:"hidden md:inline text-gray-500",children:[" ",new Date(t.createdAt).toLocaleString()]}),t.updatedAt&&l.jsx("span",{children:"( sa)"}),t.deleted&&l.jsx("span",{className:"text-red-500 font-medium",children:"[ XA]"})]})]}),((i==null?void 0:i.id)===t.authorId||(i==null?void 0:i.isAdmin))&&l.jsx(yx,{post:t})]}),t.content&&l.jsx("div",{className:"mt-6 text-[16px] md:text-[17px] leading-relaxed whitespace-pre-wrap break-words text-gray-800 dark:text-gray-200",children:t.content}),t.images&&t.images.length>0&&l.jsxs("div",{className:"mt-6",children:[!e&&l.jsx("div",{className:`grid gap-2 ${t.images.length===1?"grid-cols-1":"grid-cols-2"}`,children:t.images.slice(0,4).map((b,p)=>{const g=p===3&&t.images.length>4,m=t.images.length===1;return l.jsxs("button",{type:"button",onClick:()=>h(p),className:`group relative overflow-hidden rounded-2xl border border-gray-200 dark:border-gray-700 bg-black/5 ${m?"aspect-[4/3] md:aspect-[4/3]":"aspect-square"} flex items-center justify-center`,children:[l.jsx("img",{src:b,alt:"pimg"+p,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),g&&l.jsxs("div",{onClick:()=>h(3),className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-3xl font-semibold",children:["+",t.images.length-3]})]},p)})}),e&&l.jsx("div",{className:"grid gap-3 md:gap-4",style:{gridTemplateColumns:t.images.length===1?"minmax(0,1fr)":t.images.length===2?"repeat(2,minmax(0,1fr))":"repeat(auto-fill,minmax(220px,1fr))"},children:t.images.map((b,p)=>l.jsx("button",{type:"button",onClick:()=>h(p),className:`relative rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-black/5 group ${t.images.length===1?"aspect-[4/3] md:aspect-[4/3]":"aspect-square md:aspect-[4/3]"} flex items-center justify-center`,children:l.jsx("img",{src:b,alt:"full"+p,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"})},p))})]}),o&&l.jsxs("div",{className:"fixed inset-0 z-[300] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:f}),l.jsxs("div",{className:"relative w-full max-w-4xl flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-white text-sm px-1",children:[l.jsxs("span",{children:[c+1,"/",t.images.length]}),l.jsx("button",{onClick:f,className:"w-9 h-9 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white",children:""})]}),l.jsxs("div",{className:"relative self-center w-[min(100%,880px)] h-[70vh] max-h-[780px] rounded-2xl bg-black flex items-center justify-center shadow-2xl border border-white/10 overflow-hidden",children:[l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black",children:l.jsx("img",{src:t.images[c],alt:"view",className:"max-w-full max-h-full object-contain"})}),t.images.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:x,className:"absolute left-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/10 hover:bg-white/25 text-white text-xl flex items-center justify-center backdrop-blur-sm",children:""}),l.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/10 hover:bg-white/25 text-white text-xl flex items-center justify-center backdrop-blur-sm",children:""})]})]}),t.images.length>1&&l.jsx("div",{className:"mx-auto w-full max-w-4xl flex flex-wrap gap-2 justify-center",children:t.images.map((b,p)=>l.jsx("button",{onClick:()=>d(p),className:`relative rounded-md overflow-hidden border ${c===p?"border-green-500 shadow-lg":"border-transparent"} bg-white/10 w-16 h-16 md:w-20 md:h-20 group`,children:l.jsx("img",{src:b,alt:"thumb"+p,className:"w-full h-full object-cover group-hover:opacity-80"})},p))})]})]}),l.jsx(xx,{post:t}),l.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Bnh lun"}),l.jsx(jx,{postId:t.id})]}),l.jsx(wx,{post:t,preview:!e,onRequestExpand:r})]}),!e&&l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx(bx,{onOpen:r})}),e&&l.jsx("div",{className:"mt-8 flex justify-end",children:l.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-xs font-medium",children:"ng"})})]})})}function bx({onOpen:t}){return l.jsx("button",{onClick:t,className:"px-5 py-2 rounded-full bg-green-600 hover:bg-green-700 text-white text-sm font-medium shadow",children:"Bnh lun"})}function ng({post:t}){const[e,n]=y.useState(!1);return bt.useEffect(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow=""},[e]),l.jsxs(l.Fragment,{children:[l.jsx(tg,{post:t,onCloseFocus:()=>n(!1),onOpenFocus:()=>n(!0)}),e&&l.jsx(kx,{post:t,onClose:()=>n(!1)})]})}function _x({posts:t}){const{user:e}=Fe(),n=e!=null&&e.isAdmin?t:t.filter(r=>!r.deleted);return n.length?l.jsx("div",{className:"space-y-4",children:n.map(r=>l.jsx(ng,{post:r},r.id))}):l.jsx("div",{className:"text-sm text-gray-500 text-center py-10",children:"Cha c bi vit no"})}function jx({postId:t}){const{refreshPost:e,isRefreshing:n}=Lt(),r=n(t);return l.jsx("button",{type:"button",onClick:()=>e(t),disabled:r,title:"Lm mi bnh lun",className:`w-7 h-7 flex items-center justify-center rounded-full border text-gray-500 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:hover:bg-gray-700 text-xs ${r?"animate-spin pointer-events-none opacity-70":""}`,style:{fontSize:"13px"},children:r?"":""})}function Sx(){const[t,e]=y.useState(!1),[n,r]=y.useState(!1),{posts:s}=Lt(),i=[...s].sort((a,o)=>o.createdAt-a.createdAt);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`hero-block ${n?"collapsed":""} relative overflow-hidden transition-all duration-300 ${n?"h-[200px]":"h-[520px]"}`,children:[l.jsx("div",{className:"absolute inset-0 -z-10 pointer-events-none bg-gradient-to-b from-indigo-700 via-sky-600/80 to-transparent dark:from-slate-800 dark:via-slate-800/90 dark:to-transparent"}),l.jsxs("div",{className:`container mx-auto px-6 ${n?"py-8":"py-24"} text-center relative z-[1] select-none transition-all duration-300`,children:[l.jsx(ou,{text:"A12K45"}),l.jsx("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg",children:"Trng THPT Hoi c B"}),l.jsx("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan",children:"Nin kha 2022 - 2025"})]}),l.jsx("div",{className:"absolute left-1/2 bottom-2 md:bottom-4 -translate-x-1/2 z-10",children:l.jsx("button",{onClick:()=>r(a=>!a),className:"w-12 h-12 rounded-full shadow-xl bg-white/90 dark:bg-gray-900/80 backdrop-blur border border-gray-200 dark:border-gray-600 flex items-center justify-center hover:scale-105 active:scale-95 transition group","aria-label":"Toggle hero",children:l.jsx("svg",{className:`w-6 h-6 text-gray-700 dark:text-gray-200 transition-transform duration-500 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M6 15l6-6 6 6"})})})})]}),l.jsx("main",{className:"relative container mx-auto px-6 pt-10 pb-16 max-w-4xl",children:l.jsxs("div",{className:"space-y-6 bg-transparent",children:[l.jsx(eg,{}),l.jsx(_x,{posts:i})]})}),l.jsx(gx,{open:t,onClose:()=>e(!1)})]})}function Nx({member:t,onClick:e}){const n=r=>{r.target.onerror=null,r.target.src="https://placehold.co/400x600/cccccc/ffffff?text=No+Image"};return l.jsxs("div",{className:"member-card group relative parallelogram-shape cursor-pointer aspect-[2/3]",onClick:()=>e==null?void 0:e(t),children:[l.jsx("div",{className:"image-container absolute inset-0 z-[2]",children:l.jsx("img",{"data-src":t.avatar,alt:t.name,onError:n,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out lazy-image",loading:"lazy"})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-[1]"}),l.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-5 z-[4]",children:[l.jsx("h3",{className:"text-2xl font-bold text-white image-text-effect tracking-wide",children:t.name}),l.jsx("p",{className:"text-gray-200 image-text-effect font-medium",children:t.nickname})]})]})}function Ex({members:t=[],onSelect:e}){y.useEffect(()=>{const r=document.querySelectorAll("img.lazy-image"),s=new IntersectionObserver((o,u)=>{o.forEach(c=>{if(c.isIntersecting){const d=c.target,h=d.getAttribute("data-src");h&&(d.src=h),d.onload=()=>{var f;d.classList.add("loaded"),(f=d.parentElement)==null||f.classList.add("loaded")},u.unobserve(d)}})},{rootMargin:"100px 0px",threshold:.1});r.forEach(o=>s.observe(o));const i=document.querySelectorAll(".member-card"),a=new IntersectionObserver(o=>{o.forEach(u=>{const c=u.target;if(u.isIntersecting){const d=Math.random()*200;setTimeout(()=>c.classList.add("visible"),d)}else c.classList.remove("visible")})},{rootMargin:"0px 0px -50px 0px",threshold:.2});return i.forEach(o=>a.observe(o)),()=>{s.disconnect(),a.disconnect()}},[t]);const n=bt.useMemo(()=>{const r=new Set,s=[];return(t||[]).forEach((i,a)=>{const o=(i==null?void 0:i.id)||(i==null?void 0:i.email)||`idx-${a}`;r.has(o)||(r.add(o),s.push(i))}),s},[t]);return l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:n.map((r,s)=>{const i=r!=null&&r.id?`mem-${r.id}`:r!=null&&r.email?`mem-${r.email}`:`mem-fallback-${s}`;return l.jsx(Nx,{member:r,onClick:e},i)})})}function Cx({member:t,onClose:e}){var r,s,i;if(y.useEffect(()=>{function a(o){o.key==="Escape"&&(e==null||e())}return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),!t)return null;const n=a=>{a.target.onerror=null,a.target.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:e}),l.jsxs("aside",{className:"fixed top-0 right-0 h-full w-full md:w-1/3 bg-white/40 dark:bg-black/60 backdrop-blur-lg border-l border-gray-200 dark:border-gray-700 shadow-2xl z-50 p-8 overflow-y-auto",role:"dialog","aria-modal":"true",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors","aria-label":"ng",children:""}),l.jsxs("div",{className:"text-center pt-8",children:[l.jsx("img",{src:t.avatar,onError:n,alt:t.name,className:"w-32 h-32 rounded-full mx-auto mb-4 border-4 border-green-400 object-cover shadow-lg"}),l.jsx("h3",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:t.name}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:t.nickname}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-left",children:t.bio}),t.quote&&l.jsx("blockquote",{className:"border-l-4 border-green-200 dark:border-green-700 pl-4 italic text-gray-600 dark:text-gray-400 mb-6 text-left",children:l.jsxs("p",{children:['"',t.quote,'"']})}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[((r=t.social)==null?void 0:r.facebook)&&l.jsx("a",{href:t.social.facebook,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:text-blue-800",children:"FB"}),((s=t.social)==null?void 0:s.instagram)&&l.jsx("a",{href:t.social.instagram,target:"_blank",rel:"noreferrer",className:"text-pink-600 hover:text-pink-800",children:"IG"}),((i=t.social)==null?void 0:i.tiktok)&&l.jsx("a",{href:t.social.tiktok,target:"_blank",rel:"noreferrer",className:"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300",children:"TT"})]})]})]})]})}const Hi={name:"A12K45",slogan:"Nin kha 2022 - 2025"},rg=[{id:1,name:"Nguyn Cng Phong",nickname:"Phong",avatar:"/phong.png",bio:"Cy hi ca lp, lun mang li ting ci cho mi ngi bng nhng cu chuyn d dm.",quote:"Mt n ci bng mi thang thuc b.",social:{facebook:"",instagram:"https://instagram.com",tiktok:"https://tiktok.com"}},{id:2,name:"Nguyn Hu ng",nickname:"ng",avatar:"/nguyenhuuduong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch  nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:3,name:"Nguyn Hu Huy",nickname:"Pht",avatar:"/huuhuy.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:4,name:"Bi Tun Phong",nickname:"Phong",avatar:"/tuanphong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:5,name:"Nguyn c Nhn",nickname:"Nhn th",avatar:"/nhan.png",bio:"Lp trng gng mu, lun l ngi khuy ng phong tro v gip  bn b. Thch c sch v tham gia cc hot ng ngoi kha.",quote:"Khng c g l khng th vi mt ngi lun bit c gng.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:6,name:"Nguyn Xun Bc",nickname:"Nh bo",avatar:"/bac.png",bio:"Ngi sao th thao ca lp, c bit gii mn bng r. Lun trn y nng lng v tinh thn lc quan.",quote:"Tht bi khng phi l kt thc, m l c hi  bt u li mt cch thng minh hn.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:"https://tiktok.com"}},{id:7,name:"Ng Vn Chin",nickname:"Chin",avatar:"/chien.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:8,name:"V Xun Khnh",nickname:"Khnh",avatar:"/xuankhanh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:9,name:"Nguyn Vn Ti",nickname:"Ti",avatar:"/tai.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:10,name:"Nguyn nh Thng",nickname:"Thng",avatar:"/thuong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:11,name:"Trn Vn Trng",nickname:"Trng",avatar:"/truongtru.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:12,name:"Bi c Thnh",nickname:"Nn",avatar:"/buithanh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:13,name:"Nguyn Tho Nguyn",nickname:"Nguyn",avatar:"/nguyen.png",bio:"C ging ht truyn cm v l tm hn ca i vn ngh. Rt yu thch m nhc v ngh thut.",quote:"m nhc l cch  tm hn ct ting.",social:{facebook:"https://facebook.com",instagram:"",tiktok:"https://tiktok.com"}},{id:14,name:"Mai Th Ngc Tr",nickname:"Tr",avatar:"/tra.png",bio:"Chuyn gia tin hc ca lp, c th gii quyt mi vn  v my tnh. c m tr thnh k s phn mm ti Google.",quote:"Clean code always looks like it was written by someone who cares.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:15,name:"Nguyn Hong Anh",nickname:"Bn",avatar:"/hoanganh.png",bio:"Lp ph hc tp, lun t thnh tch cao v sn sng ging bi cho cc bn trong lp.",quote:"Kin thc l kho bu v tn.",social:{facebook:"https://facebook.com",instagram:"",tiktok:""}},{id:16,name:"Hong Danh Khang",nickname:"ng trm A12",avatar:"/dkhang.png",bio:"Tay my chnh ca lp, lu gi mi khonh khc ng nh qua ng knh ca mnh. am m nhip nh v du lch.",quote:"Mi bc nh l mt cu chuyn.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:17,name:"Nguyn Thnh Vinh",nickname:"Vinh",avatar:"/vinh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:18,name:" Vn Cng",nickname:"29s6",avatar:"/cuong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:19,name:"Nguyn Thnh Cng",nickname:"Cng",avatar:"/cong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:20,name:"L Vn c",nickname:"Lee",avatar:"/leduc.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:21,name:"Nguyn Bo Minh",nickname:"Minh",avatar:"/baominh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:22,name:"Ng Minh Hong",nickname:"Ng",avatar:"/ngo.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:23,name:"Nguyn Nht Khnh",nickname:"Khnh",avatar:"/nkhanh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:24,name:"Nguyn Vn c",nickname:"nvd",avatar:"/nduc.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:25,name:"Nguyn B Huy",nickname:"B Xe",avatar:"/huyba.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:26,name:"Ph nh Khng Duy",nickname:"Duy",avatar:"/duy.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:27,name:"inh Trng Khang",nickname:"Khang gh",avatar:"/dinhtrongkhang.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:46,name:"ng Trn Quc Huy",nickname:"Gio S",avatar:"/qhuy.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:28,name:"T Th Khnh Vy",nickname:"Vy",avatar:"/vy.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:27,name:"Nguyn Th Uyn Nhi",nickname:"Uyn Nhi",avatar:"/nhi2.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:30,name:"Nguyn Nh Vn",nickname:"Vn",avatar:"/van.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:31,name:"Nguyn Th Huyn",nickname:"Huyn",avatar:"/huyen.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:32,name:"o An Duyn",nickname:"Duyn",avatar:"/duyen.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:33,name:"V Th Tr Mi",nickname:"Mi",avatar:"/mi.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:34,name:"Phm Th Ngc Linh",nickname:"Linh",avatar:"/linh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:35,name:"Cao Th nh",nickname:"Lp Trng",avatar:"/anh2.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:36,name:"Hong Thy Dng",nickname:"Dng",avatar:"/duongchien.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:37,name:"Phm Nguyn Hng",nickname:"Hng",avatar:"/hungkt.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:38,name:"Nguyn Vit Nht Minh",nickname:"Bc S",avatar:"/nminh.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:39,name:"Bi Hu Hng",nickname:"Goat",avatar:"/goat.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:40,name:"Nguyn Th Thu Hng",nickname:"Hng",avatar:"/huong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:41,name:"Bi Vn Cng",nickname:"C",avatar:"/buivancuong.png",bio:"Ngi qun l ti chnh ng tin cy ca lp. Cn thn, t m v rt c trch nhim.",quote:"Chi tiu hp l l cha kha ca s t do.",social:{facebook:"https://facebook.com",instagram:"https://instagram.com",tiktok:""}},{id:42,name:"Nguyn Duy Hc",nickname:"Hc",avatar:"/hoc.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}},{id:43,name:"L Khoa V",nickname:"Rt Tic V Khng C nh",avatar:"/clone1.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}},{id:44,name:"Nguyn Minh c",nickname:"Rt Tic V Khng C nh",avatar:"/clone1.png",bio:"Duplicate entry adjustment placeholder",quote:"",social:{facebook:"",instagram:"",tiktok:""}}];function Tx(){const[t,e]=y.useState(null);return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx("div",{className:"hero-block relative",children:l.jsxs("div",{className:"container mx-auto px-6 py-24 text-center relative z-[1]",children:[l.jsx(ou,{text:Hi.name}),l.jsx("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg",children:"Trng THPT Hoi c B"}),l.jsx("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan",children:Hi.slogan})]})}),l.jsxs("main",{className:"container mx-auto px-6 py-12 flex-1",children:[l.jsx("section",{className:"mb-20",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl shadow-xl p-8 md:p-12 lg:flex lg:items-center lg:gap-12 transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]",children:[l.jsx("div",{className:"lg:w-1/3 mb-8 lg:mb-0 flex justify-center",children:l.jsx("div",{className:"teacher-portrait-wrapper parallelogram-shape mx-auto",children:l.jsx("img",{src:"/GVN.png",alt:"nh Gio vin ch nhim",className:"teacher-portrait object-cover"})})}),l.jsxs("div",{className:"lg:w-2/3 text-center lg:text-left",children:[l.jsx("h2",{className:"text-3xl font-bold mb-2 text-green-600 dark:text-green-400",children:"Gio Vin Ch Nhim"}),l.jsx("h3",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"C Phng Th Thanh Huyn"}),l.jsx("blockquote",{className:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed border-l-4 border-green-200 dark:border-green-700 pl-4 italic",children:'"Vi tt c tnh yu thng v tm huyt, c mong rng A12K45 s l mt tp th on kt, lun gip  nhau trong hc tp v cng nhau to nn nhng k nim p  nht ca tui hc tr. Hy lun t tin, vng bc trn con ng chinh phc tri thc v thc hin c m ca mnh nh!"'}),l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:" Li nhn t c ch nhim"})]})]})}),l.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Gp G Cc Thnh Vin"}),l.jsx(Ex,{members:rg,onSelect:n=>e(n)})]}),l.jsx(Cx,{member:t,onClose:()=>e(null)})]})}function Ya({target:t,delayFirst:e=!1}){const[n,r]=y.useState(0);return y.useEffect(()=>{let s,i;const a=e?1400:1e3;function o(u){i||(i=u);const c=Math.min(u-i,a),d=c/a,h=Math.round(t*d);r(h),c<a?s=requestAnimationFrame(o):r(t)}return s=requestAnimationFrame(o),()=>cancelAnimationFrame(s)},[t,e]),l.jsxs("div",{className:"text-4xl font-extrabold text-green-600",children:[n,"%"]})}const Px=[33,2,35],Ox={2:"Top 1",33:"Top 2",35:"Top 3"},Rx={2:"27,5",33:"27,25",35:"27"},Ax={2:"HUST.png",33:"HUP.webp",35:"NEU.png"};function Ix(){return Px.map(t=>{const e=rg.find(i=>i.id===t)||{},n=Ox[t],r=Rx[t],s=Ax[t];return{m:e,label:n,score:r,logo:s,id:t}})}function Lx(){const[t,e]=y.useState(null),[n,r]=y.useState(null),[s,i]=y.useState(!1),a=y.useCallback(async()=>{try{const f=await(await fetch("https://docs.google.com/spreadsheets/d/1GtkKf1O_c0Nt6rIdDJE3BgOM2nEPni6leT9Oa0orFqM/gviz/tq?tqx=out:json&gid=1086408627",{cache:"no-cache"})).text(),v=f.substring(f.indexOf("{"),f.lastIndexOf("}")+1),x=JSON.parse(v),w=x.table&&x.table.cols||[],b=x.table&&x.table.rows||[],p=w.map((E,T)=>T).filter(E=>E<5),g=w.filter((E,T)=>p.includes(T)),m=E=>E==null?"":String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");let _=`<thead class="bg-amber-50 dark:bg-amber-900/30 sticky top-0 z-10">
<tr>`+g.map(E=>`<th class="px-4 py-2 text-left text-xs font-semibold text-amber-800 dark:text-amber-200 tracking-wide uppercase">${m(E.label||E.id)}</th>`).join("")+`</tr>
</thead>`,j='<tbody class="divide-y divide-gray-100 dark:divide-gray-700">';b.forEach((E,T)=>{const R=E.c||[],P=T%2===0?"bg-white dark:bg-gray-900/40":"bg-gray-50 dark:bg-gray-900/20";j+=`<tr class="${P} hover:bg-amber-50/60 dark:hover:bg-amber-900/40 transition-colors">`+p.map(O=>{const D=R[O],F=D&&(D.f||D.v)?D.f||D.v:"";return`<td class="px-4 py-2 text-sm text-gray-700 dark:text-gray-200 whitespace-pre-line">${m(F)}</td>`}).join("")+"</tr>"}),b.length===0?j=`<tbody><tr><td class="px-4 py-6 text-center text-sm text-gray-500" colspan="${g.length}">Khng c d liu</td></tr></tbody>`:j+="</tbody>",e(`<table class="min-w-full text-sm align-top">${_}${j}</table>`)}catch(u){console.error(u),r("Khng ti c d liu. Vui lng th li sau.")}},[]);y.useEffect(()=>{a()},[a]),y.useEffect(()=>{const u=document.getElementById("counters-section");if(!u)return;if(!("IntersectionObserver"in window)){i(!0);return}const c=new IntersectionObserver((d,h)=>{d.forEach(f=>{f.isIntersecting&&(i(!0),h.disconnect())})},{threshold:.35});return c.observe(u),()=>c.disconnect()},[]);const o=Ix();return y.useEffect(()=>{const u=document.getElementById("top3-wrapper");if(!u)return;const c=u.querySelectorAll(".top3-card");return c.forEach(d=>{const h=d.querySelector(".rank-text");if(!h)return;const f=h.dataset.label,x=h.dataset.score.replace(/,/g,".");function w(b){h.textContent!==b&&(h.style.opacity="0",h.style.transform="scale(0.82)",setTimeout(()=>{h.textContent=b,h.style.opacity="1",h.style.transform="scale(1.08)",setTimeout(()=>{h.style.transform="scale(1)"},240)},150))}d.addEventListener("mouseenter",()=>{h.textContent===f&&w(x)}),d.addEventListener("mouseleave",()=>{h.textContent!==f&&w(f)})}),()=>{c.forEach(d=>{d.replaceWith(d)})}},[o]),l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx("div",{className:"hero-block relative",children:l.jsxs("div",{className:"container mx-auto px-6 py-24 text-center relative z-[1]",children:[l.jsx(ou,{text:Hi.name}),l.jsx("p",{className:"mt-14 md:mt-20 text-2xl md:text-3xl font-semibold text-white drop-shadow-lg",children:"Trng THPT Hoi c B"}),l.jsx("p",{className:"mt-8 md:mt-10 text-xl md:text-2xl text-white font-medium tracking-wide",id:"classSlogan",children:Hi.slogan})]})}),l.jsxs("main",{className:"container mx-auto px-6 py-12 flex-1",children:[l.jsx("section",{id:"counters-section",className:"mb-20",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl shadow-xl p-8 md:p-12 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400",children:"Thnh Tch"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-center",children:[l.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-white rounded-xl",children:[s?l.jsx(Ya,{target:100,delayFirst:!0}):l.jsx("div",{className:"text-4xl font-extrabold text-green-600",children:"0%"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"S Lng Hc Sinh Trng Tuyn"})]}),l.jsxs("div",{className:"p-6 bg-gradient-to-br from-white to-green-50 rounded-xl",children:[s?l.jsx(Ya,{target:76}):l.jsx("div",{className:"text-4xl font-extrabold text-green-600",children:"0%"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Cng lp"})]}),l.jsxs("div",{className:"p-6 bg-gradient-to-br from-white to-green-50 rounded-xl",children:[s?l.jsx(Ya,{target:24}):l.jsx("div",{className:"text-4xl font-extrabold text-green-600",children:"0%"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Dn Lp"})]})]})]})}),l.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Top 3 Hc Sinh Xut Sc Nht k thi THPT quc gia 2025"}),l.jsx("div",{id:"top3-wrapper",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-8 mb-16",children:o.map(({m:u,label:c,score:d,logo:h,id:f})=>l.jsxs("div",{className:"top3-card member-card visible group relative parallelogram-shape cursor-pointer aspect-[2/3]",children:[l.jsx("div",{className:"image-container absolute inset-0 z-[2]",children:l.jsx("img",{src:u.avatar,alt:u.name,onLoad:v=>{v.currentTarget.classList.add("loaded");const x=v.currentTarget.closest(".image-container");x&&x.classList.add("loaded")},className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out"})}),c&&l.jsx("div",{className:"rank-overlay absolute inset-0 flex items-center justify-center z-[3] pointer-events-none transition-opacity",children:l.jsx("span",{className:"rank-text text-6xl md:text-7xl font-black text-gray-100/90 select-none tracking-tight transition-transform duration-300","data-label":c,"data-score":d,style:{textShadow:"0 3px 6px rgba(0,0,0,.55),0 0 14px rgba(0,0,0,.35)"},children:c})}),h&&l.jsx("div",{className:"uni-logo absolute top-2 left-1/2 -translate-x-1/2 z-[5] pointer-events-none",children:l.jsx("img",{src:`/${h}`,alt:"Logo",className:"mx-auto object-contain",style:{maxWidth:"120px",filter:"drop-shadow(0 4px 8px rgba(0,0,0,.5))"}})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent z-[1]"}),l.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-5 z-[4]",children:[l.jsx("h3",{className:"text-2xl font-bold text-white image-text-effect tracking-wide",children:u.name}),l.jsx("p",{className:"text-gray-200 image-text-effect font-medium",children:u.nickname})]})]},f))}),l.jsx("section",{className:"mt-20 mb-12",id:"bang-vang-section",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800/60 rounded-2xl shadow-xl p-6 md:p-10",children:[l.jsx("h2",{className:"text-3xl font-extrabold text-center mb-6 text-amber-600 dark:text-amber-400 drop-shadow",children:"Bng vng A12K45"}),l.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:"T ng ng b d liu trc tip t Google Sheets."}),l.jsxs("div",{id:"goldenBoard",className:"relative",children:[!t&&!n&&l.jsxs("div",{id:"goldenBoardLoading",className:"flex flex-col items-center justify-center py-16",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ang ti d liu..."})]}),n&&l.jsx("div",{id:"goldenBoardError",className:"text-center text-red-600 dark:text-red-400 text-sm py-6",children:n}),t&&l.jsx("div",{id:"goldenBoardTableWrapper",className:"overflow-auto max-h-[70vh] ring-1 ring-gray-200 dark:ring-gray-700 rounded-xl",dangerouslySetInnerHTML:{__html:t}})]}),l.jsx("div",{className:"mt-4 text-center text-xs text-gray-400",children:"Ngun: Google Sheets (cp nht mi ln ti trang)"})]})})]})]})}function $x(){const{login:t}=Fe(),e=Or(),[n,r]=y.useState(""),[s,i]=y.useState(""),[a,o]=y.useState(!1),[u,c]=y.useState(null);async function d(h){h.preventDefault(),c(null),o(!0);try{if((await t({email:n,password:s})).isAdmin){c("Ti khon admin: hy ng nhp ti /admin");return}e("/")}catch(f){c(f.message)}finally{o(!1)}}return l.jsxs("div",{className:"max-w-md mx-auto py-16 px-6",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2 text-green-600 dark:text-green-400",children:"ng nhp"}),l.jsxs("p",{className:"text-xs mb-4 text-gray-500 dark:text-gray-400",children:["Admin? dng ng dn ",l.jsx("span",{className:"font-mono bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"/admin"})]}),l.jsxs("form",{onSubmit:d,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:n,onChange:h=>r(h.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mt khu"}),l.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:s,onChange:h=>i(h.target.value),required:!0})]}),u&&l.jsx("div",{className:"text-sm text-red-500",children:u}),l.jsx("button",{disabled:a,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition",children:a?"ang x l...":"ng nhp"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cha c ti khon? ",l.jsx(Ln,{to:"/register",className:"text-green-600 dark:text-green-400 font-medium",children:"ng k"})]})]})]})}function Ux(){const{register:t}=Fe(),e=Or(),[n,r]=y.useState(""),[s,i]=y.useState(""),[a,o]=y.useState(""),[u,c]=y.useState(""),[d,h]=y.useState(!1),[f,v]=y.useState(null);async function x(w){if(w.preventDefault(),v(null),a!==u){v("Mt khu nhp li khng khp");return}h(!0);try{await t({email:n,password:a,name:s}),e("/")}catch(b){v(b.message)}finally{h(!1)}}return l.jsxs("div",{className:"max-w-md mx-auto py-16 px-6",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400",children:"ng k"}),l.jsxs("form",{onSubmit:x,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"H tn"}),l.jsx("input",{type:"text",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:s,onChange:w=>i(w.target.value),placeholder:"Tu chn"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{type:"email",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:n,onChange:w=>r(w.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mt khu"}),l.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:a,onChange:w=>o(w.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nhp li mt khu"}),l.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500",value:u,onChange:w=>c(w.target.value),required:!0})]}),f&&l.jsx("div",{className:"text-sm text-red-500",children:f}),l.jsx("button",{disabled:d,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition",children:d?"ang x l...":"To ti khon"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" c ti khon? ",l.jsx(Ln,{to:"/login",className:"text-green-600 dark:text-green-400 font-medium",children:"ng nhp"})]})]})]})}function Hc(){const{id:t}=u0(),e=Or(),{user:n,updateProfile:r,updateCover:s,changePassword:i,loading:a}=Fe(),{posts:o,usersMap:u}=Lt(),c=t?u[t]:n;y.useEffect(()=>{!a&&t&&!c&&e("/profile")},[t,c,a,e]);const d=c&&n&&c.id===n.id,[h,f]=y.useState("posts"),[v,x]=y.useState(!1),[w,b]=y.useState((c==null?void 0:c.bio)||""),[p,g]=y.useState((c==null?void 0:c.name)||""),[m,_]=y.useState(!1),[j,E]=y.useState(!1),[T,R]=y.useState(""),[P,O]=y.useState(""),[D,F]=y.useState(""),[Y,ae]=y.useState(null),[q,ie]=y.useState(null),Ee=y.useRef(null),M=y.useRef(null),[B,G]=y.useState(!1),[re,ne]=y.useState(!1);y.useEffect(()=>{b((c==null?void 0:c.bio)||""),g((c==null?void 0:c.name)||"")},[c==null?void 0:c.bio,c==null?void 0:c.name]);function nt(N){var k;(k=N.current)==null||k.click()}function Ce(N,k){if(!N||N.size>2*1024*1024)return;const S=new FileReader;S.onload=C=>k(C.target.result),S.readAsDataURL(N)}function Nt(N){var S;const k=(S=N.target.files)==null?void 0:S[0];k&&(G(!0),Ce(k,async C=>{await r({avatar:C}),G(!1)}))}function Le(N){var S;const k=(S=N.target.files)==null?void 0:S[0];k&&(ne(!0),Ce(k,async C=>{await s(C),ne(!1)}))}async function Ke(){await r({bio:w}),x(!1)}async function Ir(){_(!0),await r({name:p||c.email}),_(!1)}async function Ds(N){if(N.preventDefault(),ae(null),ie(null),P.length<4){ae("Mt khu qu ngn");return}if(P!==D){ae("Nhp li khng khp");return}try{await i({oldPassword:T,newPassword:P}),ie("i mt khu thnh cng"),R(""),O(""),F("")}catch(k){ae(k.message)}}const $t=o.filter(N=>N.authorId===(c==null?void 0:c.id)),I=$t.flatMap(N=>N.images.map((k,S)=>({src:k,postId:N.id,idx:S})));return c?l.jsxs("div",{className:"min-h-screen",children:[l.jsxs("div",{className:"relative w-full bg-gray-300 dark:bg-gray-700 aspect-[3/1] md:aspect-[3.5/1] overflow-hidden",children:[c.cover?l.jsx("img",{src:c.cover,alt:"cover",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-sm",children:"Cha c nh ba"}),d&&l.jsx("button",{onClick:()=>nt(M),className:"absolute bottom-3 right-3 px-3 py-2 rounded-md text-xs font-medium bg-black/60 text-white hover:bg-black/70 backdrop-blur-sm flex items-center gap-1",children:re?"ang ti...":"i nh ba"}),l.jsx("input",{ref:M,onChange:Le,type:"file",accept:"image/*",className:"hidden"})]}),l.jsx("div",{className:"max-w-5xl mx-auto px-4 md:px-6 -mt-20 relative z-10",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:gap-10 bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 shadow-xl backdrop-blur-sm",children:[l.jsxs("div",{className:"relative group w-40 h-40 rounded-full ring-4 ring-white dark:ring-black shadow-lg overflow-hidden flex-shrink-0 bg-gradient-to-br from-green-500 to-green-600 text-white text-4xl font-bold flex items-center justify-center",children:[c.avatar?l.jsx("img",{src:c.avatar,alt:"avatar",className:"w-full h-full object-cover"}):(c.name||c.email||"?").charAt(0).toUpperCase(),d&&l.jsx("button",{onClick:()=>nt(Ee),className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center text-xs font-semibold transition",children:"i nh"}),l.jsx("input",{ref:Ee,onChange:Nt,type:"file",accept:"image/*",className:"hidden"})]}),l.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{disabled:!d,value:p,onChange:N=>g(N.target.value),className:`text-2xl md:text-3xl font-bold bg-transparent border-b focus:outline-none focus:border-green-500 ${d?"border-gray-300 dark:border-gray-600":"border-transparent"} pb-1`}),d&&l.jsx("button",{onClick:Ir,disabled:m,className:"text-xs px-3 py-1.5 rounded-md bg-green-600 text-white disabled:opacity-50",children:m?"Lu...":"Lu"})]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Tham gia ",Nr(c.createdAt)]})]}),l.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:v?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:w,onChange:N=>b(N.target.value),rows:3,className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Vit i li gii thiu..."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Ke,className:"px-4 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white text-xs font-semibold",children:"Lu"}),l.jsx("button",{onClick:()=>{x(!1),b(c.bio||"")},className:"px-4 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-xs",children:"Hy"})]})]}):l.jsxs("div",{children:[c.bio?l.jsx("p",{className:"leading-relaxed whitespace-pre-wrap break-words",children:c.bio}):l.jsx("p",{className:"text-gray-400 text-sm italic",children:"Cha c gii thiu."}),d&&l.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-xs font-medium text-green-600 hover:underline",children:"Chnh sa gii thiu"})]})}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[d&&l.jsx("button",{onClick:()=>E(N=>!N),className:"px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-xs font-medium",children:"i mt khu"}),!d&&l.jsx("button",{className:"px-4 py-2 rounded-md bg-green-600 text-white text-xs font-medium",children:"Nhn tin"})]})]})]})}),l.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-6 mt-8",children:[l.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 flex gap-6 overflow-x-auto",children:["posts","about","photos"].map(N=>l.jsx("button",{onClick:()=>f(N),className:`py-3 -mb-px px-1 border-b-2 text-sm font-medium transition ${h===N?"border-green-600 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-green-600"} capitalize`,children:N==="posts"?"Bi vit":N==="about"?"Gii thiu":"nh"},N))}),l.jsxs("div",{className:"mt-6",children:[h==="posts"&&l.jsxs("div",{className:"space-y-6",children:[d&&l.jsx(eg,{}),$t.length?$t.map(N=>l.jsx(ng,{post:N},N.id)):l.jsx("div",{className:"text-sm text-gray-500",children:"Cha c bi vit."})]}),h==="about"&&l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5 space-y-2",children:[l.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Thng tin c bn"}),l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Email: ",l.jsx("span",{className:"font-medium",children:c.email})]}),l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Tham gia: ",l.jsx("span",{className:"font-medium",children:new Date(c.createdAt).toLocaleDateString()})]}),l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Bi vit: ",l.jsx("span",{className:"font-medium",children:$t.length})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5 space-y-3",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Gii thiu"}),!v&&c.bio&&l.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:c.bio}),d&&!v&&l.jsx("button",{onClick:()=>x(!0),className:"text-xs text-green-600 hover:underline",children:"Chnh sa"}),v&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:w,onChange:N=>b(N.target.value),rows:4,className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Ke,className:"px-4 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white text-xs font-semibold",children:"Lu"}),l.jsx("button",{onClick:()=>{x(!1),b(c.bio||"")},className:"px-4 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-xs",children:"Hy"})]})]})]}),d&&l.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-gray-900/70 border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[l.jsx("button",{onClick:()=>E(N=>!N),className:"text-xs font-medium text-green-600 hover:underline",children:j?"n i mt khu":"i mt khu"}),j&&l.jsxs("form",{onSubmit:Ds,className:"mt-4 grid md:grid-cols-3 gap-4 text-sm",children:[l.jsx("input",{type:"password",value:T,onChange:N=>R(N.target.value),placeholder:"Mt khu hin ti",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsx("input",{type:"password",value:P,onChange:N=>O(N.target.value),placeholder:"Mt khu mi",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsx("input",{type:"password",value:D,onChange:N=>F(N.target.value),placeholder:"Nhp li",className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500"}),Y&&l.jsx("div",{className:"text-xs text-red-500 md:col-span-3",children:Y}),q&&l.jsx("div",{className:"text-xs text-green-600 md:col-span-3",children:q}),l.jsx("div",{className:"md:col-span-3",children:l.jsx("button",{className:"px-5 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold",children:"i mt khu"})})]})]})]}),h==="photos"&&l.jsx("div",{children:I.length?l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:I.map((N,k)=>l.jsx("div",{className:"relative aspect-square overflow-hidden rounded-lg group bg-black/5",children:l.jsx("img",{src:N.src,alt:"pimg"+k,className:"w-full h-full object-cover group-hover:scale-110 transition"})},k))}):l.jsx("div",{className:"text-sm text-gray-500",children:"Cha c nh."})})]})]})]}):l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-16 text-center text-sm text-gray-500",children:"Khng tm thy ngi dng"})}function Dx(){const{posts:t}=Lt(),{user:e}=Fe(),[n,r]=y.useState(""),s=y.useMemo(()=>t.filter(i=>n?(i.content||"").toLowerCase().includes(n.toLowerCase())||i.id.includes(n):!0),[t,n]);return e!=null&&e.isAdmin?l.jsxs("div",{className:"mt-12",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tt c bi vit (k c  xo)"}),l.jsx("div",{className:"flex gap-3 mb-4",children:l.jsx("input",{value:n,onChange:i=>r(i.target.value),placeholder:"Tm ni dung hoc ID...",className:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-xs border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:[l.jsx("th",{className:"p-2 text-left",children:"ID"}),l.jsx("th",{className:"p-2 text-left",children:"Tc gi"}),l.jsx("th",{className:"p-2 text-left",children:"Trng thi"}),l.jsx("th",{className:"p-2 text-left",children:"Ngy to"}),l.jsx("th",{className:"p-2 text-left",children:"Sa cui"}),l.jsx("th",{className:"p-2 text-left",children:"nh"}),l.jsx("th",{className:"p-2 text-left",children:"Ni dung (rt gn)"})]})}),l.jsx("tbody",{children:s.map(i=>{var a;return l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[l.jsx("td",{className:"p-2 font-mono max-w-[120px] truncate",title:i.id,children:i.id}),l.jsx("td",{className:"p-2",children:i.authorId}),l.jsx("td",{className:"p-2",children:i.deleted?" xo":"Hin th"}),l.jsx("td",{className:"p-2",children:Nr(i.createdAt)}),l.jsx("td",{className:"p-2",children:i.updatedAt?Nr(i.updatedAt):"-"}),l.jsx("td",{className:"p-2",children:((a=i.images)==null?void 0:a.length)||0}),l.jsx("td",{className:"p-2 max-w-[260px] truncate",title:i.content,children:i.content||""})]},i.id)})})]})})]}):null}function Mx(){const{listUsers:t,adminUpdateUser:e,adminDeleteUser:n,user:r,getActivity:s}=Fe(),{posts:i}=Lt(),[a,o]=y.useState([]),[u,c]=y.useState(!0);y.useEffect(()=>{let j=!1;return(async()=>{try{const E=await t();j||o(Array.isArray(E)?E:[])}finally{j||c(!1)}})(),()=>{j=!0}},[t]);const[d,h]=y.useState(""),[f,v]=y.useState("users");async function x(){c(!0);const j=await t();o(Array.isArray(j)?j:[]),c(!1)}function w(j){e(j.id,{suspended:!j.suspended}),x()}function b(j){confirm("Xa user v ton b ni dung?")&&(n(j.id),x())}function p(j){return i.filter(E=>E.authorId===j).reduce((E,T)=>{var R;return E+(((R=T.images)==null?void 0:R.length)||0)},0)}function g(j){return i.filter(E=>E.authorId===j).length}const m=(Array.isArray(a)?a:[]).filter(j=>{if(!d)return!0;const E=d.toLowerCase();return(j.email||"").toLowerCase().includes(E)||(j.name||"").toLowerCase().includes(E)}),_=y.useMemo(()=>({users:Array.isArray(a)?a.length:0,posts:i.length}),[a,i]);return l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-10",children:[l.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Bng iu khin Admin"}),l.jsx("div",{className:"flex gap-4 border-b border-gray-200 dark:border-gray-700 mb-6 text-sm",children:["users","posts","security","server"].map(j=>l.jsx("button",{onClick:()=>v(j),className:`py-2 px-3 -mb-px border-b-2 ${f===j?"border-green-600 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-green-600"}`,children:j==="users"?"Ngi dng":j==="posts"?"Bi vit":j==="security"?"Bo mt":"Server"},j))}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-sm",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow",children:[l.jsx("div",{className:"text-gray-500 text-[11px]",children:"Ngi dng"}),l.jsx("div",{className:"text-lg font-semibold",children:_.users})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow",children:[l.jsx("div",{className:"text-gray-500 text-[11px]",children:"Bi vit"}),l.jsx("div",{className:"text-lg font-semibold",children:_.posts})]})]}),f==="users"&&l.jsxs("div",{children:[u&&l.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"ang ti ngi dng..."}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("input",{value:d,onChange:j=>h(j.target.value),placeholder:"Tm ngi dng...",className:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"}),l.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-xs",children:"Ti li"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-xs border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300",children:[l.jsx("th",{className:"p-2 text-left",children:"Tn"}),l.jsx("th",{className:"p-2 text-left",children:"Email"}),l.jsx("th",{className:"p-2",children:"Admin"}),l.jsx("th",{className:"p-2",children:"Kha"}),l.jsx("th",{className:"p-2",children:"Bi vit"}),l.jsx("th",{className:"p-2",children:"nh"}),l.jsx("th",{className:"p-2",children:"Upload (KB)"}),l.jsx("th",{className:"p-2",children:"Ln ng nhp"}),l.jsx("th",{className:"p-2",children:"Tn sut xem bi"}),l.jsx("th",{className:"p-2",children:"Thao tc"})]})}),l.jsx("tbody",{children:m.map(j=>{var P;const E=s(j.id),T=((P=E==null?void 0:E.logins)==null?void 0:P.length)||0;let R="-";if(E!=null&&E.viewedPosts){const O=Object.entries(E.viewedPosts).map(([D,F])=>({pid:D,...F})).sort((D,F)=>F.count-D.count).slice(0,2);R=O.length?O.map(D=>`${D.pid.substring(0,4)}(${D.count})`).join(", "):"-"}return l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[l.jsx("td",{className:"p-2 font-medium max-w-[140px] truncate",children:j.name}),l.jsx("td",{className:"p-2 max-w-[160px] truncate",children:j.email}),l.jsx("td",{className:"p-2 text-center",children:j.isAdmin?"":""}),l.jsx("td",{className:"p-2 text-center",children:j.suspended?"":""}),l.jsx("td",{className:"p-2 text-center",children:g(j.id)}),l.jsx("td",{className:"p-2 text-center",children:p(j.id)}),l.jsx("td",{className:"p-2 text-center",children:Math.round((j.uploadBytes||0)/1024)}),l.jsx("td",{className:"p-2 text-center",children:T}),l.jsx("td",{className:"p-2 text-center",children:R}),l.jsxs("td",{className:"p-2 flex gap-2 flex-wrap min-w-[140px]",children:[l.jsx("button",{onClick:()=>w(j),disabled:j.id===r.id,className:"px-2 py-1 rounded bg-yellow-100 dark:bg-yellow-700/40 text-yellow-700 dark:text-yellow-200",children:j.suspended?"M kha":"Kha"}),l.jsx("button",{onClick:()=>b(j),disabled:j.isAdmin,className:"px-2 py-1 rounded bg-red-100 dark:bg-red-700/40 text-red-700 dark:text-red-200 disabled:opacity-40",children:"Xa"}),l.jsx("button",{onClick:()=>{try{e(j.id,{isAdmin:!j.isAdmin}),x()}catch(O){alert(O.message)}},disabled:j.id===r.id&&j.isAdmin,className:"px-2 py-1 rounded bg-blue-100 dark:bg-blue-700/40 text-blue-700 dark:text-blue-200 disabled:opacity-40",children:j.isAdmin?"G":"Thm"})]})]},j.id)})})]})}),l.jsx("p",{className:"mt-3 text-[10px] text-gray-500",children:"(*) IP/V tr v mt khu thc t khng th ly an ton  client. Cn backend + hashing."})]}),f==="posts"&&l.jsx("div",{children:l.jsx(Dx,{})}),f==="security"&&l.jsxs("div",{className:"space-y-4 text-xs",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[l.jsx("h2",{className:"font-semibold mb-2 text-sm",children:"Tng quan bo mt (client)"}),l.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[l.jsx("li",{children:"CSP c bn  bt"}),l.jsx("li",{children:"Rate limit pha client (bi vit / bnh lun)"}),l.jsx("li",{children:"Khng th hin th mt khu ngi dng (ang hash base64) - cn thay Argon2"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[l.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Hnh ng cn lm (server)"}),l.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[l.jsx("li",{children:"Dng backend + JWT/Refresh"}),l.jsx("li",{children:"Hash Argon2id mt khu"}),l.jsx("li",{children:"Ghi log IP & User-Agent thc"}),l.jsx("li",{children:"p dng WAF / CDN"}),l.jsx("li",{children:"Thm audit log cho thay i quyn"})]})]})]}),f==="server"&&l.jsxs("div",{className:"space-y-4 text-xs",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[l.jsx("h2",{className:"font-semibold mb-2 text-sm",children:"Tnh trng server (gi lp)"}),l.jsx("p",{children:"Cha c backend thc. Gi : Express/Nest + Postgres + Prisma."})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[l.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"K hoch trin khai"}),l.jsx("p",{children:"1. Khi to repo server ring. 2. Module auth. 3. Module posts. 4. Audit + monitoring."})]})]})]})}function zx(){const{user:t,login:e,loading:n}=Fe(),[r,s]=y.useState(""),[i,a]=y.useState(""),[o,u]=y.useState(null),[c,d]=y.useState(!1);if(n)return null;if(t!=null&&t.isAdmin)return l.jsx(Mx,{});if(t&&!t.isAdmin)return l.jsxs("div",{className:"max-w-md mx-auto py-16 px-6 text-center space-y-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Khng c quyn"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bn  ng nhp nhng khng phi admin. Hy ng xut v ng nhp bng ti khon admin."})]});async function h(f){f.preventDefault(),u(null),d(!0);try{(await e({email:r,password:i})).isAdmin||u("Ti khon ny khng phi admin")}catch(v){u(v.message)}finally{d(!1)}}return l.jsxs("div",{className:"max-w-md mx-auto py-16 px-6",children:[l.jsx("h1",{className:"text-3xl font-bold mb-6 text-green-600 dark:text-green-400",children:"Admin Login"}),l.jsxs("form",{onSubmit:h,className:"space-y-4 bg-white dark:bg-gray-800/60 p-6 rounded-xl shadow",children:[l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ch dnh cho qun tr vin. Ti khon thng hy dng trang ng nhp bnh thng."}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email Admin"}),l.jsx("input",{type:"email",value:r,onChange:f=>s(f.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mt khu"}),l.jsx("input",{type:"password",value:i,onChange:f=>a(f.target.value),required:!0,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),o&&l.jsx("div",{className:"text-sm text-red-500",children:o}),l.jsx("button",{disabled:c,className:"w-full py-2 rounded-lg bg-green-600 hover:bg-green-700 disabled:opacity-60 text-white font-semibold transition",children:c?"ang x l...":"ng nhp admin"})]})]})}ff(document.getElementById("root")).render(l.jsx(cx,{children:l.jsx(mx,{children:l.jsx(I0,{children:l.jsx(N0,{children:l.jsxs(Ct,{path:"/",element:l.jsx(dx,{}),children:[l.jsx(Ct,{index:!0,element:l.jsx(Sx,{})}),l.jsx(Ct,{path:"gioithieu",element:l.jsx(Tx,{})}),l.jsx(Ct,{path:"thanhtich",element:l.jsx(Lx,{})}),l.jsx(Ct,{path:"profile",element:l.jsx(Hc,{})}),l.jsx(Ct,{path:"profile/:id",element:l.jsx(Hc,{})}),l.jsx(Ct,{path:"admin",element:l.jsx(zx,{})}),l.jsx(Ct,{path:"login",element:l.jsx($x,{})}),l.jsx(Ct,{path:"register",element:l.jsx(Ux,{})})]})})})})}));
